"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_app-uuid_app-uuid_ts-ui_packages_failbot_failbot_ts-ui_packages_reaction-viewer_R-a1391b","ui_packages_failbot_failbot_ts"],{13255:(e,n,t)=>{t.d(n,{_S:()=>r,cB:()=>o,cW:()=>i});var a=t(66871),l=t(96679);let r=()=>{let e=(0,a.JV)().appId;return e&&"rails"!==e?e:crypto.randomUUID()},i=e=>{(0,a.C3)({appId:e})},o=()=>{let e=document.querySelector("react-app")||document.querySelector("projects-v2");return e?.uuid||"rails"};l.cg?.addEventListener("hashchange",()=>{(0,a.C3)({appId:o()})},!0)},7799:(e,n,t)=>{let a;function l(){if(!a)throw Error("Client env was requested before it was loaded. This likely means you are attempting to use client env at the module level in SSR, which is not supported. Please move your client env usage into a function.");return a}function r(){return a?.locale??"en-US"}function i(){return!!l().login}t.d(n,{JK:()=>r,M3:()=>i,_$:()=>l}),!function(){if("undefined"!=typeof document){let e=document.getElementById("client-env");if(e)try{a=JSON.parse(e.textContent||"")}catch(e){console.error("Error parsing client-env",e)}}}()},32475:(e,n,t)=>{t.d(n,{G:()=>l,K:()=>r});var a=t(96679);let l=a.XC?.readyState==="interactive"||a.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{a.XC?.addEventListener("DOMContentLoaded",()=>{e()})}),r=a.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{a.cg?.addEventListener("load",e)})},22353:(e,n,t)=>{t.d(n,{N7:()=>h});var a=t(36301),l=t(77065),r=t(24212);function i(e){return(0,r.q)(e.stack||"").map(e=>({filename:e.file||"",function:String(e.methodName),lineno:(e.lineNumber||0).toString(),colno:(e.column||0).toString()}))}function o(e){let n=document.querySelectorAll(e);if(n.length>0)return n[n.length-1]}var s=t(43827),c=t(96679),u=t(78284),d=t(27851),m=t(62053);let p=!1,y=0,g=Date.now(),f=new Set(["AbortError","AuthSessionExpiredError","TypeError"]),k=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","Unable to perform this operation. Please try again later."]);function h(e,n={}){if(!(e instanceof Error||"object"==typeof e&&null!==e&&"name"in e&&"string"==typeof e.name&&"message"in e&&"string"==typeof e.message)){if(function(e){if(!e||"boolean"==typeof e||"number"==typeof e)return!0;if("string"==typeof e){if(w.some(n=>e.includes(n)))return!0}else if("object"==typeof e&&"string"==typeof e.message&&"number"==typeof e.code)return!0;return!1}(e))return;let t=Error(),a=function(e){try{return JSON.stringify(e)}catch{return"Unserializable"}}(e);b(v({type:"UnknownError",value:`Unable to report error, due to a thrown non-Error type: ${typeof e}, with value ${a}`,stacktrace:i(t),catalogService:document.head?.querySelector('meta[name="current-catalog-service"]')?.content},n));return}e.name&&("AbortError"===e.name||f.has(e.name)&&k.has(e.message)||e.name.startsWith("ApiError")&&k.has(e.message))||b(v({type:e.name,value:e.message,stacktrace:i(e),catalogService:e.catalogService||document.head?.querySelector('meta[name="current-catalog-service"]')?.content},n))}async function b(e){if(!(!S&&!p&&y<10&&(0,l.TT)()))return;let n=document.head?.querySelector('meta[name="browser-errors-url"]')?.content;if(n){if(e.error.stacktrace.some(e=>R.test(e.filename)||R.test(e.function))){p=!0;return}y++;try{await fetch(n,{method:"post",body:JSON.stringify({context:e,target:document.head?.querySelector('meta[name="ui-target"]')?.content||"full"})})}catch{}}}function v(e,n={}){let t={...n};return(0,d.G7)("failbot_report_error_react_apps_on_page")&&!t.reactAppName&&(t.reactAppName=function(e){let n=function(){let e=new Set;for(let[n,t]of K)for(let a of document.querySelectorAll(n))if(a instanceof HTMLElement){let n=a.getAttribute(t);n&&e.add(n)}return Array.from(e)}();if(!n||!n.length||!e||!e.length)return;let t=new Set;for(let a of e){if(!a||!a.filename)continue;let e=a.filename.split(/[\\/]/).pop();if(!e||t.has(e))continue;t.add(e);let l=n.find(n=>e.toLowerCase().includes(n.toLowerCase()));if(l)return l}}(e.stacktrace)),Object.assign({error:e,sanitizedUrl:`${window.location.protocol}//${window.location.host}${function(){let e=o("meta[name=analytics-location]");return e?e.content:window.location.pathname}()+function(){let e=o("meta[name=analytics-location-query-strip]"),n="";e||(n=window.location.search);let t=o("meta[name=analytics-location-params]");for(let e of(t&&(n+=(n?"&":"?")+t.content),document.querySelectorAll("meta[name=analytics-param-rename]"))){let t=e.content.split(":",2);n=n.replace(RegExp(`(^|[?&])${t[0]}($|=)`,"g"),`$1${t[1]}$2`)}return n}()}`||window.location.href,readyState:document.readyState,referrer:(0,u.dR)(),timeSinceLoad:Math.round(Date.now()-g),user:function(){let e=document.head?.querySelector('meta[name="user-login"]')?.content;if(e)return e;let n=(0,a.y)();return`anonymous-${n}`}()||void 0,actorId:document.head?.querySelector('meta[name="octolytics-actor-id"]')?.content,bundler:s.v,ui:!!document.querySelector('meta[name="ui"]'),release:document.head?.querySelector('meta[name="release"]')?.content,pastRequestIds:(0,m.xA)()},t)}let R=/(chrome|moz|safari)-extension:\/\//,S=!1;c.cg?.addEventListener("pageshow",()=>S=!1),c.cg?.addEventListener("pagehide",()=>S=!0),"function"==typeof BroadcastChannel&&new BroadcastChannel("shared-worker-error").addEventListener("message",e=>{h(e.data.error)});let w=["Object Not Found Matching Id","Not implemented on this platform","provider because it's not your default extension"],K=[["react-app","app-name"],["react-partial","partial-name"]]},27851:(e,n,t)=>{t.d(n,{G7:()=>s,XY:()=>c,fQ:()=>o});var a=t(5225),l=t(7799);function r(){return new Set((0,l._$)().featureFlags)}let i=t(96679).X3||function(){try{return process?.env?.STORYBOOK==="true"}catch{return!1}}()?r:(0,a.A)(r);function o(){return Array.from(i())}function s(e){return i().has(e)}let c={isFeatureEnabled:s}},19439:(e,n,t)=>{t.d(n,{t:()=>a});let a={addOrRemoveReaction:"Add or remove reactions",reactionsUnavailable:"Reactions are currently unavailable",copilotDisplayName:"Copilot"}},64334:(e,n,t)=>{t.d(n,{JQ:()=>r,Js:()=>l,fj:()=>i,qG:()=>a});let a={CONFUSED:"\u{1F615}",EYES:"\u{1F440}",HEART:"\u2764\uFE0F",HOORAY:"\u{1F389}",LAUGH:"\u{1F604}",THUMBS_DOWN:"\u{1F44E}",THUMBS_UP:"\u{1F44D}",ROCKET:"\u{1F680}"};function l(e,n){if(0===e.length||0===n)return"";let t=e.slice(0);if(1===t.length)return t[0];if(2===t.length)return t.join(" and ");n>e.length&&t.push(`${n-e.length} more`);let a=t.pop();return t.push(`${t.pop()} and ${a}`),t.join(", ")}function r(e,n){return`${n?"Unreact":"React"} with ${a[e]}`}function i(e,n){return`${a[e]} ${n} reaction${1===n?"":"s"}`}},62053:(e,n,t)=>{t.d(n,{Ex:()=>i,kt:()=>s,xA:()=>o});var a=t(96679);let l=Array(10).fill(null),r=0;function i(e){l[r]=e,r=(r+1)%10}function o(){let e=[];for(let n=0;n<10;n++){let t=l[(r-1-n+10)%10];t&&e.push(t)}return e}function s(){let e=a.XC;if(!e)return;let n=e.querySelector('meta[name="request-id"]'),t=n?.getAttribute("content");t&&i(t)}},43827:(e,n,t)=>{t.d(n,{k:()=>i,v:()=>o});var a=t(5225),l=t(96679);let r=(0,a.A)(function(){return l.XC?.head?.querySelector('meta[name="runtime-environment"]')?.content||""}),i=(0,a.A)(function(){return"enterprise"===r()}),o="webpack"},85351:(e,n,t)=>{t.d(n,{A:()=>i,D:()=>o});var a=t(96679),l=t(7479);let r=class NoOpStorage{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}};function i(e,n={throwQuotaErrorsOnSet:!1},t=a.cg,o=e=>e,s=e=>e){let c;try{if(!t)throw Error();c=t[e]||new r}catch{c=new r}let{throwQuotaErrorsOnSet:u}=n;function d(e){n.sendCacheStats&&(0,l.i)({incrementKey:e})}function m(e){try{if(c.removeItem(e),n.ttl){let n=`${e}:expiry`;c.removeItem(n)}}catch{}}return{getItem:function(e,n=Date.now()){try{let t=c.getItem(e);if(!t)return null;let a=`${e}:expiry`,l=Number(c.getItem(a));if(l&&n>l)return m(e),m(a),d("SAFE_STORAGE_VALUE_EXPIRED"),null;return d("SAFE_STORAGE_VALUE_WITHIN_TTL"),o(t)}catch{return null}},setItem:function(e,t,a=Date.now()){try{if(c.setItem(e,s(t)),n.ttl){let t=`${e}:expiry`,l=a+n.ttl;c.setItem(t,l.toString())}}catch(e){if(u&&e instanceof Error&&e.message.toLowerCase().includes("quota"))throw e}},removeItem:m,clear:c.clear,getKeys:function(){return Object.keys(c)},get length(){return c.length}}}function o(e){return i(e,{throwQuotaErrorsOnSet:!1},a.cg,JSON.parse,JSON.stringify)}},24852:(e,n,t)=>{t.d(n,{Ai:()=>r,Gq:()=>a,SO:()=>l});let{getItem:a,setItem:l,removeItem:r}=(0,t(85351).A)("sessionStorage")},78284:(e,n,t)=>{t.d(n,{BW:()=>l,Ff:()=>p,HK:()=>b,JA:()=>F,LM:()=>y,Pv:()=>S,Vy:()=>m,ZW:()=>R,dR:()=>v,di:()=>g,fX:()=>w,gc:()=>K,k9:()=>h,my:()=>k,r7:()=>_,wG:()=>f,xT:()=>d});var a=t(24852);let l="reload",r="soft-nav:fail",i="soft-nav:fail-referrer",o="soft-nav:referrer",s="soft-nav:marker",c="soft-nav:react-app-name",u="soft-nav:latest-mechanism";function d(){(0,a.SO)(s,"0"),(0,a.Ai)(o),(0,a.Ai)(r),(0,a.Ai)(i),(0,a.Ai)(c),(0,a.Ai)(u)}function m(e){(0,a.SO)(s,e)}function p(){(0,a.SO)(s,"0")}function y(){let e=(0,a.Gq)(s);return e&&"0"!==e}function g(){return(0,a.Gq)(s)}function f(){return!!k()}function k(){return(0,a.Gq)(r)}function h(e){(0,a.SO)(r,e||l),(0,a.SO)(i,window.location.href)}function b(){(0,a.SO)(o,window.location.href)}function v(){return(0,a.Gq)(o)||document.referrer}function R(){let e=w();e?(0,a.SO)(c,e):(0,a.Ai)(c)}function S(){return(0,a.Gq)(c)}function w(){return document.querySelector('react-partial[partial-name="repos-overview"]')?"repos-overview":document.querySelector("react-app")?.getAttribute("app-name")}function K(){return!!document.querySelector("react-app")?.getAttribute("app-name")}function F(e){(0,a.SO)(u,e)}function _(){return(0,a.Gq)(u)}},96679:(e,n,t)=>{t.d(n,{KJ:()=>a.KJ,Kn:()=>l.Kn,X3:()=>a.X3,XC:()=>l.XC,cg:()=>l.cg,fV:()=>l.fV,g5:()=>a.g5});var a=t(28583),l=t(46570)},46570:(e,n,t)=>{t.d(n,{Kn:()=>i,XC:()=>l,cg:()=>r,fV:()=>o});let a="undefined"!=typeof FORCE_SERVER_ENV&&FORCE_SERVER_ENV,l="undefined"==typeof document||a?void 0:document,r="undefined"==typeof window||a?void 0:window,i="undefined"==typeof history||a?void 0:history,o="undefined"==typeof location||a?{pathname:"",origin:"",search:"",hash:"",href:""}:location},28583:(e,n,t)=>{t.d(n,{KJ:()=>r,X3:()=>l,g5:()=>i});var a=t(46570);let l=void 0===a.XC,r=!l;function i(){return!!l||!a.XC||!!(a.XC.querySelector('react-app[data-ssr="true"]')||a.XC.querySelector('react-partial[data-ssr="true"][partial-name="repos-overview"]'))}},7479:(e,n,t)=>{t.d(n,{X:()=>y,i:()=>u});var a=t(96679),l=t(32475),r=t(43827),i=t(27851),o=t(7799),s=t(70170);let c=[];function u(e,n=!1,t=.5){if(!a.X3&&!0!==(0,i.G7)("browser_stats_disabled")){if(t<0||t>1)throw RangeError("Sampling probability must be between 0 and 1");void 0===e.timestamp&&(e.timestamp=Date.now()),e.loggedIn=(0,o.M3)(),e.staff=y(),e.bundler=r.v,Math.random()<t&&c.push(e),n?p():m()}}let d=null,m=(0,s.n)(async function(){await l.K,null==d&&(d=window.requestIdleCallback(p))},5e3);function p(){if(d=null,!c.length)return;let e=a.XC?.head?.querySelector('meta[name="browser-stats-url"]')?.content;if(e){for(let l of function(e){let n=[],t=e.map(e=>JSON.stringify(e));for(;t.length>0;)n.push(function(e){let n=e.shift(),t=[n],a=n.length;for(;e.length>0&&a<=65536;){let n=e[0].length;if(a+n<=65536){let l=e.shift();t.push(l),a+=n}else break}return t}(t));return n}(c)){var n=e,t=`{"stats": [${l.join(",")}], "target": "${a.XC?.head?.querySelector('meta[name="ui-target"]')?.content||"full"}"}`;try{navigator.sendBeacon&&navigator.sendBeacon(n,t)}catch{}}c=[]}}function y(){return!!a.XC?.head?.querySelector('meta[name="user-staff"]')?.content}a.XC?.addEventListener("pagehide",p),a.XC?.addEventListener("visibilitychange",p)},17523:(e,n,t)=>{t.d(n,{P:()=>h});var a=t(74848),l=t(69676),r=t(82678),i=t(3971),o=t(15385),s=t(96540),c=t(18828),u=t(55847),d=t(34164),m=t(64334);let p={reactionToggleButton:"ReactionButton-module__reactionToggleButton--OU9du",reactionToggleButtonReacted:"ReactionButton-module__reactionToggleButtonReacted--aVmWz"};function y({reactionGroup:e,disabled:n,onReact:t}){let{content:l,viewerHasReacted:r}=e.reaction,{reactors:i,totalCount:o}=e,y=(0,s.useId)();if(0===o)return null;let g=i.flatMap(e=>"Other"!==e.typeName?[e.login]:[]),f=(0,m.JQ)(l,r),k=(0,m.fj)(l,o);return(0,a.jsx)(c.m,{text:(0,m.Js)(g,o),type:"description",direction:"ne",children:(0,a.jsxs)(u.Q,{size:"small","aria-label":k,role:"switch","aria-checked":r,leadingVisual:()=>(0,a.jsx)(a.Fragment,{children:m.qG[l]}),onClick:()=>t(l,r),disabled:n,className:(0,d.$)(p.reactionToggleButton,r&&p.reactionToggleButtonReacted),"aria-describedby":y,children:[(0,a.jsx)("span",{className:"sr-only",id:y,children:f}),o]})})}try{y.displayName||(y.displayName="ReactionButton")}catch{}let g={ReactionsMenuOption:"ReactionsMenuItem-module__ReactionsMenuOption--kXQH6"};function f({onReact:e,reaction:n}){let{content:t,viewerHasReacted:l}=n;return(0,a.jsx)(o.l.Item,{sx:{"&:hover":{backgroundColor:"accent.emphasis"},backgroundColor:l?"accent.subtle":"transparent"},role:"menuitemcheckbox","aria-checked":l,onSelect:()=>e(t,l),className:g.ReactionsMenuOption,children:m.qG[t]},t)}try{f.displayName||(f.displayName="ReactionsMenuItem")}catch{}var k=t(38184);function h({reactionGroups:e,canReact:n=!0,onReact:t}){let[c,u]=(0,s.useState)(!1),d=e.length>0,{containerRef:m}=(0,r.G)({bindKeys:l.z0.HomeAndEnd|l.z0.ArrowHorizontal,focusOutBehavior:"wrap"});return(0,a.jsxs)("div",{role:"toolbar","aria-label":"Reactions",ref:m,className:"d-flex gap-1 flex-wrap",children:[n&&(0,a.jsx)(i.T,{open:c,onOpen:()=>u(d),onClose:()=>u(!1),anchorRef:m,focusZoneSettings:{bindKeys:l.z0.ArrowAll|l.z0.HomeAndEnd,focusOutBehavior:"wrap"},renderAnchor:e=>(0,a.jsx)(k.N,{renderAnchorProps:e,reactionsAvailable:d}),children:(0,a.jsx)(o.l,{className:"d-flex flex-row p-1 gap-1",role:"menu","aria-orientation":"horizontal",children:(e||[]).map((e,n)=>(0,a.jsx)(f,{reaction:e.reaction,onReact:(e,n)=>{t(e,n),u(!1)}},n))})}),(e||[]).map((e,n)=>(0,a.jsx)(y,{reactionGroup:e,onReact:(e,n)=>t(e,n)},n))]})}try{h.displayName||(h.displayName="ReactionViewerBase")}catch{}},12617:(e,n,t)=>{t.r(n),t.d(n,{ReactionViewerRelay:()=>m,ReactionViewerRelayQueryComponent:()=>p,default:()=>y});var a=t(74848);let l=function(){var e={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},n=[e];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ReactionViewerRelayGroups",selections:[{alias:null,args:null,concreteType:"ReactionGroup",kind:"LinkedField",name:"reactionGroups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerHasReacted",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"ReactorConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:n,type:"User",abstractKey:null},{kind:"InlineFragment",selections:[e,{alias:null,args:null,kind:"ScalarField",name:"isCopilot",storageKey:null}],type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:n,type:"Organization",abstractKey:null},{kind:"InlineFragment",selections:n,type:"Mannequin",abstractKey:null}],storageKey:null}],storageKey:"reactors(first:5)"}],storageKey:null}],type:"Reactable",abstractKey:"__isReactable"}}();l.hash="4957e34582c8895c7e94b4dc9fa57fc9";let r=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"id"}],n=[{kind:"Variable",name:"id",variableName:"id"}],t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},l=[a],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ReactionViewerRelayLazyQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"ReactionViewerRelayGroups"}],type:"Comment",abstractKey:"__isComment"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ReactionViewerRelayLazyQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[t,{kind:"InlineFragment",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ReactionGroup",kind:"LinkedField",name:"reactionGroups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerHasReacted",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"ReactorConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[t,{kind:"InlineFragment",selections:l,type:"User",abstractKey:null},{kind:"InlineFragment",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"isCopilot",storageKey:null}],type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:l,type:"Organization",abstractKey:null},{kind:"InlineFragment",selections:l,type:"Mannequin",abstractKey:null},{kind:"InlineFragment",selections:[r],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:"reactors(first:5)"}],storageKey:null}],type:"Reactable",abstractKey:"__isReactable"}],type:"Comment",abstractKey:"__isComment"},r],storageKey:null}]},params:{id:"4ad1541bb8051d5b7a55a10bbdf54731",metadata:{},name:"ReactionViewerRelayLazyQuery",operationKind:"query",text:null}}}();r.hash="37ec1495c4c7ace448e859305895ad0e";var i=t(96540),o=t(18312),s=t(19439);let c=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},l=[a],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"addReactionMutation",selections:[{alias:null,args:n,concreteType:"AddReactionPayload",kind:"LinkedField",name:"addReaction",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"subject",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ReactionViewerRelayGroups"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"addReactionMutation",selections:[{alias:null,args:n,concreteType:"AddReactionPayload",kind:"LinkedField",name:"addReaction",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"subject",plural:!1,selections:[t,{kind:"TypeDiscriminator",abstractKey:"__isReactable"},{alias:null,args:null,concreteType:"ReactionGroup",kind:"LinkedField",name:"reactionGroups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerHasReacted",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"ReactorConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[t,{kind:"InlineFragment",selections:l,type:"User",abstractKey:null},{kind:"InlineFragment",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"isCopilot",storageKey:null}],type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:l,type:"Organization",abstractKey:null},{kind:"InlineFragment",selections:l,type:"Mannequin",abstractKey:null},{kind:"InlineFragment",selections:[r],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:"reactors(first:5)"}],storageKey:null},r],storageKey:null}],storageKey:null}]},params:{id:"c925c985a3bde5cd71f1859404c89567",metadata:{},name:"addReactionMutation",operationKind:"mutation",text:null}}}();c.hash="504ef43df20e9ee96a023f421682e18d";let u=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],n=[{kind:"Variable",name:"input",variableName:"input"}],t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},l=[a],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"removeReactionMutation",selections:[{alias:null,args:n,concreteType:"RemoveReactionPayload",kind:"LinkedField",name:"removeReaction",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"subject",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ReactionViewerRelayGroups"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"removeReactionMutation",selections:[{alias:null,args:n,concreteType:"RemoveReactionPayload",kind:"LinkedField",name:"removeReaction",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"subject",plural:!1,selections:[t,{kind:"TypeDiscriminator",abstractKey:"__isReactable"},{alias:null,args:null,concreteType:"ReactionGroup",kind:"LinkedField",name:"reactionGroups",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewerHasReacted",storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:5}],concreteType:"ReactorConnection",kind:"LinkedField",name:"reactors",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"nodes",plural:!0,selections:[t,{kind:"InlineFragment",selections:l,type:"User",abstractKey:null},{kind:"InlineFragment",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"isCopilot",storageKey:null}],type:"Bot",abstractKey:null},{kind:"InlineFragment",selections:l,type:"Organization",abstractKey:null},{kind:"InlineFragment",selections:l,type:"Mannequin",abstractKey:null},{kind:"InlineFragment",selections:[r],type:"Node",abstractKey:"__isNode"}],storageKey:null}],storageKey:"reactors(first:5)"}],storageKey:null},r],storageKey:null}],storageKey:null}]},params:{id:"fd20390882af8180d05f0d4a921c00d9",metadata:{},name:"removeReactionMutation",operationKind:"mutation",text:null}}}();u.hash="8e28d0138da52c07bb0e64eda432f580";var d=t(17523);function m({reactionGroups:e,subjectId:n,canReact:t=!0}){let r=(0,o.useRelayEnvironment)(),m=(0,o.useFragment)(l,e),p=(0,i.useCallback)((e,a)=>{t&&(a?function({environment:e,input:{subject:n,content:t},onError:a,onCompleted:l}){(0,o.commitMutation)(e,{mutation:u,variables:{input:{subjectId:n,content:t}},optimisticUpdater:e=>{let a=e.get(n);if(!a)return;let l=a.getLinkedRecords("reactionGroups");if(!l)return;let r=l.findIndex(e=>e.getValue("content")===t),i=l[r];if(i){i.setValue(!1,"viewerHasReacted");let t=`client:${n}:reactionGroups:${r}:reactors(first:5)`,a=e.get(t);if(a){let e=a.getValue("totalCount");a.setValue(e&&e>0?e-1:0,"totalCount")}}},onError:e=>a&&a(e),onCompleted:e=>l&&l(e)})}({environment:r,input:{subject:n,content:e}}):function({environment:e,input:{subject:n,content:t},onError:a,onCompleted:l}){(0,o.commitMutation)(e,{mutation:c,variables:{input:{subjectId:n,content:t}},optimisticUpdater:e=>{let a=e.get(n);if(!a)return;let l=a.getLinkedRecords("reactionGroups");if(!l)return;let r=l.findIndex(e=>e.getValue("content")===t),i=l[r];if(i){i.setValue(!0,"viewerHasReacted");let t=`client:${n}:reactionGroups:${r}:reactors(first:5)`,a=e.get(t);if(a){let e=a.getValue("totalCount");a.setValue(e?e+1:1,"totalCount")}}},onError:e=>a&&a(e),onCompleted:e=>l&&l(e)})}({environment:r,input:{subject:n,content:e}}))},[t,r,n]),y=(m.reactionGroups||[]).filter(e=>!!e).map(e=>({reaction:{content:e.content,viewerHasReacted:e.viewerHasReacted},reactors:e.reactors?.nodes?.map(e=>e&&"%other"!==e.__typename?{login:"Bot"===e.__typename&&e.isCopilot?s.t.copilotDisplayName:e.login,typeName:e.__typename}:{login:"",typeName:"Other"})||[],totalCount:e.reactors?.totalCount||0}));return(0,a.jsx)(d.P,{reactionGroups:y,canReact:t,subjectId:n,onReact:p})}function p({id:e,subjectLocked:n}){let t=(0,o.useLazyLoadQuery)(r,{id:e},{fetchPolicy:"store-or-network"});return t.node?(0,a.jsx)(m,{subjectId:e,reactionGroups:t.node,canReact:!n}):null}let y=m;try{m.displayName||(m.displayName="ReactionViewerRelay")}catch{}try{p.displayName||(p.displayName="ReactionViewerRelayQueryComponent")}catch{}},38184:(e,n,t)=>{t.d(n,{N:()=>c});var a=t(74848),l=t(38621),r=t(87330),i=t(94977),o=t(19439);let s={ReactionViewerAnchorButton:"ReactionViewerAnchor-module__ReactionViewerAnchorButton--eUz9J"};function c({renderAnchorProps:e,reactionsAvailable:n}){let t=(0,a.jsx)(u,{renderAnchorProps:e,reactionsAvailable:n});return n?t:(0,a.jsx)(i.A,{"aria-label":o.t.reactionsUnavailable,children:t})}let u=({renderAnchorProps:e,reactionsAvailable:n})=>(0,a.jsx)(r.K,{unsafeDisableTooltip:!0,size:"small",icon:l.SmileyIcon,...e,"aria-label":o.t.addOrRemoveReaction,inactive:!n,"aria-labelledby":void 0,className:s.ReactionViewerAnchorButton});try{c.displayName||(c.displayName="ReactionViewerAnchor")}catch{}try{u.displayName||(u.displayName="BaseIcon")}catch{}}}]);
//# sourceMappingURL=ui_packages_app-uuid_app-uuid_ts-ui_packages_failbot_failbot_ts-ui_packages_reaction-viewer_R-a1391b-7ad79e971324.js.map