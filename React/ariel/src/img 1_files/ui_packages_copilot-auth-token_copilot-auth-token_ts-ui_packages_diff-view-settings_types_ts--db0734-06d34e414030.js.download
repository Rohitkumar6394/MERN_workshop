"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_copilot-auth-token_copilot-auth-token_ts-ui_packages_diff-view-settings_types_ts--db0734"],{92520:(e,t,r)=>{r.d(t,{Y:()=>AuthToken});var n=r(50467);let AuthToken=class AuthToken{get authorizationHeaderValue(){return`GitHub-Bearer ${this.value}`}needsRefreshing(e){return this.isExpired||this.ssoChanged(e)}get isExpired(){let e=new Date(this.expiration);return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()))<new Date(Date.now()+15e3)}ssoChanged(e){return!(this.ssoOrgIDs.every(t=>e.includes(t))&&e.every(e=>this.ssoOrgIDs.includes(e)))}static fromResult(e,t){return new AuthToken(e.token,e.expiration,t)}serialize(){return{value:this.value,expiration:this.expiration,ssoOrgIDs:this.ssoOrgIDs}}static deserialize(e){return new AuthToken(e.value,e.expiration,e.ssoOrgIDs)}constructor(e,t,r){(0,n._)(this,"value",void 0),(0,n._)(this,"expiration",void 0),(0,n._)(this,"ssoOrgIDs",void 0),this.value=e,this.expiration=t,this.ssoOrgIDs=r}}},879:(e,t,r)=>{r.d(t,{J:()=>CopilotAuthTokenProvider});var n=r(50467),i=r(92520),a=r(85351),o=r(60039);let CopilotAuthTokenProvider=class CopilotAuthTokenProvider{async getAuthToken(){let e=this.getLocalStorageAuthToken();return e?this.validateAuthToken(e):this.fetchAuthToken()}setLocalStorageAuthToken(e){this.copilotLocalStorage.setItem(this.storageKey,JSON.stringify(e.serialize()))}getLocalStorageAuthToken(){let e=this.copilotLocalStorage.getItem(this.storageKey);return e?i.Y.deserialize(JSON.parse(e)):null}removeLocalStorageAuthToken(){this.copilotLocalStorage.removeItem(this.storageKey)}async validateAuthToken(e){return e.needsRefreshing(this.ssoOrgIDs)?this.fetchAuthToken():e}fetchAuthToken(){return this.currentAuthTokenRequest||(this.currentAuthTokenRequest=this._fetchAuthToken()),this.currentAuthTokenRequest}async _fetchAuthToken(){let e=await (0,o.lS)(this.tokenEndpoint,{method:"POST"});if(e.ok){let t=await e.json();this.currentAuthTokenRequest=null;let r=i.Y.fromResult(t,this.ssoOrgIDs);return this.setLocalStorageAuthToken(r),r}throw this.currentAuthTokenRequest=null,Error("Failed to mint new auth token")}constructor(e,t="/github-copilot/chat/token",r="COPILOT_AUTH_TOKEN"){(0,n._)(this,"tokenEndpoint",void 0),(0,n._)(this,"storageKey",void 0),(0,n._)(this,"ssoOrgIDs",void 0),(0,n._)(this,"currentAuthTokenRequest",void 0),(0,n._)(this,"copilotLocalStorage",void 0),this.ssoOrgIDs=e,this.currentAuthTokenRequest=null,this.copilotLocalStorage=(0,a.A)("localStorage",{throwQuotaErrorsOnSet:!1,ttl:864e5}),this.storageKey=r,this.tokenEndpoint=t}}},29943:(e,t,r)=>{r.d(t,{HS:()=>o,Oc:()=>a,Tv:()=>c,Xr:()=>SymbolChangedEvent,f7:()=>l,fD:()=>s,qR:()=>i});var n=r(50467);let OpenCopilotChatEvent=class OpenCopilotChatEvent extends Event{constructor(e){super("open-copilot-chat",{bubbles:!1,cancelable:!0}),(0,n._)(this,"payload",void 0),this.payload=e}};Event;let AddCopilotChatReferenceEvent=class AddCopilotChatReferenceEvent extends Event{constructor(e,t=!1,r){super("add-copilot-chat-reference",{bubbles:!1,cancelable:!0}),(0,n._)(this,"reference",void 0),(0,n._)(this,"openPanel",void 0),(0,n._)(this,"id",void 0),this.reference=e,this.openPanel=t,this.id=r}};let SymbolChangedEvent=class SymbolChangedEvent extends Event{constructor(e){super("symbol-changed",{bubbles:!1,cancelable:!0}),(0,n._)(this,"context",void 0),this.context=e}};function i(e){window.dispatchEvent(new OpenCopilotChatEvent(e))}function a(e,t=!1,r){window.dispatchEvent(new AddCopilotChatReferenceEvent(e,t,r))}function o(e){return window.addEventListener("open-copilot-chat",e),()=>{window.removeEventListener("open-copilot-chat",e)}}function l(e){return window.addEventListener("add-copilot-chat-reference",e),()=>{window.removeEventListener("add-copilot-chat-reference",e)}}function s(e){return window.addEventListener("search-copilot-chat",e),()=>{window.removeEventListener("search-copilot-chat",e)}}function c(e){return window.addEventListener("symbol-changed",e),()=>{window.removeEventListener("symbol-changed",e)}}},39419:(e,t,r)=>{r.d(t,{sI:()=>n});let n={Visible:"visible",Collapsed:"collapsed"}},84483:(e,t,r)=>{r.d(t,{Dd:()=>d,EW:()=>a,N0:()=>u,ZD:()=>h,i8:()=>m,j$:()=>p,jU:()=>c,o9:()=>f,pd:()=>l,yI:()=>s});var n=r(66871),i=r(96679);function a(e){let t=e.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(null!=t&&6===t.length)return t;let r=e.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return null!=r&&6===r.length?r:null}function o(e,t){return`${"left"===t?"L":"R"}${e}`}function l(e){let t=e.match(/^#?(diff-[a-f0-9]+)/);return t?.[1]}function s(e){return!!(a(e)||a(`diff-${e}`))&&(e.includes("R")||e.includes("L"))}function c(e){if(!(l(e)||l(`diff-${e}`)))return;let t=e.replace("#","").replace("diff-","");return t.includes("-")&&(t=t.split("-")[0]??""),t.includes("L")&&(t=t.split("L")[0]??""),t.includes("R")&&(t=t.split("R")[0]??""),t}function d(e){let t=e.match(/^#?(r\d+)/),r=t?.[1];return r?parseInt(r.slice(1)):void 0}function u(e){let t=e.match(/^#annotation_(\d+)/),r=t?.[1];return r?parseInt(r):void 0}function h(e){let t=a(e);if(t){let e=t[1],r=t[2]?"L"===t[2]?"left":"right":void 0,n=t[3]?parseInt(t[3]):void 0;if(!e||!r||void 0===n)return;return{diffAnchor:e,startOrientation:r,startLineNumber:n,endOrientation:(t[4]?"L"===t[4]?"left":"right":void 0)??r,endLineNumber:(t[5]?parseInt(t[5]):void 0)??n,firstSelectedLineNumber:n,firstSelectedOrientation:r}}}function m(e){!function(e){let t=`#${e}`;if(t===window.location.hash)return;let r=window.location.href;(0,n.Zu)(t),window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:window.location.href,oldURL:r}))}(p(e))}function p(e){let t=o(e.startLineNumber,e.startOrientation),r=`${e.diffAnchor}${t}`;if(e.endLineNumber!==e.startLineNumber||e.endOrientation!==e.startOrientation){let t=o(e.endLineNumber,e.endOrientation);r+=`-${t}`}return r}function f(){let e=a(i.fV.hash??"")??"";return(""===e?l(i.fV.hash??"")??"":e?.[0]??"").replace("#","").replace("diff-","")}},61407:(e,t,r)=>{r.d(t,{t:()=>i});var n=r(79607);let i=({items:e,filter:t,key:r,secondaryKey:i})=>{let a=e.map(e=>[(0,n.dt)(t,r(e)),e]);return i&&(a=a.map(([e,r])=>[Math.max(e,(0,n.dt)(t,i(r))),r])),a.filter(([e])=>e>n.IP).sort(([e,t],[n,i])=>n===e?r(t).localeCompare(r(i)):n-e).map(([,e])=>e)}},83829:(e,t,r)=>{r.d(t,{A0:()=>o,TA:()=>c,Y:()=>d,_n:()=>u,rE:()=>l,t6:()=>s});let n=/[\u202A-\u202E]|[\u2066-\u2069]|\u{E0001}|\u{E007F}/u,i=/[\u202A-\u202E]|[\u2066-\u2069]|\u{E0001}|\u{E007F}/gu,a=/([\u202A-\u202E]|[\u2066-\u2069]|\u{E0001}|\u{E007F})/gu,o=new Map(Object.entries({"\u202A":"U+202A","\u202B":"U+202B","\u202C":"U+202C","\u202D":"U+202D","\u202E":"U+202E","\u2066":"U+2066","\u2067":"U+2067","\u2068":"U+2068","\u2069":"U+2069","\u{E0001}":"U+E0001","\u{E007F}":"U+E007F"}));function l(e){return`<span class="hidden-unicode-replacement" data-code-text="${e}"></span>`}function s(e){return e.split(a)}function c(e){return d(e)?e.replaceAll(i,e=>o.get(e)??""):e}function d(e){return n.test(e)}function u(e){return o.get(e)}},23812:(e,t,r)=>{r.d(t,{D6:()=>u,Fo:()=>c,MV:()=>h,zB:()=>m});var n=r(50467),i=r(85351),a=r(96540);let o=(0,i.A)("sessionStorage"),l="session-storage-update",s=class UseSessionStorageUpdateEvent extends Event{constructor(e,t){super(l),(0,n._)(this,"storageKey",void 0),(0,n._)(this,"storageValue",void 0),this.storageKey=e,this.storageValue=t}};function c(e,t){let r=(0,a.useRef)(t);(0,a.useEffect)(()=>{r.current=t});let[n,i]=(0,a.useState)(()=>{let t=o.getItem(e);return t?JSON.parse(t):r.current}),c=(0,a.useCallback)(t=>{i(void 0!==t?t:r.current),void 0===t?o.removeItem(e):o.setItem(e,JSON.stringify(t)),document.dispatchEvent(new s(e,t))},[e]),d=(0,a.useCallback)(e=>{r.current=e},[r]);return(0,a.useEffect)(()=>{function t(t){if(t.storageKey===e){let e=t.storageValue;i(void 0!==e?e:r.current)}}document.addEventListener(l,t);let n=o.getItem(e);return n?i(JSON.parse(n)):i(r.current),()=>{document.removeEventListener(l,t)}},[e]),[n,c,d]}function d(e){let t=o.getKeys(),r=[];for(let n in t)t[n]?.startsWith(e)&&r.push(t[n]);return r}function u(e){for(let t of e)o.removeItem(t),document.dispatchEvent(new s(t,void 0))}function h(e){let t=[];for(let r of d(e)){let e=o.getItem(r);null!=e&&t.push(JSON.parse(e))}return t}function m(e){u(d(e))}},63236:(e,t,r)=>{r.d(t,{z:()=>o});var n=r(74848),i=r(96540);let a={CompactCommentInputContainer:"CompactCommentButton-module__CompactCommentInputContainer--WNtZq"},o=(0,i.forwardRef)(({onClick:e,id:t,children:r},i)=>(0,n.jsx)("button",{type:"button",id:t,ref:i,onClick:e,className:a.CompactCommentInputContainer,children:r}));o.displayName="CompactCommentButton"},94800:(e,t,r)=>{r.d(t,{w:()=>u});var n=r(74848),i=r(38621),a=r(10569),o=r(15385),l=r(96540),s=r(6698),c=r(64979),d=r(10048);let u=({fileDiffReference:e,selectedRange:t,showDivider:r})=>{let u=(0,l.useMemo)(()=>{let r={...e};return t&&(r.selectedRange={start:`${t?.startOrientation[0]?.toUpperCase()??""}${t?.startLineNumber}`,end:`${t?.endOrientation[0]?.toUpperCase()??""}${t?.endLineNumber}`}),r},[e,t]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.W,{children:[(0,n.jsx)(a.W.Anchor,{children:(0,n.jsxs)(o.l.Item,{children:[(0,n.jsx)(o.l.LeadingVisual,{children:(0,n.jsx)(i.CopilotIcon,{})}),"Copilot"]})}),(0,n.jsx)(a.W.Overlay,{children:(0,n.jsxs)(o.l,{children:[(0,n.jsx)(c.t,{fileDiffReference:u,eventContext:{prx:!0}}),(0,n.jsx)(d.e,{fileDiffReference:u,eventContext:{prx:!0}}),(0,n.jsx)(s.i,{fileDiffReference:u,eventContext:{prx:!0}})]})})]}),r&&(0,n.jsx)(o.l.Divider,{})]})};try{u.displayName||(u.displayName="CopilotDiffChatContextMenu")}catch{}},6698:(e,t,r)=>{r.d(t,{i:()=>s});var n=r(74848),i=r(29943),a=r(38007),o=r(99543),l=r(15385);let s=({fileDiffReference:e,eventContext:t,afterSelect:r})=>{let{addToast:s}=(0,o.Y6)();return(0,n.jsx)(l.l.Item,{onSelect:()=>{(0,i.Oc)(e),s({message:"Reference added to thread",type:"success"}),(0,a.BI)("copilot.file-diff.add",t),r?.()},children:"Attach to current thread"})};try{s.displayName||(s.displayName="DiffLinesAttachMenuItem")}catch{}},64979:(e,t,r)=>{r.d(t,{t:()=>s});var n=r(74848),i=r(29943),a=r(99377),o=r(38007),l=r(15385);let s=({fileDiffReference:e,leadingVisual:t,eventContext:r,afterSelect:s})=>(0,n.jsxs)(l.l.Item,{onSelect:()=>{(0,i.qR)({intent:a.wh.conversation,references:[e]}),(0,o.BI)("copilot.file-diff.discuss",r),s?.()},children:[t&&(0,n.jsx)(l.l.LeadingVisual,{children:t}),"Ask about this diff"]});try{s.displayName||(s.displayName="DiffLinesDiscussMenuItem")}catch{}},10048:(e,t,r)=>{r.d(t,{e:()=>s});var n=r(74848),i=r(29943),a=r(99377),o=r(38007),l=r(15385);let s=({fileDiffReference:e,eventContext:t,afterSelect:r})=>(0,n.jsx)(l.l.Item,{onSelect:()=>{(0,i.qR)({content:"Explain",intent:a.wh.explainFileDiff,references:[e]}),(0,o.BI)("copilot.file-diff.explain",t),r?.()},children:"Explain"});try{s.displayName||(s.displayName="DiffLinesExplainMenuItem")}catch{}},17723:(e,t,r)=>{r.d(t,{Z:()=>E});var n=r(74848),i=r(21728),a=r(70179),o=r(96679),l=r(96540),s=r(38621),c=r(87330),d=r(9852),u=r(19797),h=r(73451),m=r(19647),p=r(55847),f=r(65607);let g=[{label:"Comment is harmful or unsafe",value:"OFFENSIVE_OR_DISCRIMINATORY"},{label:"Comment is poorly formatted",value:"POORLY_FORMATTED"},{label:"Comment is not true",value:"INCORRECT"},{label:"Comment is not helpful",value:"UNHELPFUL"},{label:"Comment is attached to the wrong line(s)",value:"INCORRECT_LINE"},{label:"Code suggestion is harmful or unsafe",value:"SUGGESTION_OFFENSIVE_OR_DISCRIMINATORY"},{label:"Code suggestion is poorly formatted",value:"SUGGESTION_POORLY_FORMATTED"},{label:"Code suggestion does not solve the problem in the comment",value:"SUGGESTION_UNHELPFUL"},{label:"Code suggestion is invalid",value:"SUGGESTION_INVALID"}],v=e=>{let t,r,a,o,s=(0,i.c)(16),{commentId:c,onClose:f,onSubmit:v,feedbackOptions:y,returnFocusRef:x}=e,R=void 0===y?g:y,[w,E]=(0,l.useState)(!1);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],s[0]=t):t=s[0];let[N,_]=(0,l.useState)(t),[C,A]=(0,l.useState)("");s[1]!==c||s[2]!==N||s[3]!==v||s[4]!==C?(r=e=>{e.preventDefault(),E(!0),N.length&&v({commentId:c,type:"NEGATIVE",feedbackChoice:N,textResponse:C})},s[1]=c,s[2]=N,s[3]=v,s[4]=C,s[5]=r):r=s[5];let I=r;return s[6]!==w||s[7]!==N||s[8]!==R||s[9]!==I||s[10]!==C?(a=()=>(0,n.jsxs)("form",{onSubmit:I,children:[(0,n.jsxs)(d.l.Body,{children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsxs)(u.A,{onChange:_,required:!0,children:[(0,n.jsx)(u.A.Label,{children:"Category"}),R.map(b),w&&!N&&(0,n.jsx)(u.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,n.jsxs)(h.A,{id:"text_response",children:[(0,n.jsx)(h.A.Label,{children:"How should we improve this response?"}),(0,n.jsx)(m.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:C,resize:"vertical",onChange:e=>A(e.currentTarget.value)})]})]}),(0,n.jsx)(d.l.Footer,{children:(0,n.jsx)(p.Q,{type:"submit",disabled:w&&(!C||!N),children:"Submit"})})]}),s[6]=w,s[7]=N,s[8]=R,s[9]=I,s[10]=C,s[11]=a):a=s[11],s[12]!==f||s[13]!==x||s[14]!==a?(o=(0,n.jsx)(d.l,{onClose:f,title:"Provide additional feedback",subtitle:"Please help us improve GitHub Copilot by sharing more details about this comment.",returnFocusRef:x,renderBody:a}),s[12]=f,s[13]=x,s[14]=a,s[15]=o):o=s[15],o};try{v.displayName||(v.displayName="NegativeFeedbackForm")}catch{}function b(e){return(0,n.jsxs)(h.A,{id:`feedback_choice_${e.value}`,children:[(0,n.jsx)(f.A,{value:e.value}),(0,n.jsx)(h.A.Label,{children:e.label})]},e.value)}let y=e=>{let t,r,a=(0,i.c)(6),{onClick:o,commentId:l,disabled:d}=e;return a[0]!==l||a[1]!==o?(t=()=>o({type:"POSITIVE",commentId:l}),a[0]=l,a[1]=o,a[2]=t):t=a[2],a[3]!==d||a[4]!==t?(r=(0,n.jsx)(c.K,{size:"small",variant:"invisible",disabled:d,icon:s.ThumbsupIcon,title:"Positive Feedback","aria-label":"Positive Feedback",onClick:t}),a[3]=d,a[4]=t,a[5]=r):r=a[5],r},x=e=>{let t,r,a,o,d,u=(0,i.c)(13),{onClick:h,commentId:m,disabled:p,feedbackOptions:f}=e,[g,b]=(0,l.useState)(!1),y=(0,l.useRef)(null);u[0]!==h?(t=e=>{h(e),b(!1)},u[0]=h,u[1]=t):t=u[1];let x=t;return u[2]!==m||u[3]!==g||u[4]!==f||u[5]!==x?(r=g&&(0,n.jsx)(v,{onClose:()=>b(!1),onSubmit:x,commentId:m,feedbackOptions:f,returnFocusRef:y}),u[2]=m,u[3]=g,u[4]=f,u[5]=x,u[6]=r):r=u[6],u[7]===Symbol.for("react.memo_cache_sentinel")?(a=()=>b(!0),u[7]=a):a=u[7],u[8]!==p?(o=(0,n.jsx)(c.K,{ref:y,size:"small",variant:"invisible",disabled:p,icon:s.ThumbsdownIcon,title:"Negative Feedback","aria-label":"Negative Feedback",onClick:a}),u[8]=p,u[9]=o):o=u[9],u[10]!==r||u[11]!==o?(d=(0,n.jsxs)(n.Fragment,{children:[r,o]}),u[10]=r,u[11]=o,u[12]=d):d=u[12],d};try{y.displayName||(y.displayName="PositiveFeedbackButton")}catch{}try{x.displayName||(x.displayName="NegativeFeedbackButton")}catch{}var R=r(60039);let w=e=>{let t,r,a,s,c,d,u=(0,i.c)(18),{commentId:h,commentUrl:m,feedbackPath:p,feedbackOptions:f,additionalParameters:g}=e,[v,b]=(0,l.useState)();e:{if(p){t=p;break e}if(m){let e=new URL(m,o.fV.origin);e.hash="",t=`${e}/code_review_feedback`;break e}throw Error("missing feedbackPath and commentUrl")}let w=t;u[0]!==g||u[1]!==w?(r={path:w,additionalParameters:g},u[0]=g,u[1]=w,u[2]=r):r=u[2];let E=(({path:e,additionalParameters:t})=>(0,l.useCallback)(({type:r,commentId:n,feedbackChoice:i,textResponse:a})=>{try{let o=new FormData;if(o.set("comment_id",n),o.set("feedback",r),t)for(let[e,r]of Object.entries(t))o.set(e,r);for(let e of i??[])o.append("feedback_choice[]",e);a&&o.set("text_response",a),(0,R.DI)(e,{method:"POST",body:o})}catch{}},[e,t]))(r);u[3]!==E?(a=e=>{b(e.type),E(e)},u[3]=E,u[4]=a):a=u[4];let N=a,_=`copilot-code-review-feedback-${h}`;return u[5]!==h||u[6]!==N||u[7]!==v?(s="NEGATIVE"!==v&&(0,n.jsx)(y,{disabled:!!v,commentId:h,onClick:N}),u[5]=h,u[6]=N,u[7]=v,u[8]=s):s=u[8],u[9]!==h||u[10]!==f||u[11]!==N||u[12]!==v?(c="POSITIVE"!==v&&(0,n.jsx)(x,{disabled:!!v,onClick:N,commentId:h,feedbackOptions:f}),u[9]=h,u[10]=f,u[11]=N,u[12]=v,u[13]=c):c=u[13],u[14]!==_||u[15]!==s||u[16]!==c?(d=(0,n.jsxs)("div",{"data-testid":_,className:"d-flex gap-1",children:[s,c]}),u[14]=_,u[15]=s,u[16]=c,u[17]=d):d=u[17],d},E=e=>{let t,r=(0,i.c)(2);return r[0]!==e?(t=(0,n.jsx)(a.t,{fallback:null,children:(0,n.jsx)(w,{...e})}),r[0]=e,r[1]=t):t=r[1],t};try{w.displayName||(w.displayName="Feedback")}catch{}try{E.displayName||(E.displayName="CopilotCodeReviewFeedback")}catch{}},58990:(e,t,r)=>{r.d(t,{E:()=>o});var n=r(74848),i=r(21728),a=r(38621);function o(e){let t=(0,i.c)(4),{status:r}=e;switch(r){case"ADDED":case"COPIED":{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(a.FileAddedIcon,{size:16,className:"fgColor-success"}),t[0]=e):e=t[0],e}case"DELETED":case"REMOVED":{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(a.FileRemovedIcon,{size:16,className:"fgColor-danger"}),t[1]=e):e=t[1],e}case"RENAMED":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(a.FileMovedIcon,{size:16,className:"fgColor-attention"}),t[2]=e):e=t[2],e}default:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(a.FileDiffIcon,{size:16,className:"fgColor-muted"}),t[3]=e):e=t[3],e}}}try{o.displayName||(o.displayName="FileStatusIcon")}catch{}},89323:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var n=r(74848),i=r(80663),a=r(6869),o=r(63867),l=r(34164),s=r(96540);let c={ERROR:"ERROR",LOADING:"LOADING",LOADED:"LOADED",READY:"READY"};function d(e){e&&(e.load=e.hello=null,e.helloTimer&&(clearTimeout(e.helloTimer),e.helloTimer=null),e.loadTimer&&(clearTimeout(e.loadTimer),e.loadTimer=null))}function u(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}let h={FileRendererWrapper:"FileRendererBlob-module__FileRendererWrapper--PLJ7W",FileRendererViewport:"FileRendererBlob-module__FileRendererViewport--WwSdq",FileRendererViewportNonError:"FileRendererBlob-module__FileRendererViewportNonError--C1G_v",FileRendererViewportReady:"FileRendererBlob-module__FileRendererViewportReady--mTIg8",loadingIndicator:"FileRendererBlob-module__loadingIndicator--P3luP",fileContentFrame:"FileRendererBlob-module__fileContentFrame--tPzAR",fileContentFrameNotReady:"FileRendererBlob-module__fileContentFrameNotReady--JBFau",errorMessageHeading:"FileRendererBlob-module__errorMessageHeading--omRNb"};function m({identityUuid:e,size:t,type:r,url:m,iframeClassName:f,viewportClassName:g}){let[v]=(0,i.I)(()=>window.location.origin,"https://www.github.com",[]),b=new URL(m,v).origin,{renderState:y,errorMsg:x,iFrameRef:R,containerRef:w}=function(e,t){let[r,n]=function(e){let[t,r]=(0,s.useState)(e),n=(0,s.useRef)(t);return[n,e=>{n.current=e,r(e)}]}(c.LOADING),i=(0,s.useRef)(null),a=(0,s.useRef)(null),o=(0,s.useRef)(null),l=(0,s.useRef)({untimed:!0}),h=(0,s.useCallback)(r=>(function(e,t,r,n,i,a,o,l){if(e.origin!==t)return;let s=function(e){var t;let r=e.data;if(!r)return null;if("string"==typeof r)try{r=JSON.parse(r)}catch{return null}return"object"==typeof(t=r)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?r:null}(e);if(!s)return void o(c.ERROR);if(s.identity!==r)return;let d=s.body,h=null!=s.payload?s.payload:void 0,m=n.current?.contentWindow;switch(d){case"hello":(a.current??{untimed:!0}).hello=Date.now(),u(m,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),u(m,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":h&&l(h.error??null),o(c.ERROR);break;case"loading":o(c.LOADING);break;case"loaded":o(c.LOADED);break;case"ready":h&&"number"==typeof h.height&&i.current&&(i.current.style.height=`${h.height}px`),o(c.READY);break;case"resize":h&&"number"==typeof h.height&&i.current&&(i.current.style.height=`${h.height}px`);break;case"code_rendering_service:container:get_size":u(m,{type:"render:cmd",body:{cmd:"code_rendering_service:container:size","code_rendering_service:container:size":{width:i.current?.getBoundingClientRect().width}}});break;case"code_rendering_service:markdown:get_data":if(!n.current||!i.current)return;!function(e,t){let r=e.getAttribute("data-content");if(!r)return;let n={type:"render:cmd",body:{cmd:"code_rendering_service:data:ready","code_rendering_service:data:ready":{data:JSON.parse(r).data,width:t.getBoundingClientRect().width}}};u(e.contentWindow,n)}(n.current,i.current)}})(r,e,t,a,o,l,n,e=>i.current=e),[e,n,t]);return(0,s.useEffect)(()=>{d(l.current);let e=e=>{(r.current===c.LOADING||r.current===c.LOADED)&&(!e||l.current.hello)&&n(c.ERROR)};return l.current={load:Date.now(),hello:null,helloTimer:window.setTimeout(e,1e4,!0),loadTimer:window.setTimeout(e,45e3)},()=>{d(l.current)}},[r,n]),(0,s.useEffect)(()=>(window.addEventListener("message",h),()=>window.removeEventListener("message",h)),[h]),{renderState:r.current,errorMsg:i.current,iFrameRef:a,containerRef:o}}(b,e);return"ipynb"===r&&t>3e7||t>2e8?(0,n.jsx)(a.A,{variant:"danger",children:"Sorry, this is too big to display."}):(0,n.jsx)("div",{className:h.FileRendererWrapper,children:(0,n.jsxs)("div",{"data-hpc":!0,"data-host":b,"data-type":r,ref:w,className:(0,l.$)(h.FileRendererViewport,{[h.FileRendererViewportNonError]:y!==c.ERROR,[h.FileRendererViewportReady]:y===c.READY},g),children:[y===c.ERROR?(0,n.jsx)(p,{error:x}):y!==c.READY?(0,n.jsx)(o.A,{size:"large",className:h.loadingIndicator}):null,y!==c.ERROR&&(0,n.jsx)("iframe",{ref:R,src:`${m}#${e}`,sandbox:"allow-scripts allow-same-origin allow-top-navigation",name:e,title:"File display",className:(0,l.$)(h.fileContentFrame,{[h.fileContentFrameNotReady]:y!==c.READY},f),children:"Viewer requires iframe."})]})})}function p({error:e}){if(!e)return(0,n.jsx)(a.A,{variant:"danger",children:"Unable to render code block"});let t=e.split(`
`);return(0,n.jsxs)(a.A,{variant:"danger",children:[(0,n.jsx)("p",{className:h.errorMessageHeading,children:"Error rendering embedded code"}),(0,n.jsx)("p",{children:t.map((e,t)=>(0,n.jsxs)(s.Fragment,{children:[e,(0,n.jsx)("br",{})]},`error-line-${t}`))})]})}try{m.displayName||(m.displayName="FileRendererBlob")}catch{}try{p.displayName||(p.displayName="FileRendererErrorMessage")}catch{}},4652:(e,t,r)=>{r.d(t,{o:()=>l});var n=r(74848),i=r(21728),a=r(38621),o=r(94977);function l(){let e,t=(0,i.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)(o.A,{direction:"n",text:"This line has hidden Unicode characters",children:(0,n.jsx)(a.AlertIcon,{className:"mr-2"})}),t[0]=e):e=t[0],e}try{l.displayName||(l.displayName="HiddenUnicodeAlert")}catch{}},58246:(e,t,r)=>{r.d(t,{a:()=>u});var n=r(74848),i=r(21728),a=r(96679),o=r(80663),l=r(38621),s=r(34614),c=r(6869),d=r(55847);function u(e){let t,r,u,m,p,f=(0,i.c)(7),{isShown:g,toggleShowHiddenCharacters:v}=e;f[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],f[0]=t):t=f[0];let[b]=(0,o.I)(h,a.cg,t);if(!b)return null;f[1]===Symbol.for("react.memo_cache_sentinel")?(r=(0,n.jsx)(l.AlertIcon,{}),f[1]=r):r=f[1],f[2]===Symbol.for("react.memo_cache_sentinel")?(u=(0,n.jsxs)("span",{children:["This file contains bidirectional or hidden Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters."," ",(0,n.jsx)(s.A,{inline:!0,href:"https://github.co/hiddenchars",target:"_blank",rel:"noreferrer",children:"Learn more about bidirectional Unicode characters"})]}),f[2]=u):u=f[2],f[3]===Symbol.for("react.memo_cache_sentinel")?(m={backgroundClip:"padding-box"},f[3]=m):m=f[3];let y=g?"Hide revealed characters":"Show hidden characters";return f[4]!==y||f[5]!==v?(p=(0,n.jsxs)(c.A,{className:"d-flex flex-items-center",full:!0,variant:"warning",children:[r,u,(0,n.jsx)(d.Q,{className:"ml-4 float-right",onClick:v,size:"small",style:m,children:y})]}),f[4]=y,f[5]=v,f[6]=p):p=f[6],p}function h(){return a.cg}try{u.displayName||(u.displayName="HiddenUnicodeBanner")}catch{}},81351:(e,t,r)=>{r.d(t,{Gx:()=>l});var n,i=r(74848),a=r(21728),o=r(83829);function l(e){return(0,o.Y)(e)?(0,o.t6)(e).map(e=>{let t=o.A0.get(e);return t?`<span class="hidden-unicode-replacement">${t}</span>`:e}).join(""):null}try{(n=function(e){let t,r=(0,a.c)(2),{char:n}=e;return r[0]!==n?(t=(0,i.jsx)("span",{className:"hidden-unicode-replacement padded",children:n}),r[0]=n,r[1]=t):t=r[1],t}).displayName||(n.displayName="HiddenUnicodeCharacter")}catch{}},69851:(e,t,r)=>{r.d(t,{x:()=>s});var n=r(74848),i=r(21728),a=r(88191),o=r(96540),l=r(80663);let s=(0,o.forwardRef)(function(e,t){let r,o,s,d,u,h,m=(0,i.c)(13);m[0]!==e?({children:r,src:s,...o}=e,m[0]=e,m[1]=r,m[2]=o,m[3]=s):(r=m[1],o=m[2],s=m[3]),m[4]===Symbol.for("react.memo_cache_sentinel")?(d=[],m[4]=d):d=m[4];let[p]=(0,l.I)(c,!0,d);return m[5]!==p||m[6]!==s?(u=p?{}:{src:s,"data-nonce":(0,a.M1)()},m[5]=p,m[6]=s,m[7]=u):u=m[7],m[8]!==r||m[9]!==o||m[10]!==t||m[11]!==u?(h=(0,n.jsx)("include-fragment",{...o,ref:t,...u,children:r}),m[8]=r,m[9]=o,m[10]=t,m[11]=u,m[12]=h):h=m[12],h});try{s.displayName||(s.displayName="IncludeFragment")}catch{}function c(){return!1}},75062:(e,t,r)=>{r.d(t,{e:()=>a});var n=r(74848),i=r(94232);function a(){return(0,n.jsx)("div",{className:"d-flex flex-wrap gap-1",children:(0,n.jsx)(i.O,{variant:"elliptical",height:"28px",width:"28px"})})}try{a.displayName||(a.displayName="ReactionViewerLoading")}catch{}},34582:(e,t,r)=>{r.d(t,{k:()=>s});var n=r(74848),i=r(39459),a=r(75177),o=r(53110);function l({iconColor:e,icon:t,size:r=12,backgroundColor:i="fg.onEmphasis",absolute:l=!0,backgroundSx:s}){let c,d;return 12===r?(c="10px",d="1px"):20===r?(c="16px",d="2px"):(c="16px",d="4px"),(0,n.jsxs)(a.A,{sx:{display:"flex",borderRadius:"100px",...l?{position:"absolute",bottom:-1,right:-1,boxShadow:"0 0 0 2px var(--bgColor-default, var(--color-canvas-default))",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))"}:{position:"relative"},...s},children:[(0,n.jsx)(a.A,{sx:{display:"flex",position:"absolute",borderRadius:"100px",width:c,height:c,left:d,top:d,backgroundColor:i}}),(0,n.jsx)(o.A,{icon:t,size:r,sx:{color:e,position:"relative"}})]})}try{l.displayName||(l.displayName="StatusIcon")}catch{}function s({zIndex:e,altText:t,hovercardUrl:r,src:o,square:s,icon:c,iconColor:d,backgroundColor:u,backgroundSx:h,sx:m,size:p=20}){return(0,n.jsxs)(a.A,{sx:{position:"relative",display:"flex",gap:2,alignItems:"center",...e,...m},children:[(0,n.jsx)(i.r,{alt:t,"data-hovercard-url":r,size:p,square:s,src:o}),(0,n.jsx)(l,{icon:c,iconColor:d,size:12,backgroundColor:u,backgroundSx:h})]})}try{s.displayName||(s.displayName="StatusAvatar")}catch{}}}]);
//# sourceMappingURL=ui_packages_copilot-auth-token_copilot-auth-token_ts-ui_packages_diff-view-settings_types_ts--db0734-7b5b415402ce.js.map