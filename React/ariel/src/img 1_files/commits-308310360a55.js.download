"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["commits","lazy-react-partial-actions-survey","lazy-react-partial-enterprise-team","lazy-react-partial-ref-selector-partial","ui_packages_document-metadata_document-metadata_ts-ui_packages_fetch-headers_fetch-headers_ts-ae5464","vendors-node_modules_tanstack_react-query_build_modern_useMutation_js-node_modules_dom-input--ae5277"],{66661:(e,t,n)=>{function i(e){let t=e.parentNode;if(null===t||!(t instanceof HTMLElement))throw Error();let n=0;t instanceof HTMLOListElement&&1!==t.start&&(n=t.start-1);let i=t.children;for(let t=0;t<i.length;++t)if(i[t]===e)return n+t;return n}n.d(t,{P:()=>Quote,g:()=>MarkdownQuote});let r=0;function a(e){return e.replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}let s={INPUT:e=>e instanceof HTMLInputElement&&e.checked?"[x] ":"[ ] ",CODE(e){let t=e.textContent||"";return e.parentNode&&"PRE"===e.parentNode.nodeName?(e.textContent=`\`\`\`
${t.replace(/\n+$/,"")}
\`\`\`

`,e):t.indexOf("`")>=0?`\`\` ${t} \`\``:`\`${t}\``},P(e){let t=document.createElement("p");return t.textContent=(e.textContent||"").replace(/<(\/?)(pre|strong|weak|em)>/g,"\\<$1$2\\>"),t},STRONG:e=>`**${e.textContent||""}**`,EM:e=>`_${e.textContent||""}_`,DEL:e=>`~${e.textContent||""}~`,BLOCKQUOTE(e){let t=(e.textContent||"").trim().replace(/^/gm,"> "),n=document.createElement("pre");return n.textContent=`${t}

`,n},A(e){let t=e.textContent||"",n=e.getAttribute("href");return/^https?:/.test(t)&&t===n?t:n?`[${t}](${n})`:t},IMG(e){let t=e.getAttribute("alt")||"",n=e.getAttribute("src");if(!n)throw Error();let i=e.hasAttribute("width")?` width="${a(e.getAttribute("width")||"")}"`:"",r=e.hasAttribute("height")?` height="${a(e.getAttribute("height")||"")}"`:"";return i||r?`<img alt="${a(t)}"${i}${r} src="${a(n)}">`:`![${t}](${n})`},LI(e){let t=e.parentNode;if(!t)throw Error();let n="";if(!function(e){let t=e.childNodes[0],n=e.childNodes[1];return!!t&&e.childNodes.length<3&&("OL"===t.nodeName||"UL"===t.nodeName)&&(!n||n.nodeType===Node.TEXT_NODE&&!(n.textContent||"").trim())}(e))if("OL"===t.nodeName)if(r>0&&!t.previousSibling){let t=i(e)+r+1;n=`${t}\\. `}else n=`${i(e)+1}. `;else n="* ";let a=n.replace(/\S/g," "),s=(e.textContent||"").trim().replace(/^/gm,a),o=document.createElement("pre");return o.textContent=s.replace(a,n),o},OL(e){let t=document.createElement("li");return t.appendChild(document.createElement("br")),e.append(t),e},H1(e){let t=parseInt(e.nodeName.slice(1));return e.prepend(`${Array(t+1).join("#")} `),e},UL:e=>e};s.UL=s.OL;for(let e=2;e<=6;++e)s[`H${e}`]=s.H1;let Quote=class Quote{constructor(){this.selection=window.getSelection(),this.processSelectionText=e=>e}closest(e){let t=this.range.startContainer,n=t instanceof Element?t:t.parentElement;return n?n.closest(e):null}get active(){var e;return((null==(e=this.selection)?void 0:e.rangeCount)||0)>0}get range(){var e;return(null==(e=this.selection)?void 0:e.rangeCount)?this.selection.getRangeAt(0):new Range}set range(e){var t,n;null==(t=this.selection)||t.removeAllRanges(),null==(n=this.selection)||n.addRange(e)}set processSelectionTextFn(e){this.processSelectionText=e}get selectionText(){var e;return this.processSelectionText((null==(e=this.selection)?void 0:e.toString().trim())||"")}get quotedText(){return`> ${this.selectionText.replace(/\n/g,`
> `)}

`}select(e){this.selection&&(this.selection.removeAllRanges(),this.selection.selectAllChildren(e))}insert(e){e.value?e.value=`${e.value}

${this.quotedText}`:e.value=this.quotedText,e.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!1})),e.focus(),e.selectionStart=e.value.length,e.scrollTop=e.scrollHeight}};let MarkdownQuote=class MarkdownQuote extends Quote{constructor(e="",t){super(),this.scopeSelector=e,this.callback=t}get selectionText(){var e,t;if(!this.selection)return"";let n=function(e,t){let n=e.startContainer;if(!n||!n.parentNode||!(n.parentNode instanceof HTMLElement))throw Error("the range must start within an HTMLElement");let a=n.parentNode,s=e.cloneContents();if(t){let e=s.querySelector(t);e&&(s=document.createDocumentFragment()).appendChild(e)}r=0;let o=a.closest("li");if(a.closest("pre")){let e=document.createElement("pre");e.appendChild(s),(s=document.createDocumentFragment()).appendChild(e)}else if(o&&o.parentNode&&("OL"===o.parentNode.nodeName&&(r=i(o)),!s.querySelector("li"))){let e=document.createElement("li");if(!o.parentNode)throw Error();let t=document.createElement(o.parentNode.nodeName);e.appendChild(s),t.appendChild(e),(s=document.createDocumentFragment()).appendChild(t)}return s}(this.range,null!=(e=this.scopeSelector)?e:"");null==(t=this.callback)||t.call(this,n);let a=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>e.nodeName in s&&!function(e){if(e instanceof HTMLAnchorElement&&1===e.childNodes.length){let t=e.childNodes[0];if(t instanceof HTMLImageElement)return t.src===e.href}return!1}(e)&&("IMG"===e.nodeName||null!=e.firstChild||"INPUT"===e.nodeName&&e instanceof HTMLInputElement&&"checkbox"===e.type)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}),o=[],l=a.nextNode();for(;l;)l instanceof HTMLElement&&o.push(l),l=a.nextNode();for(let e of(o.reverse(),o))e.replaceWith(s[e.nodeName](e));let c=document.body;if(!c)return"";let d=document.createElement("div");d.appendChild(n),d.style.cssText="position:absolute;left:-9999px;",c.appendChild(d);let u="";try{let e=document.createRange();e.selectNodeContents(d),this.selection.removeAllRanges(),this.selection.addRange(e),u=this.selection.toString(),this.selection.removeAllRanges(),e.detach()}finally{c.removeChild(d)}return this.processSelectionText(u.trim())}}},78924:(e,t,n)=>{n.d(t,{I:()=>i});let i=(0,n(96540).createContext)(null)},52811:(e,t,n)=>{n.d(t,{C:()=>s,i:()=>o});var i=n(96679),r=n(27851),a=n(46493);function s(e,t){(0,r.G7)("arianotify_comprehensive_migration")?o(l(e),{...t,element:t?.element??e}):(0,r.G7)("primer_live_region_element")&&t?.element===void 0?(0,a.Cj)(e,{politeness:t?.assertive?"assertive":"polite"}):o(l(e),t)}function o(e,t){let{assertive:n,element:s}=t??{};(0,r.G7)("arianotify_comprehensive_migration")&&"ariaNotify"in Element.prototype?(s||document.body).ariaNotify(e):(0,r.G7)("primer_live_region_element")&&void 0===s?(0,a.iP)(e,{politeness:n?"assertive":"polite"}):function(e,t,n){let r=n??i.XC?.querySelector(t?"#js-global-screen-reader-notice-assertive":"#js-global-screen-reader-notice");r&&(r.textContent===e?r.textContent=`${e}\u00A0`:r.textContent=e)}(e,n,s)}function l(e){return(e.getAttribute("aria-label")||e.innerText||"").trim()}},53005:(e,t,n)=>{n.d(t,{O:()=>s,S:()=>a});var i=n(96679);let r=i.cg?.document?.head?.querySelector('meta[name="release"]')?.content||"",a="X-GitHub-Client-Version";function s(){return r}},89276:(e,t,n)=>{n.d(t,{z:()=>WebWorker});var i=n(35750),r=n(18150),a=n(85242),s=n(50467);let WebWorker=class WebWorker{set onmessage(e){this.worker.onmessage=e}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}constructor(e,t){(0,s._)(this,"worker",void 0);try{this.worker=new Worker(`${e}?module=true`,{type:"module"})}catch{console.warn("Web workers are not available. Please enable web workers to benefit from the improved performance."),this.worker=new MainThreadWorker(t)}}};var o=new WeakMap,l=new WeakMap;let MainThreadWorker=class MainThreadWorker{async postMessage(e){if((0,i._)(this,o))return;let t={data:(0,i._)(this,l).call(this,{data:e})};this.onmessage?.(t)}terminate(){(0,a._)(this,o,!0)}constructor(e){(0,r._)(this,o,{writable:!0,value:!1}),(0,s._)(this,"onmessage",void 0),(0,r._)(this,l,{writable:!0,value:void 0}),(0,a._)(this,l,e)}}},17264:(e,t,n)=>{n.d(t,{N:()=>DebouncedWorkerManager});var i=n(35750),r=n(18150),a=n(85242),s=n(88243),o=n(16213),l=n(50467),c=new WeakMap,d=new WeakMap,u=new WeakMap,m=new WeakMap,h=new WeakMap,f=new WeakMap,p=new WeakSet;let DebouncedWorkerManager=class DebouncedWorkerManager{post(e){if((0,i._)(this,f)&&(0,i._)(this,f).call(this,e))return(0,i._)(this,u)&&clearTimeout((0,i._)(this,u)),(0,s._)(this,p,g).call(this,e);this.idle()?((0,i._)(this,u)&&clearTimeout((0,i._)(this,u)),(0,a._)(this,u,setTimeout(()=>{(0,s._)(this,p,g).call(this,e)},(0,i._)(this,h)))):(0,a._)(this,d,e)}idle(){return!(0,i._)(this,c)}terminate(){(0,i._)(this,m).terminate()}constructor(e,t=200,n){(0,o._)(this,p),(0,r._)(this,c,{writable:!0,value:void 0}),(0,r._)(this,d,{writable:!0,value:void 0}),(0,l._)(this,"onResponse",void 0),(0,r._)(this,u,{writable:!0,value:void 0}),(0,r._)(this,m,{writable:!0,value:void 0}),(0,r._)(this,h,{writable:!0,value:void 0}),(0,r._)(this,f,{writable:!0,value:void 0}),(0,a._)(this,m,e),(0,a._)(this,h,t),(0,a._)(this,f,n),(0,i._)(this,m).onmessage=({data:e})=>{this.onResponse&&this.onResponse(e),(0,i._)(this,d)?((0,s._)(this,p,g).call(this,(0,i._)(this,d)),(0,a._)(this,d,void 0)):(0,a._)(this,c,void 0)}}};function g(e){(0,a._)(this,c,e),(0,i._)(this,m).postMessage(e)}},40753:(e,t,n)=>{var i=n(16058),r=n(48551),a=n(74848),s=n(88795),o=n(93955),l=n(70179),c=n(25772),d=n(96540),u=n(38621),m=n(32647);function h(){return(0,a.jsx)("div",{children:(0,a.jsxs)(m.E,{border:!1,spacious:!1,children:[(0,a.jsx)(m.E.Visual,{children:(0,a.jsx)(u.AlertIcon,{size:"medium",className:"mb-2 fgColor-muted"})}),(0,a.jsx)(m.E.Heading,{children:"Unable to load page."}),(0,a.jsxs)(m.E.Description,{children:[(0,a.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:"The page is unavailable due to a system error."}),(0,a.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:" Try reloading the page, or if the problem persists, contact support."}),(0,a.jsx)("p",{className:"d-flex flex-justify-center mt-2",children:(0,a.jsx)("a",{href:"https://www.githubstatus.com",children:"GitHub status"})})]})]})})}try{h.displayName||(h.displayName="CommitErrorState")}catch{}function f(e){let t=(0,c.B)(),[n]=(0,d.useState)(t?.repo),[i]=(0,d.useState)(t?.currentUser);return(0,a.jsx)(l.t,{critical:!0,fallback:(0,a.jsx)(h,{}),children:(0,a.jsx)(o.Q,{user:i,children:(0,a.jsx)(s.d,{repository:n,children:e.children})})})}try{f.displayName||(f.displayName="App")}catch{}var p=n(4203),g=n(80804),x=n(39419),y=n(19507),b=n(66871),C=n(96235),v=n(96615),N=n(96679),j=n(42080),w=n(80663),_=n(14103),S=n(93653),E=n(34164),L=n(18312),k=n(6869),I=n(53110);function T(){return(0,a.jsxs)(k.A,{variant:"warning",className:"mb-4",children:[(0,a.jsx)(I.A,{icon:u.AlertIcon,className:"mr-2"}),(0,a.jsx)("span",{className:"overflow-hidden",children:"This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository."})]})}try{T.displayName||(T.displayName="SpoofedCommitWarningBanner")}catch{}var D=n(1058);function R({oid:e,repo:t}){return(0,D.N)(e,t.id)?(0,a.jsxs)(k.A,{className:"mb-4",children:[(0,a.jsx)("img",{src:"/images/modules/commit/flowers@2x.png",alt:"flower",width:"88px",height:"49px",className:"mr-4 mt-1 float-left"}),(0,a.jsx)("h2",{children:"Thanks for everything, Jim."}),(0,a.jsx)("p",{children:"We will miss you."})]}):null}try{R.displayName||(R.displayName="WeirichCommitBanner")}catch{}function A({oid:e,repo:t,commitBranchState:n}){return(0,a.jsxs)(a.Fragment,{children:[n.loading||0!==n.branches.length?null:(0,a.jsx)(T,{}),(0,a.jsx)(R,{oid:e,repo:t})]})}try{A.displayName||(A.displayName="CommitBanners")}catch{}var M=n(4148),O=n(46309),$=n(60183),P=n(45968),B=n(87606),U=n(94232),F=n(1653),H=n(55847),z=n(34614),V=n(87330),G=n(47139),W=n(94977),K=n(22403),q=n(23476),X=n(77418),Q=n(94671),J=n(10127),Y=n(42682),Z=n(96635),ee=n(2676);function et({data:e,repo:t,className:n}){return e.loading||0!==e.branches.length?(0,a.jsxs)("div",{className:(0,E.$)(n,"d-flex flex-items-center flex-wrap fgColor-muted gap-1"),children:[(0,a.jsx)(I.A,{className:"mr-1",icon:u.GitBranchIcon}),e.loading?(0,a.jsx)(U.O,{width:"60px",variant:"rounded",height:"22px"}):e.branches.map((n,i)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(en,{branch:n,repo:t}),i!==e.branches.length-1?(0,a.jsx)("span",{className:"ml-1 user-select-none",children:"+"}):null]},n.branch))]}):null}function en({branch:e,repo:t}){let n=e.branch;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ee.A,{className:"mx-1",href:(0,C.bSP)({repo:t,head:n}),children:e.branch}),e.prs.length>0?(0,a.jsxs)(a.Fragment,{children:["(",e.prs.map((t,n)=>(0,a.jsxs)(d.Fragment,{children:[(0,a.jsx)(ei,{pullRequest:t}),n!==e.prs.length-1?(0,a.jsx)(a.Fragment,{children:",\xa0"}):null]},`pr-${t.repo.ownerLogin}-${t.repo.name}-${t.number}`)),")"]}):null]})}function ei({pullRequest:e}){let{repo:t,number:n,showPrefix:i}=e,r=i?`${t.ownerLogin}/${t.name}`:"";return(0,a.jsxs)(z.A,{href:(0,C.oDn)({repo:t,number:n}),className:"fgColor-muted","data-hovercard-url":(0,C.i9S)({owner:t.ownerLogin,repo:t.name,pullRequestNumber:n}),children:[r,"#",n]})}try{et.displayName||(et.displayName="CommitBranchInfo")}catch{}try{en.displayName||(en.displayName="BranchFragment")}catch{}try{ei.displayName||(ei.displayName="PullRequestLink")}catch{}let er={"commit-message-container":"CommitHeader-module__commit-message-container--nl1pf","commit-header-actions":"CommitHeader-module__commit-header-actions--kHXV1","pusher-container":"CommitHeader-module__pusher-container--SEeFG CommitHeader-module__commit-message-container--nl1pf"};var ea=n(28391);function es({commit:e,repo:t}){return(0,a.jsxs)(a.Fragment,{children:[`${e.parents.length} parent${e.parents.length>1||0===e.parents.length?"s":""} `,e.parents.map((e,n)=>(0,a.jsxs)(d.Fragment,{children:[0!==n?" + ":"",(0,a.jsx)(z.A,{to:(0,C.$Qz)({owner:t.ownerLogin,repo:t.name,commitish:e})+new URL(N.fV.origin+N.fV.pathname+N.fV.search,N.fV.origin).search,as:ea.N,className:"color-fg-default Link--inTextBlock","data-hotkey":function(e){switch(e){case 0:return"p";case 1:return"o";default:return}}(n),"data-hovercard-url":(0,C.fQd)({owner:t.ownerLogin,repo:t.name,commitish:e}),children:(0,X.F)(e)})]},e))]})}try{es.displayName||(es.displayName="CommitParents")}catch{}var eo=n(15385),el=n(9852);function ec({data:e,repo:t,className:n}){if(0===e.tags.length)return null;let i=e.tags.length>2&&e.tags.length<25,r=e.tags.length>=25;return(0,a.jsxs)("div",{className:(0,E.$)(n,"d-flex flex-items-center flex-wrap gap-1"),children:[(0,a.jsx)(I.A,{className:"mr-2 fgColor-muted",icon:u.TagIcon}),(0,a.jsx)(z.A,{href:(0,C.cpj)({owner:t.ownerLogin,repo:t.name,tag:e.tags[0]}),className:"fgColor-default",children:e.tags[0]}),i?(0,a.jsx)(ed,{tags:e.tags,repo:t}):null,r?(0,a.jsx)(eu,{tags:e.tags,repo:t}):null,e.tags.length>1?(0,a.jsx)(z.A,{href:(0,C.cpj)({owner:t.ownerLogin,repo:t.name,tag:e.tags[e.tags.length-1]}),className:"fgColor-muted",children:e.tags[e.tags.length-1]}):null]})}function ed({tags:e,repo:t}){let[n,i]=(0,d.useState)(!1),r=(0,d.useRef)(null),s=(0,d.useCallback)(()=>{i(!0),requestAnimationFrame(()=>r.current?.focus())},[]);return n?(0,a.jsx)(a.Fragment,{children:e.slice(1,e.length-1).map((e,n)=>(0,a.jsx)(z.A,{ref:0===n?r:null,href:(0,C.cpj)({owner:t.ownerLogin,repo:t.name,tag:e}),className:"fgColor-muted mx-1",children:e},e))}):(0,a.jsx)(V.K,{"aria-label":"Show more tags",tooltipDirection:"s",icon:u.KebabHorizontalIcon,size:"small",variant:"invisible",onClick:s})}function eu({tags:e,repo:t}){let[n,i]=(0,d.useState)(!1),r=(0,d.useRef)(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V.K,{"aria-label":"Show all tags",tooltipDirection:"s",icon:u.KebabHorizontalIcon,size:"small",variant:"invisible",onClick:()=>i(!0),ref:r}),n&&(0,a.jsx)(el.l,{title:`${e.length} tags`,onClose:()=>i(!1),returnFocusRef:r,width:"medium",height:e.length>=12?"small":"auto",renderBody:()=>(0,a.jsx)(eo.l,{className:"overflow-y-auto py-2","data-testid":"tag-dialog-list",children:e.map(e=>(0,a.jsx)(eo.l.LinkItem,{href:(0,C.cpj)({owner:t.ownerLogin,repo:t.name,tag:e}),children:e},e))})})]})}try{ec.displayName||(ec.displayName="CommitTagInfo")}catch{}try{ed.displayName||(ed.displayName="ExpandedTags")}catch{}try{eu.displayName||(eu.displayName="CommitTagsDialog")}catch{}let em=(0,d.memo)(eh);function eh({commit:e,commitInfo:t,repo:n}){let i=(0,d.useRef)(null),r=(0,q.I)(`${(0,C.$Qz)({owner:n.ownerLogin,repo:n.name,commitish:e.oid})}/deferred_commit_data`);return(0,a.jsxs)(F.z,{children:[(0,a.jsx)(F.z.TitleArea,{variant:"large",sx:{minWidth:0,alignItems:"center"},children:(0,a.jsxs)(F.z.Title,{as:"h1",sx:{minWidth:0},className:"f2",children:["Commit ",(0,a.jsx)("span",{className:"text-mono bgColor-muted rounded p-1",children:(0,X.F)(e.oid)})]})}),(0,a.jsx)(F.z.Actions,{className:(0,E.$)(er["commit-header-actions"]),children:(0,a.jsxs)("div",{className:"d-flex gap-2 flex-items-center flex-md-justify-end",children:[(0,a.jsx)(ep,{}),(0,a.jsx)(W.A,{text:"Browse the repository at this point in the history",direction:"sw",sx:{display:"flex"},className:"d-none d-md-flex",children:(0,a.jsx)(H.Q,{as:z.A,sx:{color:"fg.default"},href:(0,C.IO9)({repo:n,action:"tree",commitish:e.oid}),leadingVisual:u.FileCodeIcon,children:"Browse files"})}),(0,a.jsx)(V.K,{as:z.A,href:(0,C.IO9)({repo:n,action:"tree",commitish:e.oid}),icon:u.FileCodeIcon,"aria-label":"Browse files",className:"d-flex d-md-none"})]})}),(0,a.jsx)(F.z.Description,{children:(0,a.jsxs)("div",{className:"d-flex flex-column gap-2 width-full",children:[(0,a.jsx)(J.j,{commit:e,repo:n,settings:{fontColor:"fg.default",avatarSize:20,fontWeight:"bold"},textVariant:"muted",children:(0,a.jsx)(ef,{deferredData:r,oid:e.oid,repo:n})}),(0,a.jsxs)(Z.Z,{className:"pt-0",children:[(e.shortMessageMarkdown||e.bodyMessageHtml)&&(0,a.jsxs)("div",{className:(0,E.$)(er["commit-message-container"]),children:[e.shortMessageMarkdown&&(0,a.jsx)(P.JR,{ref:i,html:e.shortMessageMarkdown,className:"ws-pre-wrap f5 wb-break-word text-mono"}),e.bodyMessageHtml&&(0,a.jsx)(P.JR,{html:e.bodyMessageHtml,className:"ws-pre-wrap extended-commit-description-container f6 wb-break-word text-mono mt-2"})]}),(0,a.jsxs)("div",{className:"p-2 d-flex gap-2 flex-column flex-md-row flex-justify-between",children:[(0,a.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[(0,a.jsx)(et,{data:t,repo:n}),t.tags.length>0&&(0,a.jsx)("span",{className:"px-2",children:"\xb7"}),(0,a.jsx)(ec,{data:t,repo:n})]}),(0,a.jsxs)("pre",{className:"color-fg-muted d-flex flex-items-center",children:[(0,a.jsx)(es,{commit:e,repo:n})," commit ",(0,a.jsx)("span",{className:"fgColor-default",children:(0,X.F)(e.oid)}),(0,a.jsx)(Y.w,{sha:e.oid,direction:"sw"})]})]}),(0,$.u)("show_pusher_on_commit_detail")&&e.pusher&&(0,a.jsx)("div",{className:(0,E.$)(er["pusher-container"]),children:(0,a.jsx)(J.C,{commit:e,repo:n,textVariant:"muted"})})]})]})})]})}function ef({deferredData:e,oid:t,repo:n}){let{helpUrl:i}=(0,K.D)(),r=void 0===e,s="";try{s=e?.statusCheckStatus?.short_text?.split("checks")[0]?.trim()||""}catch{}return(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)(U.O,{className:"ml-2",variant:"rounded",width:"62px"}),e?.statusCheckStatus&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"d-flex ml-2 mr-1",children:"\xb7"}),(0,a.jsx)(Q.d,{oid:t,status:e?.statusCheckStatus?.state,descriptionString:s,repo:n}),e?.signatureInformation&&e?.verifiedStatus!=="unsigned"&&(0,a.jsx)("span",{className:"d-flex ml-2",children:"\xb7"})]}),e?.signatureInformation&&(0,a.jsx)("div",{className:"ml-2",children:(0,a.jsx)(B.h,{commitOid:t,hasSignature:!0,verificationStatus:e.verifiedStatus,signature:{helpUrl:i,...e.signatureInformation}})})]})}function ep(){return(0,$.u)("diff_ux_refresh_beta")?(0,a.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,a.jsx)(G.A,{variant:"success",children:"Preview"}),(0,a.jsx)(z.A,{href:"https://gh.io/new-commit-details-feedback",target:"_blank",rel:"noopener noreferrer",className:"no-wrap f5 text-normal d-none d-sm-block",children:"Give feedback"})]}):null}try{em.displayName||(em.displayName="CommitHeader")}catch{}try{eh.displayName||(eh.displayName="CommitHeaderUnmemoized")}catch{}try{ef.displayName||(ef.displayName="DeferredCommitHeaderData")}catch{}try{ep.displayName||(ep.displayName="Feedback")}catch{}function eg({unavailableReason:e,commit:t,commitInfo:n}){let i=(0,s.t)(),r=ex[e];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.B,{"data-hpc":!0,padding:{narrow:"normal",regular:"spacious"},children:(0,a.jsx)(em,{commit:t,commitInfo:n,repo:i})}),(0,a.jsxs)(m.E,{children:[(0,a.jsx)(m.E.Visual,{children:r.visual}),(0,a.jsx)(m.E.Heading,{children:r.heading}),(0,a.jsx)(m.E.Description,{children:r.description}),r.secondaryAction]})]})}let ex={corrupt:{visual:(0,a.jsx)(u.AlertIcon,{}),heading:"Sorry, this diff is unavailable.",description:"The repository may be missing relevant data.",secondaryAction:(0,a.jsx)(m.E.SecondaryAction,{href:(0,C.y2B)(),children:"Please contact support for more information"})},"missing commits":{visual:(0,a.jsx)(u.AlertIcon,{}),heading:"Sorry, this diff is unavailable.",description:"The repository may be missing relevant data.",secondaryAction:(0,a.jsx)(m.E.SecondaryAction,{href:(0,C.y2B)(),children:"Please contact support for more information"})},timeout:{visual:(0,a.jsx)(u.HourglassIcon,{}),heading:"Sorry, this diff is taking too long to generate.",description:"It may be too large to display on GitHub."},"too busy":{visual:(0,a.jsx)(u.HourglassIcon,{}),heading:"Sorry, this diff is temporarily unavailable due to heavy server load.",description:"Please try again later."}};try{eg.displayName||(eg.displayName="CommitUnavailable")}catch{}var ey=n(73435),eb=n(13233),eC=n(64262),ev=n(60040),eN=n(60039);let ej={extraDiffEntries:[],loading:!0,error:!1};var ew=n(9591);let e_={defaultStyles:"DiffFind-module__defaultStyles--S1piO"},eS=(0,d.memo)(function({currentPathDigestIndex:e,searchTerm:t,searchResults:n,setSearchTerm:i,focusedSearchResult:r,currentIndex:s,setCurrentIndex:o,setFocusedSearchResult:l,scrollDiffCellIntoView:c}){let m=(0,d.useRef)([]),h=(0,d.useRef)(0),f=(0,a.jsxs)("div",{className:"d-flex flex-row flex-justify-center flex-items-center",children:[t&&(0,a.jsxs)("span",{className:"text-small fgColor-subtle mx-2 text-center",children:[0===n.size||void 0===r?0:s+1,"/",h.current]}),!t&&(0,a.jsx)("span",{className:"text-small fgColor-subtle mx-2 text-center pr-4",children:"\xa0"}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(V.K,{size:"small",variant:"invisible",onClick:()=>{p(-1)},icon:u.ChevronUpIcon,"aria-label":"Up","data-testid":"up-search"}),(0,a.jsx)(V.K,{size:"small",variant:"invisible",onClick:()=>{p(1)},icon:u.ChevronDownIcon,"aria-label":"Down","data-testid":"down-search"})]})]}),p=t=>{if(void 0===r||""===r.pathDigest){e.current=0,l({pathDigest:m.current[0]??"",indexWithinDigest:0});return}1===t?(o(s===h.current-1?0:s+1),r.indexWithinDigest===n.get(r.pathDigest).length-1?(e.current=e.current+1,e.current===m.current.length&&(e.current=0),r.pathDigest=m.current[e.current]??"",r.indexWithinDigest=0):r.indexWithinDigest=r.indexWithinDigest+1):(o(0===s?h.current-1:s-1),0===r.indexWithinDigest?(e.current=e.current-1,-1===e.current&&(e.current=m.current.length-1),r.pathDigest=m.current[e.current]??"",r.indexWithinDigest=n.get(r.pathDigest).length-1):r.indexWithinDigest=r.indexWithinDigest-1),l(r)};return(0,d.useEffect)(()=>{m.current=Array.from(n.keys()),e.current=0,l({pathDigest:m.current[0]??"",indexWithinDigest:0});let t=0;for(let e of n.values())t+=e.length;h.current=t},[e,n,n.size,l]),(0,d.useEffect)(()=>{n.size>0&&void 0!==r&&c(r)},[n,r,s]),(0,a.jsxs)("div",{className:e_.defaultStyles,children:[(0,a.jsx)(j.ak,{commands:{"pull-requests-diff-view:jump-to-next-result-alternate":()=>p(1),"pull-requests-diff-view:jump-to-previous-result-alternate":()=>p(-1)}}),(0,a.jsx)(j.tL,{commands:{"pull-requests-diff-view:jump-to-next-result":()=>p(1),"pull-requests-diff-view:jump-to-previous-result":()=>p(-1)},children:(0,a.jsx)(ew.A,{className:"border-0 box-shadow-none",style:{width:"100%"},validationStatus:h.current>1e3?"error":void 0,type:"text",leadingVisual:()=>(0,a.jsx)(I.A,{icon:u.SearchIcon,"aria-hidden":"true"}),autoComplete:"off",name:"Find in commit input","aria-label":"Search within code",placeholder:"Search within code",value:t,onChange:t=>{t.target.value?(i(t.target.value),o(0)):(i(""),l(void 0),e.current=0)},block:!0,trailingAction:f})})]})});try{eS.displayName||(eS.displayName="DiffFind")}catch{}function eE(e,t){return`${"left"===t?"L":"R"}${e}`}function eL(e){let t=e.match(/^#?(diff-[a-f0-9]+)/);return t?.[1]}function ek(e){let t=eE(e.startLineNumber,e.startOrientation),n=`${e.diffAnchor}${t}`;if(e.endLineNumber!==e.startLineNumber||e.endOrientation!==e.startOrientation){let t=eE(e.endLineNumber,e.endOrientation);n+=`-${t}`}return n}function eI(e){let t=`#${e}`;if(t===window.location.hash)return;let n=window.location.href;(0,b.Zu)(t),window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:window.location.href,oldURL:n}))}var eT=n(89276),eD=n(17264);function eR({data:e}){let{query:t,diffEntryInfo:n,currentDiffEntryData:i}=e;return{matchingDiffs:i?function(e,t,n){if(0===n.size)return new Map;let i=n.size>=200,r={},a=e.reduce((n,i,a)=>{if(r[a])return n;r[a]=!0;let s=eO(t,[e[a]]),o=s.next();for(;!o.done&&n.size<200;){let{resultsWithinDiff:t}=o.value;n.set(e[a]?.pathDigest??"",t),o=s.next()}return n},new Map);if(a.size<200&&i){let n=eO(t,e,a.size),i=n.next();for(;!i.done&&a.size<200;){let{resultsWithinDiff:t,diff:r}=i.value;a.set(e[r]?.pathDigest??"",t),i=n.next()}}return a}(n,eM(t),i):function(e,t){let n=new Map,i=eO(t,e),r=i.next();for(;!r.done&&n.size<200;){let{resultsWithinDiff:t,diff:a}=r.value;n.set(e[a]?.pathDigest??"",t),r=i.next()}return n}(n,eM(t)),query:t}}let eA={Text:"Text"};function eM(e){let t=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{kind:eA.Text,regexp:RegExp(t,"gi")}}function*eO(e,t,n=0){for(let i=n;i<t.length;i++){let n=t[i],r=[],a=0;for(let s=0;s<n.diffLines.length;s++){let o,l;o=t[i]?.diffLines[s]?.type==="HUNK"?n.diffLines[s]?.text:n.diffLines[s]?.text?.substring(1);let c=n.diffLines[s];for(;o&&null!==(l=e.regexp.exec(o));){let e=l[0],t=l.index;r.push({pathDigest:n.pathDigest,indexWithinPathDigest:a,matchContent:e,column:t,diffLineNumIndex:s,isHunk:c?.type==="HUNK",hunkLineNumber:c?.blobLineNumber??-1,leftLineNumber:c?.type!=="ADDITION"?c?.left??-1:-1,rightLineNumber:c?.type!=="DELETION"?c?.right??-1:-1,columnEnd:t+e.length,text:o}),a++}}0!==r.length&&(yield{diff:i,resultsWithinDiff:r})}}var e$=n(38911);function eP(){let[e,t]=(0,d.useState)(!1);return(0,a.jsx)("div",{className:e?"":"pt-4",children:!e&&(0,a.jsx)(e$.l,{title:"Some content is hidden",description:(0,a.jsx)("div",{className:"d-flex flex-items-center",style:{justifyContent:"center"},children:"Large Commits have some content hidden by default. Use the searchbox below for content that may be hidden."}),variant:"warning",onDismiss:()=>t(!0)})})}try{eP.displayName||(eP.displayName="VirtualizedBanner")}catch{}var eB=n(48040),eU=n(8895),eF=n(30559),eH=n(63149),ez=n(32745),eV=n(3785);async function eG(e,t,n){let i=await (0,eN.Sr)(`${t}?pathDigest=${n}${function(e){let t="";for(let n=0;n<e.length;n++)t+=`&lineRanges[]=${JSON.stringify(e[n])}`;return t}(e)}`);if(i.ok)return await i.json()??void 0}async function eW({repo:e,sha1:t,sha2:n,entry:i}){let r=await (0,eN.Sr)((0,eV.RD)((0,C.uxJ)({owner:e.ownerLogin,repo:e.name,entry:i,sha1:t,sha2:n})));if(r.ok){let e=await r.json();return(0,eV.Av)(e),e.diffLines}throw Error("error fetching diff lines.")}var eK=n(87591),eq=n(58246),eX=n(83829),eQ=n(69676);let eJ={ArrowLeft:eQ.z0.ArrowHorizontal,ArrowDown:eQ.z0.ArrowVertical,ArrowUp:eQ.z0.ArrowVertical,ArrowRight:eQ.z0.ArrowHorizontal,h:eQ.z0.HL,j:eQ.z0.JK,k:eQ.z0.JK,l:eQ.z0.HL,a:eQ.z0.AD,s:eQ.z0.WS,w:eQ.z0.WS,d:eQ.z0.AD,Tab:eQ.z0.Tab,Home:eQ.z0.HomeAndEnd,End:eQ.z0.HomeAndEnd,PageUp:eQ.z0.PageUpDown,PageDown:eQ.z0.PageUpDown,Backspace:eQ.z0.Backspace},eY=eQ.z0.ArrowAll|eQ.z0.PageUpDown|eQ.z0.HomeAndEnd|eQ.z0.AD,eZ={ghostUser:{displayName:"Ghost",login:"ghost",avatarUrl:"https://avatars.githubusercontent.com/ghost",path:"/ghost",url:"/ghost"}},e0=(0,d.createContext)(null);function e1({children:e,...t}){let n=!!t.commentingImplementation,i=!!t.markerNavigationImplementation;if(t.commentingEnabled!==n&&t.commentingEnabled!==i)throw Error("commentingEnabled, commentingImplementation, and markerNavigationImplementation must be passed together");let r=t?.ghostUser??eZ.ghostUser,s=(0,d.useMemo)(()=>({ghostUser:r,...t}),[...Object.values(t),r]);return(0,a.jsx)(e0.Provider,{value:s,children:e})}function e2(){let e=(0,d.useContext)(e0);if(!e)throw Error("useDiffContext must be used within a DiffContextProvider");return e}try{e0.displayName||(e0.displayName="DiffContext")}catch{}try{e1.displayName||(e1.displayName="DiffContextProvider")}catch{}var e4=n(52811),e3=n(46996),e6=n(55463);let e9={Failure:"FAILURE",Notice:"NOTICE",Warning:"WARNING"},e5="empty-diff-line";function e8(e,t,n){return"left"===n?!tt(e)&&e.left===t:!tt(e)&&(0,eK.XU)(e.type)===n&&e.right===t}function e7(e,t,n){let i=`-${tt(t)||"number"!=typeof t.left?"empty":t.left}`,r=n?`-${tt(n)||"number"!=typeof n.right?"empty":n.right}`:"";return`${e}${i}${r}`}function te(e,t){return`${e}-${t}`}function tt(e){return!!e&&e===e5}function tn(e){return"CONTEXT"===e.type}function ti(e,t,n=!1){return n?function(e,t){let n;switch(t){case"ADDITION":n=["+"];break;case"DELETION":n=["-"];break;case"CONTEXT":n=[" "];break;case"INJECTED_CONTEXT":n=[" ","~"]}if(void 0===n||0===n.length||n.every(t=>!e.startsWith(t)))return[e,void 0];let i=e[0];return[e.substring(1),i]}(e,t):function(e,t){let n;switch(t){case"ADDITION":n="+";break;case"DELETION":n="-";break;case"CONTEXT":case"INJECTED_CONTEXT":n=" "}if(!n||!e.startsWith(n))return[e,void 0];let i=e[0];return[e.substring(1),i]}(e,t)}function tr(e){return new DOMParser().parseFromString(e,"text/html").documentElement.textContent||""}function ta(e){return["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type)}function ts({line:e,range:t,fileAnchor:n}){let i,{origin:r,pathname:a}=window.location;if(e){let r=ta(e)?e.left:e.right;i=t&&r&&t.startLineNumber<=r&&t.endLineNumber>=r?ek(t):function(e,t){let n=ta(e),i=n?e.left:e.right,r=n?"left":"right";if(null!==i)return ek({diffAnchor:t,endLineNumber:i,endOrientation:r,startLineNumber:i,startOrientation:r,firstSelectedLineNumber:i,firstSelectedOrientation:r})}(e,n)}else t&&(i=ek(t));if(i)return`${r}${a}#${i}`}function to({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let r=e?`${(0,e6.U0)()?"\u2318":"Ctrl + "}`:"";return n&&(r+=`${(0,e6.U0)()?"\u2325":"Alt + "}`),t&&(r+=`${(0,e6.U0)()?"\u21E7":"Shift + "}`),r+=i}function tl({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let r="";return e&&(r+=(0,e6.U0)()?"Command+":"Control+"),n&&(r+=(0,e6.U0)()?"Option+":"Alt+"),t&&(r+="Shift+"),r+=i}let tc=["ADDITION","DELETION","CONTEXT"],td=e=>e?e.filter(e=>!tt(e)).map(e=>{let[t]=ti(tr(e.html),e.type);return t}).join(`
`):"";function tu(e,t=!1,n=!1){let i;switch(e){case"ADDITION":i=t?"var(--diffBlob-additionNum-bgColor, var(--diffBlob-addition-bgColor-num))":"var(--diffBlob-additionLine-bgColor, var(--diffBlob-addition-bgColor-line))";break;case"DELETION":i=t?"var(--diffBlob-deletionNum-bgColor, var(--diffBlob-deletion-bgColor-num))":"var(--diffBlob-deletionLine-bgColor, var(--diffBlob-deletion-bgColor-line))";break;case"HUNK":i=t?"var(--diffBlob-hunkNum-bgColor-rest, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-hunkLine-bgColor, var(--bgColor-accent-muted))";break;case"EMPTY":i=t?"var(--diffBlob-emptyNum-bgColor, var(--diffBlob-hunk-bgColor-num))":"var(--diffBlob-emptyLine-bgColor, var(--bgColor-accent-muted))";break;default:i="var(--bgColor-default)"}return n?`color-mix(in oklab, var(--bgColor-accent-emphasis) 8%, ${i})`:i}function tm({selectedDiffRowRange:e,leftLines:t,rightLines:n,isNumberCell:i}){let r=!!n,{startOrientation:a,endOrientation:s}=e;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation&&!i)return{isRowSelected:()=>!1,selectedRightLines:[],selectedLeftLines:[]};let o=u(a).findIndex(t=>e8(t,e.startLineNumber,e.startOrientation)),l=u(s).findIndex(t=>e8(t,e.endLineNumber,e.endOrientation)),c=o>=0&&l>=0;function d(e){if(!c||tt(e))return!1;let t=u((0,eK.XU)(e.type)).indexOf(e);return t>=o&&t<=l}function u(e){var i;return r&&"left"!==("string"==typeof(i=e)?i:(0,eK.XU)(i.type))?n:t}let m=u("left").filter(e=>d(e)),h=u("right").filter(e=>d(e));return{isRowSelected:d,selectedRightLines:h,selectedLeftLines:m}}var th=n(17515);let tf=e=>{let t=(0,d.useRef)(e);return(0,th.N)(()=>(t.current=e,()=>t.current=null),[e]),(0,d.useCallback)((...e)=>t.current?.(...e),[])},tp=(0,d.createContext)(null);function tg(){let e=(0,d.useContext)(tp);if(!e)throw Error("useSelectedDiffRowRange must be used within a SelectedDiffRowRangeContext");return e}function tx(e){e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation?(0,e4.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} selected.`):(0,e4.i)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} to ${"left"===e.endOrientation?"L":"R"}${e.endLineNumber} selected.`)}function ty({children:e}){let t=(0,d.useRef)(new Map),n=tf((e,n)=>{if(!e)return;let i=e.diffAnchor,r=t.current.get(i);if(!r)return;let{leftLines:a,rightLines:s}=function(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(e5);for(;n.length<t.length;)n.push(e5)};for(let r of e)switch(r.type){case"ADDITION":n.push(r);break;case"DELETION":t.push(r);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(r),n.push(r)}return i(),{leftLines:t,rightLines:n}}(r);return tm({selectedDiffRowRange:e,leftLines:a,rightLines:s,isNumberCell:n})}),[i,r]=(0,d.useState)(()=>(function(e){let t=function(e){let t=e.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(null!=t&&6===t.length)return t;let n=e.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return null!=n&&6===n.length?n:null}(e);if(t){let e=t[1],n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0;if(!e||!n||void 0===i)return;return{diffAnchor:e,startOrientation:n,startLineNumber:i,endOrientation:(t[4]?"L"===t[4]?"left":"right":void 0)??n,endLineNumber:(t[5]?parseInt(t[5]):void 0)??i,firstSelectedLineNumber:i,firstSelectedOrientation:n}}})(N.fV.hash)),[s,o]=(0,d.useState)(()=>{if(i){let e=n(i);if(e)return{leftLines:e.selectedLeftLines,rightLines:e.selectedRightLines||[]}}return{leftLines:[],rightLines:[]}}),l=tf((e,t)=>{let i=n(e,t),r=i?{leftLines:i.selectedLeftLines,rightLines:i.selectedRightLines||[]}:{leftLines:[],rightLines:[]};(0,e3.A)(s,r)||o(r)}),c=tf((e,t,n,a,s)=>{if(!t||!n)return;let o=a&&i&&i.diffAnchor===e?t<=i.firstSelectedLineNumber?{...i,startLineNumber:t,startOrientation:n,endLineNumber:i.firstSelectedLineNumber,endOrientation:i.firstSelectedOrientation}:{...i,startLineNumber:i.firstSelectedLineNumber,startOrientation:i.firstSelectedOrientation,endLineNumber:t,endOrientation:n}:{diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:t,startOrientation:n,firstSelectedLineNumber:t,firstSelectedOrientation:n};tx(o),(s||a)&&r(o),l(o,s),eI(ek(o))}),u=tf(e=>{tx(e),r(e),l(e),eI(ek(e))}),m=tf(({diffAnchor:e,startGridCell:t,endGridCell:n,focusedGridCell:i})=>{u({diffAnchor:e,endLineNumber:n.lineNumber,endOrientation:n.orientation,firstSelectedLineNumber:i.lineNumber,firstSelectedOrientation:i.orientation,startLineNumber:t.lineNumber,startOrientation:t.orientation})}),h=tf(()=>{i&&(r(void 0),l(void 0),(0,e4.i)("Selection Cleared"),(0,b.K3)())}),f=tf((e,n)=>{t.current.set(e,n),i?.diffAnchor===e&&l(i)}),p=tf(e=>t.current.get(e)),g=(0,d.useMemo)(()=>({selectedDiffRowRange:i,updateSelectedDiffRowRange:c,clearSelectedDiffRowRange:h,replaceSelectedDiffRowRange:u,replaceSelectedDiffRowRangeFromGridCells:m,updateDiffLines:f,selectedDiffLines:s,getDiffLinesFromLineRange:n,getDiffLinesByDiffAnchor:p}),[i,c,h,u,m,s,f,n,p]);return(0,a.jsx)(tp.Provider,{value:g,children:e})}try{tp.displayName||(tp.displayName="SelectedDiffRowRangeContext")}catch{}try{ty.displayName||(ty.displayName="SelectedDiffRowRangeContextProvider")}catch{}let tb={finalLineId:"final-hunk-header-line"};function tC(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function tv(e,t){if("HUNK"===e.type&&e.__id===tb.finalLineId)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let n=t.sort(tC).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[n],nextHunk:t[n+1],previousHunk:t[n-1]}}function tN(e){let t,n=[],i=0;for(let r=1;r<e.length;r++){let a=e[r];if(a&&!tt(a)&&(t=a,"HUNK"===a.type)){let t,s=e[i];if(!s||tt(s))continue;let o=r-1;for(;(!t||tt(t))&&(t=e[o],-1!=--o););t&&!tt(t)&&n.push({startBlobLineNumber:s.blobLineNumber,endBlobLineNumber:t.blobLineNumber}),a.__id===tb.finalLineId&&n.push({startBlobLineNumber:a.blobLineNumber,endBlobLineNumber:a.blobLineNumber+20}),i=r;continue}}if(t&&"HUNK"!==t.type){let r=e[i];r&&!tt(r)&&n.push({startBlobLineNumber:r.blobLineNumber,endBlobLineNumber:t.blobLineNumber})}return n}let tj={tableLayoutFixed:"DiffLines-module__tableLayoutFixed--ZmaVx",compact:"DiffLines-module__compact--Pv9Ef"};var tw=n(63867);let t_={gridColumnTemplate:"HiddenDiffPatch-module__gridColumnTemplate--je6Mi"};function tS({children:e,helpText:t,helpUrl:n,onLoadDiff:i,diffAnchor:r}){let s=n&&t,[o,l]=(0,d.useState)("initial"),c=(0,d.useCallback)(async()=>{try{l("loading"),await i()}catch{l("error")}},[i,l]);return(0,a.jsx)("div",{className:"px-3 py-4 fgColor-muted","data-diff-anchor":r,children:(0,a.jsxs)("div",{className:(0,E.$)(t_.gridColumnTemplate),children:[(0,a.jsx)("svg",{"aria-hidden":!0,height:"84",style:{maxWidth:"340px"},viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})})," ",(0,a.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center flex-items-center",children:["loading"===o&&(0,a.jsx)(tw.A,{size:"medium"}),"error"===o&&(0,a.jsx)(u.AlertIcon,{size:24}),"initial"===o&&(0,a.jsx)(H.Q,{className:"h4 mx-auto fgColor-accent",variant:"invisible",onClick:()=>{c(),l("loading")},children:"Load Diff"}),"error"===o?(0,a.jsxs)("span",{className:"fgColor-muted mt-1",children:["The contents of the file couldn't be loaded."," ",(0,a.jsx)(z.A,{inline:!0,as:"button",onClick:()=>{c(),l("loading")},children:"Retry"})]}):(0,a.jsxs)("span",{className:"fgColor-muted mt-1",children:[e,s&&(0,a.jsx)(z.A,{inline:!0,href:n,children:t})]})]})]})})}try{tS.displayName||(tS.displayName="HiddenDiffPatch")}catch{}var tE=n(81351);let tL=(0,d.createContext)(null);function tk({children:e,currentHunk:t,diffEntryId:n,diffLine:i,fileAnchor:r,fileLineCount:s,filePath:o,hasHiddenUnicodeCharacters:l,isLeftSide:c,isRowSelected:u=!1,isSplit:m,modifiedLineThreads:h,nextHunk:f,originalLineThreads:p,previousHunk:g,rowId:x,diffContext:y,setInGridMode:b}){let C=(0,d.useMemo)(()=>({currentHunk:t,diffEntryId:n,diffLine:i,fileAnchor:r,fileLineCount:s,filePath:o,hasHiddenUnicodeCharacters:l,isLeftSide:c,isRowSelected:u,isSplit:m,modifiedLineThreads:h,modifiedLineHasThreads:h&&h.length>0,nextHunk:f,originalLineThreads:p,originalLineHasThreads:p&&p.length>0,previousHunk:g,rowId:x,diffContext:y,setInGridMode:b}),[t,n,i,r,s,o,l,c,u,m,h,f,p,g,x,y,b]);return(0,a.jsx)(tL.Provider,{value:C,children:e})}function tI(){let e=(0,d.useContext)(tL);if(!e)throw Error("useDiffLineContext must be used within a DiffLineContextProvider");return e}try{tL.displayName||(tL.displayName="DiffLineContext")}catch{}try{tk.displayName||(tk.displayName="DiffLineContextProvider")}catch{}function tT(e,t){return e?.threads?.flatMap(e=>{let n=e?.id,i=e?.commentsData?.comments?.[0]?.author??t,r=e?.commentsData?.totalCount??0,a=e?.commentsData?.__id;return n&&i?[{id:n,author:i,commentCount:r,commentsConnectionId:a,diffSide:e.diffSide,isOutdated:e.isOutdated,line:e.line,startLine:e.startLine,startDiffSide:e.startDiffSide}]:[]})??[]}var tD=n(82678),tR=n(35750),tA=n(18150),tM=n(85242),tO=n(88243),t$=n(16213),tP=n(50467),tB=new WeakMap,tU=new WeakMap,tF=new WeakMap,tH=new WeakMap,tz=new WeakMap,tV=new WeakMap,tG=new WeakSet,tW=new WeakSet,tK=new WeakSet,tq=new WeakSet,tX=new WeakSet,tQ=new WeakSet,tJ=new WeakSet,tY=new WeakSet,tZ=new WeakSet,t0=new WeakSet;let GridNavigator=class GridNavigator{moveToNextItem(e,t){let n,i=(0,tR._)(this,tU).get(this.focusedGridCell?.cellId??"");if(!i)return;let[r]=i,[,a]=i;switch(("ArrowDown"===e||"ArrowUp"===e)&&(0,tO._)(this,tJ,t5).call(this,r)&&(0,tR._)(this,tH)&&(a=(0,tR._)(this,tH),(0,tM._)(this,tH,void 0)),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=(0,tR._)(this,tB).length-1,t=(0,tR._)(this,tB)[e]?.length;t&&(n=(0,tR._)(this,tB)[e]?.[t-1]);break}case"ArrowUp"===e:(0,tO._)(this,tJ,t5).call(this,r-1)?((0,tO._)(this,t0,ne).call(this,a),n=(0,tR._)(this,tB)[r-1]?.[0]):n=(0,tR._)(this,tB)[r-1]?.[a];break;case"ArrowDown"===e:(0,tO._)(this,tJ,t5).call(this,r+1)?((0,tO._)(this,t0,ne).call(this,a),n=(0,tR._)(this,tB)[r+1]?.[0]):n=(0,tR._)(this,tB)[r+1]?.[a];break;case"ArrowLeft"===e:n=(0,tR._)(this,tB)[r]?.[a-1];break;case"ArrowRight"===e:n=(0,tR._)(this,tB)[r]?.[a+1];break;case"PageUp"===e:{(0,tO._)(this,t0,ne).call(this,a);let e=(0,tO._)(this,tK,t4).call(this,r);n=(0,tR._)(this,tB)[e]?.[0];break}case"PageDown"===e:{(0,tO._)(this,t0,ne).call(this,a);let e=(0,tO._)(this,tW,t2).call(this,r),t=0;e||(e=(0,tR._)(this,tB).length-1,t=a),n=(0,tR._)(this,tB)[e]?.[t];break}case"Home"===e:n=(0,tR._)(this,tB)[r]?.[0];break;case"End"===e:{let e=(0,tR._)(this,tB)[r];if(e&&!(0,tO._)(this,tJ,t5).call(this,r)){let t=e.length-1;n=(0,tR._)(this,tB)[r]?.[t]}}}return n&&(this.focusedGridCell=n),this.focusedGridCell}reinitializeGrid(e,t){(0,tO._)(this,tq,t3).call(this,e,t)}focusFirstGridCell(e){e&&(0,tR._)(this,tU).get(e)?this.focusGridCell(e):this.focusedGridCell=(0,tR._)(this,tB)[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=(0,tR._)(this,tU).get(e);if(!t)return;let[n,i]=t;this.focusedGridCell=(0,tR._)(this,tB)[n]?.[i]}getNextSelectableCell(e){let t,n=this.getValidSelectableRowCell()||this.focusedGridCell,i=this.lastSelectedGridCell||n,r=(0,tR._)(this,tU).get(i?.cellId??"");if(!r)return;let[a,s]=r;if("ArrowUp"===e){let e=a-1;for(;!t&&e>=0;)t=(0,tO._)(this,tG,t1).call(this,{rowIndex:e,columnIndex:s}),e--}if("ArrowDown"===e){let e=a+1;for(;!t&&e<(0,tR._)(this,tB).length;)t=(0,tO._)(this,tG,t1).call(this,{rowIndex:e,columnIndex:s}),e++}return t&&(this.lastSelectedGridCell=t),t}getValidSelectableRowCell(){if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let e=(0,tR._)(this,tU).get(this.focusedGridCell.cellId)?.[0];if(e)return this.focusedGridCell.columnIndex<=1&&!(0,tR._)(this,tV)?(0,tR._)(this,tB)[e]?.[this.focusedGridCell.columnIndex+1]:this.focusedGridCell.columnIndex<2&&(0,tR._)(this,tV)?(0,tR._)(this,tB)[e]?.[this.focusedGridCell.columnIndex+2]:(0,tR._)(this,tB)[e]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=(0,tR._)(this,tB).find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=(0,tR._)(this,tB).slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,n){let i=te(e7((0,tR._)(this,tz),e,t),0),r=(0,tR._)(this,tU).get(i);if(!r)return!1;let[a]=r;return!!n===(0,tO._)(this,tJ,t5).call(this,a)}constructor(e,t,n,i,r){(0,t$._)(this,tG),(0,t$._)(this,tW),(0,t$._)(this,tK),(0,t$._)(this,tq),(0,t$._)(this,tX),(0,t$._)(this,tQ),(0,t$._)(this,tJ),(0,t$._)(this,tY),(0,t$._)(this,tZ),(0,t$._)(this,t0),(0,tA._)(this,tB,{writable:!0,value:[]}),(0,tA._)(this,tU,{writable:!0,value:new Map}),(0,tA._)(this,tF,{writable:!0,value:new Set}),(0,tP._)(this,"focusedGridCell",void 0),(0,tP._)(this,"lastSelectedGridCell",void 0),(0,tA._)(this,tH,{writable:!0,value:void 0}),(0,tA._)(this,tz,{writable:!0,value:void 0}),(0,tA._)(this,tV,{writable:!0,value:void 0}),(0,tM._)(this,tz,e),(0,tM._)(this,tV,t),(0,tO._)(this,tq,t3).call(this,n,i),this.focusFirstGridCell(r)}};function t1({rowIndex:e,columnIndex:t}){let n=(0,tR._)(this,tB)[e],i=n?.[t];switch(!0){case i?.isHunk:return;case i?.orientation==="left"&&i.isEmpty:return n?.[t+2];case i?.orientation==="right"&&i.isEmpty&&(0,tR._)(this,tV):return n?.[t-2];case i?.orientation==="right"&&i.isEmpty&&!(0,tR._)(this,tV):return n?.[t+1];default:return n?.[t]}}function t2(e){return Array.from((0,tR._)(this,tF)).sort((e,t)=>e-t).find(t=>t>e)}function t4(e){return Array.from((0,tR._)(this,tF)).sort((e,t)=>e-t).reverse().find(t=>t<e)??0}function t3(e,t){(0,tM._)(this,tB,[]),(0,tM._)(this,tU,new Map),(0,tM._)(this,tF,new Set);for(let n=0;n<e.length;n++){let i=[],r=e[n];if(void 0!==r){if((0,tR._)(this,tV)){let e=(t||[])[n],a=e7((0,tR._)(this,tz),r,e);tt(r)||"HUNK"!==r.type?(0,tO._)(this,tY,t8).call(this,{leftLine:r,rightLine:e,row:i,rowIdentifier:a,rowIndex:n}):(0,tO._)(this,tQ,t9).call(this,i,a,n)}else{let e=e7((0,tR._)(this,tz),r,r);tt(r)||"HUNK"!==r.type?(0,tO._)(this,tZ,t7).call(this,{diffLine:r,row:i,rowIdentifier:e,rowIndex:n}):(0,tO._)(this,tQ,t9).call(this,i,e,n)}(0,tR._)(this,tB).push(i)}}}function t6({cellIndex:e,diffLine:t,orientation:n,row:i,rowIdentifier:r,rowIndex:a,isSplit:s}){let o,l,c=te(r,e);l=!(s||tt(t))&&t?.type==="DELETION"&&1===e||!(s||tt(t))&&t?.type==="ADDITION"&&0===e||tt(t),tt(t)||"left"!==n||(o=t?.left),tt(t)||"right"!==n||(o=t?.right),i.push({lineNumber:o,orientation:n,isEmpty:l,isHunk:!1,cellId:te(r,e),columnIndex:e}),(0,tR._)(this,tU).set(c,[a,e])}function t9(e,t,n){let i=te(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:i,columnIndex:0}),(0,tR._)(this,tU).set(i,[n,0]),(0,tR._)(this,tF).add(n)}function t5(e){return(0,tR._)(this,tF).has(e)}function t8({leftLine:e,rightLine:t,row:n,rowIdentifier:i,rowIndex:r}){(0,tO._)(this,tX,t6).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),(0,tO._)(this,tX,t6).call(this,{cellIndex:1,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),(0,tO._)(this,tX,t6).call(this,{cellIndex:2,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0}),(0,tO._)(this,tX,t6).call(this,{cellIndex:3,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:r,isSplit:!0})}function t7({diffLine:e,row:t,rowIdentifier:n,rowIndex:i}){let r=tt(e)||"DELETION"!==e.type?"right":"left";(0,tO._)(this,tX,t6).call(this,{cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,tO._)(this,tX,t6).call(this,{cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:n,rowIndex:i,isSplit:!1}),(0,tO._)(this,tX,t6).call(this,{cellIndex:2,diffLine:e,orientation:r,row:t,rowIdentifier:n,rowIndex:i,isSplit:!1})}function ne(e){(0,tO._)(this,tJ,t5).call(this,e)||(0,tM._)(this,tH,e)}function nt(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}function nn(e){return e in eJ&&(eJ[e]&eY)>0}function ni({clearSelectedDiffRowRange:e,containerRef:t,fileAnchor:n,isSplitDiff:i,leftLines:r,replaceSelectedDiffRowRangeFromGridCells:a,rightLines:s,disabled:o}){var l;let c=(0,d.useRef)(void 0),u=(0,d.useMemo)(()=>new GridNavigator(n,i,r,s,c.current?.focusedGridCell?.cellId),[n,i,r,s]);(0,d.useEffect)(()=>{c.current=u},[u]),(0,d.useEffect)(()=>{let e=t.current,n=()=>{u.clearLastSelectedCell()};return e?.addEventListener("mousedown",n),()=>e?.removeEventListener("mousedown",n)},[t,u]),l=c.current,(0,d.useEffect)(()=>{if(l&&document.activeElement){let e=function(e,t,n){let i=[];for(let r=0;r<t.length;r++){let a=t[r],s=n?.[r]??a,o=!tt(a)&&a?.type==="HUNK";a&&s&&!e.hasLine(a,s,o)&&i.push(a)}return i}(l,r,s);if(0!==e.length){if(document.activeElement===document.body){let t,i,a,s=r.indexOf(e[e.length-1]),o=r[s+1],l=e[0];o&&!tt(o)&&"HUNK"===o.type&&(t=te(e7(n,o,o),0),i=document.querySelector(`[data-grid-cell-id=${t}]`),a=i?.querySelector("button[data-direction=down], button[data-direction=all]")),a||(t=te(e7(n,l,l),0),i=document.querySelector(`[data-grid-cell-id=${t}]`),a=i?.querySelector("button[data-direction=up], button[data-direction=all]")),t&&i&&(a?a.focus():i.focus(),u.focusGridCell(t),nt(i))}else if("BUTTON"===document.activeElement.tagName)nt(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),n=u.focusedGridCell?.cellId;if(e!==n){let e=t.current?.querySelector(`[data-grid-cell-id=${n}]`);e?.focus()}}}}},[n,r,u,s,l,t]);let m=(0,d.useCallback)(e=>{let t=e.target.getAttribute("data-grid-cell-id");t&&u.focusGridCell(t)},[u]);(0,d.useEffect)(()=>{let e=t.current;return e?.addEventListener("focusin",m),()=>e?.removeEventListener("focusin",m)},[t,m]);let h=(0,d.useCallback)((t,i,r)=>{let s=u.getValidSelectableRowCell();switch(!0){case(r.metaKey||r.ctrlKey)&&"KeyA"===r.code:{let e=u.getFirstCodeCell(),t=u.getLastCodeCell();if(!e||!t)return i;return a({diffAnchor:n,focusedGridCell:e,startGridCell:e,endGridCell:t}),i}case r.shiftKey&&"ArrowDown"===r.key:{let e=u.getNextSelectableCell("ArrowDown");if(!e||!s)return i;return a({diffAnchor:n,focusedGridCell:s,startGridCell:s,endGridCell:e}),nr(e.cellId),i}case r.shiftKey&&"ArrowUp"===r.key:{let e=u.getNextSelectableCell("ArrowUp");if(!e||!s)return i;return a({diffAnchor:n,focusedGridCell:s,startGridCell:e,endGridCell:s}),nr(e.cellId),i}case"ArrowLeft"===r.key&&r.metaKey&&r.shiftKey:return i;default:{let t=u.moveToNextItem(r.key,r.ctrlKey),n=t&&document.querySelector(`[data-grid-cell-id=${t.cellId}]`);return e(),u.clearLastSelectedCell(),n??void 0}}},[u,n,a,e]);return(0,tD.G)({containerRef:t,bindKeys:eY,getNextFocusable:h,focusableElementFilter:e=>"BUTTON"!==e.tagName&&"TEXTAREA"!==e.tagName,focusInStrategy:"previous",disabled:o},[h]),{gridNavigator:u}}function nr(e){let t=N.XC?.querySelector(`[data-grid-cell-id=${e}]`);!function(e){if(!N.XC||!N.cg||!e)return!1;let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(N.cg.innerHeight||N.XC.documentElement.clientHeight)&&t.right<=(N.cg.innerWidth||N.XC.documentElement.clientWidth)}(t)&&t?.scrollIntoView({block:"nearest",inline:"nearest"})}var na=n(4652);let ns=(0,d.createContext)({isInDialogMode:!1,enableInlineCommentDialogMode:()=>{},disableInlineCommentDialogMode:()=>{}});function no({enableDiffGridMode:e,children:t}){let[n,i]=(0,d.useState)(!1),r=(0,d.useCallback)(()=>{i(!0),e?.(!1)},[e]),s=(0,d.useCallback)(()=>{i(!1),e?.(!0)},[e]),o=(0,d.useMemo)(()=>({isInDialogMode:n,enableInlineCommentDialogMode:r,disableInlineCommentDialogMode:s}),[n,r,s]);return(0,a.jsx)(ns.Provider,{value:o,children:t})}let nl=()=>(0,d.useContext)(ns);try{ns.displayName||(ns.displayName="InlineCommentDialogModeContext")}catch{}try{no.displayName||(no.displayName="InlineCommentDialogModeProvider")}catch{}function nc(e){return null!=e}let nd="thread",nu="annotation",nm=(0,d.createContext)(null);function nh({children:e,line:t}){let[n,i]=(0,d.useState)(!1),[r,s]=(0,d.useState)(),[o,l]=(0,d.useState)(),[c,u]=(0,d.useState)(),[m,h]=(0,d.useState)(),[f,p]=(0,d.useState)(),{ghostUser:g,markerNavigationImplementation:x}=e2(),{originalLineThreads:y,modifiedLineThreads:b}=tI(),[C,v]=(0,d.useState)(),N=np({line:t,side:C,originalLineThreads:y,modifiedLineThreads:b,ghostUser:g}),j=(0,d.useMemo)(()=>!!r||!!o||!!c||!!m,[r,c,o,m]),w=(0,d.useCallback)(()=>{i(!0)},[]),_=(0,d.useCallback)(()=>{i(!1)},[]),S=(0,d.useCallback)(e=>{e?p({id:e,kind:nd}):p(void 0)},[]),E=f?.kind===nd?f.id:void 0,L=f?.kind===nu?f.id:void 0,k=(0,d.useCallback)(e=>{e?p({id:e,kind:nu}):p(void 0)},[]),I=(0,d.useCallback)((e,t,n)=>{var i=x?.overlayPortalContainerName;let r=document.querySelector('#__primerPortalRoot__ div[role="dialog"]'),a=document.querySelector(`#${i} div[role="dialog"]`);switch((r||a)&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0})),e){case"context-menu":s(t),h(void 0),u(void 0),l(void 0);break;case"new-conversation":h({cellId:t,withSuggestedChange:n?.withSuggestedChange}),s(void 0),u(void 0),l(void 0);break;case"marker-details":u(t),s(void 0),l(void 0),h(void 0);break;case"marker-list":l(t),s(void 0),h(void 0),u(void 0)}},[x?.overlayPortalContainerName]),T=(0,d.useCallback)(e=>{switch(e){case"context-menu":s(void 0);break;case"new-conversation":h(void 0);break;case"marker-details":u(void 0);break;case"marker-list":l(void 0)}},[]),D=(0,d.useCallback)(e=>(v(e),np({line:t,side:e,modifiedLineThreads:b,originalLineThreads:y,ghostUser:g})),[t,b,y,g]),R=(0,d.useMemo)(()=>t.annotationsData?.annotations?.filter(nc)??[],[t.annotationsData?.annotations]),A=(0,d.useMemo)(()=>({annotations:R,isActionBarVisible:n,showActionBar:w,hideActionBar:_,selectThreadId:S,selectAnnotationId:k,closeDialog:T,openDialog:I,anyMenuOpen:j,selectedThreadId:E,selectedAnnotationId:L,openContextMenuCell:r,openMarkersListCell:o,openMarkerDetailsCell:c,openNewConversationCell:m,threads:N,updateVisibleThreads:D}),[R,n,w,_,S,k,T,I,j,E,L,r,o,c,m,N,D]);return(0,a.jsx)(nm.Provider,{value:A,children:e})}function nf(){let e=(0,d.useContext)(nm);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e}function np({line:e,side:t,originalLineThreads:n,modifiedLineThreads:i,ghostUser:r}){switch(t){case"LEFT":return n||[];case"RIGHT":return i||[];case void 0:return tT(e.threadsData,r);default:return[]}}try{nm.displayName||(nm.displayName="MarkersDialogContext")}catch{}try{nh.displayName||(nh.displayName="MarkersDialogContextProvider")}catch{}var ng=n(640),nx=n(72847),ny=n(10569);let nb=(0,d.createContext)({});function nC({children:e}){let[t,n]=(0,d.useState)(!1),i=(0,d.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:n}),[t,n]);return(0,a.jsx)(nb.Provider,{value:i,children:e})}try{nb.displayName||(nb.displayName="DialogStateContext")}catch{}try{nC.displayName||(nC.displayName="DialogStateProvider")}catch{}let nv=eQ.z0.ArrowAll;eQ.z0.ArrowHorizontal,eQ.z0.ArrowVertical,eQ.z0.ArrowVertical,eQ.z0.ArrowHorizontal;let MarkerNavigator=class MarkerNavigator{focusMarker(e){let t=this.markers.findIndex(t=>t.id.toString()===e.toString());-1!==t&&(this.currentMarkerPosition={markerId:e,index:t})}get focusedMarker(){if(this.currentMarkerPosition)return this.markers[this.currentMarkerPosition.index]}moveToFirstComment(e){if(0!==this.markers.length&&!e)return}moveToNextMarker(e,t){let n;if(0===this.markers.length)return;if(t){let e=t.closest("[data-marker-id]"),n=e?.getAttribute("data-marker-id");n&&(this.currentMarkerPosition={markerId:n,index:this.markers.findIndex(e=>e.id.toString()===n.toString())})}if(!this.currentMarkerPosition){let t="ArrowUp"===e?this.markers.length-1:0,n=this.markers[t];if(!n)return;return this.currentMarkerPosition={markerId:n.id,index:t},this.markers[t]}let i=0===this.currentMarkerPosition.index,r=this.currentMarkerPosition.index===this.markers.length-1;switch(e){case"ArrowDown":if(r)return;n=(this.currentMarkerPosition.index+1)%this.markers.length;break;case"ArrowUp":if(i)return;n=(this.currentMarkerPosition.index-1+this.markers.length)%this.markers.length;break;default:return}let a=this.markers[n];if(a)return this.currentMarkerPosition={markerId:a.id,index:n},a}moveToNextMarkerItem(e,t){let n;if(!t||!this.markerComments)return;let i=t.closest("[data-marker-id]"),r=i?.getAttribute("data-marker-id");if(!i||!r)return;let a=this.markerComments[r]||[];if(0===a.length)return;let s=t.getAttribute("data-marker-navigation-comment-id"),o=a.findIndex(e=>e.id===s);if(-1===o)return;let l=o===a.length-1;switch(e){case"ArrowDown":if(l)return;n=o+1;break;case"ArrowUp":if(0===o)return;n=o-1;break;default:return}let c=a[n];if(c)return this.currentMarkerCommentPosition={markerId:c.id,index:n},c}constructor(e,t,n){if((0,tP._)(this,"markers",void 0),(0,tP._)(this,"markerComments",null),(0,tP._)(this,"currentMarkerPosition",null),(0,tP._)(this,"currentMarkerCommentPosition",null),this.markers=e.map(e=>{let t=e.id;return{...e,id:t}}),this.markerComments=e.reduce((e,t)=>{let n=document.querySelectorAll(`[data-marker-navigation-comment-thread-id="${t.id}"]`);if(n){let i=Array.from(n).map(e=>({id:e.getAttribute("data-marker-navigation-comment-id")}));return{...e,[t.id.toString()]:i}}return e},{}),t&&!n){let e=this.markers.findIndex(e=>e.id.toString()===t.toString());-1!==e&&(this.currentMarkerPosition={markerId:t,index:e})}}};let nN="a, audio, button, details, embed, iframe, img, input, keygen, label, object, select, textarea, video";function nj(e){for(let t of(e?.setAttribute("aria-hidden","false"),Array.from(e?.querySelectorAll("*")??[])))t?.setAttribute("aria-hidden","false");for(let t of Array.from(e?.querySelectorAll(nN)??[]))t.setAttribute("tabindex","0")}function nw({commentSubjectType:e,markerRef:t,isThread:n=!1,thread:i}){let{isInDialogMode:r}=nl();(0,d.useEffect)(()=>{let a=null;if(!n||i){if(r)"commit"===e?a=setTimeout(()=>{nj(t.current)},100):nj(t.current);else{var s;s=t.current,s?.setAttribute("aria-hidden","true"),function e(t=0){setTimeout(()=>{let t=Array.from(s?.querySelectorAll("*")??[]),n=Array.from(s?.querySelectorAll(nN)??[]);if(0===n.length)return e(200);for(let e of t)e?.setAttribute("aria-hidden","true");for(let e of n)e.setAttribute("tabindex","-1")},t)}()}return()=>{a&&clearTimeout(a)}}},[r,e,t,n,i])}var n_=n(39459),nS=n(52464),nE=n(58569);let nL={annotation:"Annotation-module__annotation--PKTZE",annotationSource:"Annotation-module__annotationSource--MZdsq",annotationMessage:"Annotation-module__annotationMessage--fRBuT"};var nk=n(38267);function nI({annotationLevel:e,...t}){let{icon:n,...i}=nR[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:i,className:r}){return(0,a.jsx)("svg",{"aria-label":n,className:r,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:i})}({...n,...i,...t})}let nT=(0,nk.i7)(["0%{opacity:0;}100%{opacity:1;}"]),nD=(0,nk.Ay)(nI).withConfig({displayName:"AnnotationIcon__AnimatedAnnotationIcon",componentId:"sc-f8bdef5f-0"})(["animation:"," 0.1s ease-in;"],nT),nR={[e9.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",primaryColorClass:"fgColor-danger",borderColor:"borderColor-danger-emphasis",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,a.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[e9.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",primaryColorClass:"fgColor-attention",borderColor:"borderColor-attention-emphasis",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,a.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[e9.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",primaryColorClass:"fgColor-muted",borderColor:"fgColor-muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,a.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{nI.displayName||(nI.displayName="AnnotationIcon")}catch{}try{nD.displayName||(nD.displayName="AnimatedAnnotationIcon")}catch{}let nA={[e9.Failure]:(0,a.jsx)(u.StopIcon,{className:"fgColor-danger"}),[e9.Warning]:(0,a.jsx)(u.AlertIcon,{className:"fgColor-attention"}),[e9.Notice]:(0,a.jsx)(u.InfoIcon,{className:"fgColor-muted"})};function nM({annotation:e}){return(0,a.jsxs)("div",{className:(0,E.$)("p-3 bgColor-default",nR[e.annotationLevel]?.borderColor,nL.annotation),children:[(0,a.jsxs)("div",{className:"d-flex flex-items-center mb-2",children:[nA[e.annotationLevel],(0,a.jsx)(nS.A,{weight:"semibold",className:"fgColor-muted pl-2",size:"small",children:nR[e.annotationLevel]?.ariaLabel})]}),(0,a.jsx)("div",{className:"ml-4",children:e.title&&(0,a.jsx)(nS.A,{weight:"semibold",size:"medium",className:nR[e.annotationLevel]?.primaryColorClass,children:e.title})}),(0,a.jsxs)("h2",{className:"sr-only",children:[nR[e.annotationLevel]?.ariaLabel,": ",e.title]}),(0,a.jsx)("div",{className:"mb-3 mt-1 ml-4",children:e.message&&(0,a.jsx)(P.$6,{html:e.message,className:nL.annotationMessage})}),(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between ml-4",children:[(0,a.jsxs)("div",{className:nL.annotationSource,children:[(0,a.jsx)(n_.r,{src:e.appAvatarUrl,alt:e.appAvatarAltText}),(0,a.jsxs)(nE.A,{className:"ml-2",maxWidth:"300px",inline:!0,title:`${e.checkSuiteName} / ${e.checkRun.name}`,children:[(0,a.jsx)(nS.A,{weight:"semibold",size:"small",children:e.checkSuiteName})," ","/ ",(0,a.jsx)(nS.A,{size:"small",children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,a.jsx)(H.Q,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})}try{nM.displayName||(nM.displayName="Annotation")}catch{}let nO={inlineAnnotation:"InlineAnnotation-module__inlineAnnotation--Clprv"};function n$({annotation:e,isFirstMarker:t,commentingImplementation:n}){let i=(0,d.useRef)(null),{isInDialogMode:r}=nl();return nw({commentSubjectType:n.commentSubjectType,markerRef:i}),(0,a.jsx)("div",{id:`annotation_${e.databaseId}`,ref:i,className:(0,E.$)("border rounded-2 color-border-default color-shadow-small overflow-hidden",t?"mb-1":"mb-2",nO.inlineAnnotation),"data-level":e.annotationLevel,"data-testid":`annotation-${e.id}`,"data-marker-id":`${e.id}`,tabIndex:r?0:-1,children:(0,a.jsx)(nM,{annotation:e})})}try{n$.displayName||(n$.displayName="InlineAnnotation")}catch{}let nP={closeMarkersDialogButton:"InlineMarkers-module__closeMarkersDialogButton--qlAgj",markersWrapper:"InlineMarkers-module__markersWrapper--UM7JR",markersDialogActive:"InlineMarkers-module__markersDialogActive--WXpyc"};var nB=n(85351),nU=n(75367),nF=n(18828);function nH(){return(0,a.jsx)("div",{className:"position-relative",children:(0,a.jsxs)(m.E,{border:!0,children:[(0,a.jsx)(m.E.Visual,{children:(0,a.jsx)(u.AlertIcon,{size:24,className:"fgColor-muted mt-3 mb-3"})}),(0,a.jsx)(m.E.Heading,{children:(0,a.jsx)("strong",{children:"Comments cannot be loaded right now"})}),(0,a.jsx)("div",{className:"mb-n2",children:(0,a.jsx)(m.E.Description,{children:"Refresh the page or try again later"})}),(0,a.jsx)(m.E.SecondaryAction,{href:"https://www.githubstatus.com/",children:"GitHub status"})]})})}try{nH.displayName||(nH.displayName="CommentErrorFallback")}catch{}let nz={inlineReviewThreadHeading:"InlineReviewThread-module__inlineReviewThreadHeading--g_9cg",ReviewThreadContainer:"InlineReviewThread-module__ReviewThreadContainer--Jl88o",ResolvableContainer:"InlineReviewThread-module__ResolvableContainer--qcV52",ThreadLoading:"InlineReviewThread-module__ThreadLoading--NgE1x"};var nV=n(63236),nG=n(75177);function nW(e,t="r"){(0,b.Zu)(`#${t}${e}`)}let nK={USER_CANNOT_APPLY_SUGGESTION:"You do not have permission to apply this suggestion.",PULL_REQUEST_IS_CLOSED:"This suggestion cannot be applied because the pull request is closed.",PULL_REQUEST_IS_IN_MERGE_QUEUE:"This suggestion cannot be applied because the pull request is queued to merge.",IS_OUTDATED:"This suggestion is outdated and cannot be applied.",IS_PENDING:"This suggestion is part of a pending comment and cannot be applied.",IS_RESOLVED:"This suggestion is part of a resolved comment and cannot be applied.",UNCHANGED_CODE:"This suggestion is invalid because no changes were made to the code.",INVALID_RANGE:"Unable to commit due to other pending changes affecting this line.",BATCH_TOO_BIG:"Unable to commit due to too many changes in the batch.",DELETED_LINES:"Unable to apply suggestions on deleted lines.",RANGE_NOT_PROVIDED:"This suggestion does not have a valid line range.",UNABLE_TO_DETERMINE_VALIDITY:"Unable to determine the validity of this suggestion."};var nq=n(96071),nX=n(44263);let{getItem:nQ,removeItem:nJ,setItem:nY}=(0,nB.D)("localStorage");function nZ({diffSide:e,filePath:t,handlePersistedCommentExists:n,line:i,subjectId:r,threadId:a,fileLevelComment:s}){let o,l,[c,u]=(0,d.useState)(!1),m=(0,d.useMemo)(()=>a||(a??((e,t)=>{let{diffSide:n,filePath:i,line:r,subjectId:a}=e;if(t)return`PullRequest:${a}-File:${i}`;if(void 0!==r&&void 0!==n)return`PullRequest:${a}-File:${i}-Line:${r}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")})({diffSide:e,filePath:t,line:i,subjectId:r},s)),[e,t,i,r,a,s]),{hasPersistedComment:h,removePersistedCommentFromStorage:f}=(o=nQ(m),l=!!o?.text?.trim(),(0,d.useEffect)(()=>{l&&n?.(o)},[l]),{hasPersistedComment:l,removePersistedCommentFromStorage:()=>{nJ(m),l=!1,o=null}});return{hasPersistedComment:h,persistCommentToStorage:(0,nX.d)(e=>{if(c)return;let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide});try{nY(m,t)}catch{u(!0)}},1e3),removePersistedCommentFromStorage:f}}function n0(e,t){for(let n of function e(t,n=[]){if(""===t)return n;let i=t.match(n1());if(!i)return n;let r=i.groups.fence;if(!r)return n;let a=r.includes("~")?"~":"`",s=t.match(function(e,t){let n=n1([e],t);return RegExp(`${n.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${e}{${t},}[ 	]*$`,"ms")}(a,r.length));if(!s)return n;let o=0,l=i.groups.indent;""!==l&&(o=l.length);let c=s.groups.suggestion;if(o>0){let e=RegExp(`^ {0,${o}}`,"m");c=c.replace(e,"")}return n.push(c),e(t.slice(s.index+s[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function n1(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}let n2={AddCommentEditor:"AddCommentEditor-module__AddCommentEditor--Os4M8"};var n4=n(33368);let n3=(0,d.forwardRef)(({children:e,subject:t,...n},i)=>(0,a.jsx)(n4.h,{...n,ref:i,placeholder:"Leave a comment",actions:e,subject:t,showLabel:!1}));function n6({batchPending:e,batchingEnabled:t,commentBoxSubject:n,condensed:i,fileLevelComment:r,filePath:s,focusOnMount:o,isReplying:l,lineNumber:c,onAddComment:u,onCancelComment:m,onPersistedCommentExists:h,quotedText:f="",side:p,startLineNumber:g,subjectId:x,threadId:y,suggestedChangesConfig:b}){let[C,v]=(0,d.useState)(f),[j,w]=(0,d.useState)(!1),[_,S]=(0,d.useState)(),E=(0,d.useRef)(null),L=(0,d.useRef)(null),{persistCommentToStorage:k,removePersistedCommentFromStorage:I}=nZ({diffSide:p,filePath:s,line:c,subjectId:x,threadId:y,handlePersistedCommentExists:({text:e})=>{e&&(v(e),h?.())},fileLevelComment:!!r});(0,d.useEffect)(()=>{if(o){let e=setTimeout(()=>{if(L.current&&(N.XC||N.cg)){let e=L.current,t=e.getBoundingClientRect(),n=N.XC?.documentElement.clientHeight||0;if(!(t.top>=0&&t.bottom<=(N.cg?.innerHeight||n))){let i=t.top,r=N.XC?.documentElement.getBoundingClientRect().top||0,a=e.clientHeight*(2/3);N.cg?.scrollTo({top:i-r-2/3*n+a,behavior:"smooth"})}}E.current?.focus()},100);return()=>{window.clearTimeout(e)}}},[o]);let T=({submitBatch:e})=>{let t="Failed to save comment";if(j)return;if(!C.trim())return void S(`${t}: Body can't be blank`);w(!0),S(void 0);let n=n0(C,b?.sourceContentFromDiffLines??"");if(!n.isValid){S(n.errorMessage),w(!1);return}u?.({commentText:C,onCompleted(){w(!1),A()},onError(e){w(!1),e.message&&(t=`${t}: ${e.message}`),S(t)},submitBatch:e})},D=()=>T({submitBatch:!1}),R=()=>T({submitBatch:!0}),A=(0,d.useCallback)(()=>{I(),v(""),m?.()},[m,I]),M={footer:{justifyContent:l?"end":"space-between","> div:first-child":{display:i||l?"none":"flex"},...i&&{"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}}}};return(0,a.jsx)("div",{className:n2.AddCommentEditor,onKeyDown:e=>{"Escape"!==e.key||C.trim()?e.stopPropagation():(e.preventDefault(),A())},children:(0,a.jsxs)(n3,{ref:E,label:"Add diff comment",sx:M,value:C,onChange:e=>{S(void 0),k({text:e}),v(e)},onPrimaryAction:t?D:R,suggestedChangesConfig:b,markdownErrorMessage:_,subject:n,lineNumber:c,filePath:s,startLineNumber:g,children:[m&&(0,a.jsx)(nq.x,{disabled:j,className:"py-1 px-2",variant:"default",onClick:A,children:"Cancel"}),!e&&(0,a.jsx)(nq.x,{disabled:j||!C.length,className:"py-1 px-2",variant:t?"default":"primary",onClick:R,ref:L,children:l?"Reply":"Comment"}),t&&(0,a.jsx)(nq.x,{disabled:j||!C.length,className:"py-1 px-2",variant:"primary",onClick:D,children:e?"Add review comment":"Start a review"})]})})}n3.displayName="ConversationCommentBox";try{n6.displayName||(n6.displayName="AddCommentEditor")}catch{}var n9=n(2427),n5=n(94169),n8=n(9808),n7=n(17723),ie=n(17523),it=n(75062),ii=n(12617),ir=n(99543),ia=n(53526),is=n(40961);function io({commentingImplementation:e,suggestedChange:t}){let{sendAnalyticsEvent:n}=(0,nU.s)();return(0,a.jsx)("div",{className:"d-flex flex-row-reverse",children:(0,a.jsx)(H.Q,{variant:"primary",onClick:()=>{n("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON"),e.addSuggestedChangeToPendingBatch(t)},children:"Add suggestion to batch"})})}try{io.displayName||(io.displayName="AddToExistingBatch")}catch{}var il=n(91321);let ic={applySuggestion:{text:"Apply suggestion"},addSuggestionToBatch:{text:"Add suggestion to batch",inactive:!0,inactiveReason:"This feature is not supported yet."}};function id({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let{sendAnalyticsEvent:i}=(0,nU.s)(),[r,s]=(0,d.useState)(ic.applySuggestion),[o,l]=(0,d.useState)(!1),c=(0,d.useRef)(null),m=(0,d.useRef)(null),h=()=>l(!o),{addSuggestedChangeToPendingBatch:f}=e,p=(0,d.useCallback)(()=>{r===ic.addSuggestionToBatch&&(f(n),i("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")),r===ic.applySuggestion&&t(m)},[f,t,r,i,n]);return(0,a.jsx)("div",{className:"d-flex flex-row-reverse",children:(0,a.jsxs)(il.A,{children:[(0,a.jsx)(H.Q,{variant:"primary",onClick:p,ref:m,children:r.text}),(0,a.jsxs)(ny.W,{anchorRef:c,open:o,onOpenChange:h,children:[(0,a.jsx)(ny.W.Anchor,{children:(0,a.jsx)(V.K,{ref:c,"aria-haspopup":"true","aria-label":"More suggestion batching options",icon:u.TriangleDownIcon,size:"medium",variant:"primary",onClick:h})}),(0,a.jsx)(ny.W.Overlay,{width:"medium",children:(0,a.jsx)(eo.l,{selectionVariant:"single",children:Object.keys(ic).map(e=>{let t=ic[e];return(0,a.jsx)(eo.l.Item,{selected:r===t,onSelect:()=>s(t),inactiveText:t.inactiveReason,children:t.text},e)})})})]})]})})}try{id.displayName||(id.displayName="ApplyOrAddToBatch")}catch{}var iu=n(64899),im=n(73451),ih=n(19647);function ip({children:e,footerButtons:t}){let{containerRef:n}=(0,tD.G)({bindKeys:eQ.z0.ArrowHorizontal|eQ.z0.Tab,focusInStrategy:"closest"});return t?(0,a.jsx)(el.l.Footer,{ref:n,children:(0,a.jsxs)("div",{className:"d-flex flex-column",children:[(0,a.jsx)("div",{className:"d-flex flex-row gap-2 flex-justify-end",children:(0,a.jsx)(el.l.Buttons,{buttons:t})}),e]})}):null}let ig={CHANGE_COMMIT_MESSAGE:"CHANGE_COMMIT_MESSAGE",CHANGE_EXTENDED_DESCRIPTION:"CHANGE_EXTENDED_DESCRIPTION"};function ix(e,t){switch(t.type){case ig.CHANGE_COMMIT_MESSAGE:return{...e,commitMessage:t.payload};case ig.CHANGE_EXTENDED_DESCRIPTION:return{...e,extendedDescription:t.payload};default:return console.error("Unknown suggested change action."),e}}function iy({authorLogins:e,batchSize:t,onClose:n,onCommit:i}){let r=(0,iu.A)(),{sendAnalyticsEvent:s}=(0,nU.s)(),[o,l]=(0,d.useState)(!1),[c,u]=(0,d.useState)(),[m,h]=(0,d.useReducer)(ix,{commitMessage:1===e.length?`Apply suggestion from @${e[0]}`:1===new Set(e).size?`Apply suggestions from @${e[0]}`:"Apply suggestions from code review",extendedDescription:""}),f=(0,d.useCallback)((e,t,n)=>{if(!r())return;let i="There was an error trying to commit changes";n?i+=`: ${n}`:i+=".",l(!1),u(i)},[r]),p=(0,d.useCallback)(()=>{r()&&(l(!1),c&&u(void 0))},[c,r]),g=(0,d.useCallback)(()=>{o||(l(!0),s("comments.commit_suggestion","COMMIT_SUGGESTION_DIALOG_BUTTON",{batchSize:t}),i(`${m.commitMessage}

${m.extendedDescription}`,f,p))},[t,m.commitMessage,m.extendedDescription,p,f,o,i,s]);return(0,a.jsxs)(el.l,{title:"Apply suggestion",renderFooter:()=>(0,a.jsx)(ip,{footerButtons:[{content:"Cancel",onClick:n},{content:(0,a.jsxs)("span",{className:"d-flex flex-row flex-items-center",children:["Commit changes",o&&(0,a.jsx)(tw.A,{size:"small",className:"ml-1"})]}),onClick:g,buttonType:"primary"}],children:c&&(0,a.jsx)(im.A.Validation,{variant:"error",className:"mt-2 pt-1 flex-justify-end",children:c})}),onClose:n,children:[(0,a.jsxs)(im.A,{className:"mb-2",children:[(0,a.jsx)(im.A.Label,{children:"Commit message"}),(0,a.jsx)(ew.A,{block:!0,name:"commit_message",onChange:e=>h({type:ig.CHANGE_COMMIT_MESSAGE,payload:e.target.value}),value:m.commitMessage})]}),(0,a.jsxs)(im.A,{children:[(0,a.jsx)(im.A.Label,{children:"Extended description (optional)"}),(0,a.jsx)(ih.Ay,{block:!0,rows:3,placeholder:"Add an optional description...",onChange:e=>h({type:ig.CHANGE_EXTENDED_DESCRIPTION,payload:e.target.value}),value:m.extendedDescription})]})]})}try{ip.displayName||(ip.displayName="DialogFooter")}catch{}try{iy.displayName||(iy.displayName="ApplySuggestionDialog")}catch{}function ib({reason:e,className:t="m-2"}){return(0,a.jsx)("div",{className:t,children:(0,a.jsx)("small",{className:"fgColor-muted",children:e})})}try{ib.displayName||(ib.displayName="CodeSuggestionUnavailable")}catch{}function iC({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let i=(0,d.useRef)(null),r=(0,d.useCallback)(()=>{t(i)},[t]),s=e.pendingSuggestedChangesBatch.length,{sendAnalyticsEvent:o}=(0,nU.s)();return(0,a.jsxs)("div",{className:"d-flex flex-row flex-justify-between",children:[(0,a.jsx)(G.A,{variant:"attention",className:"my-auto",children:"Pending in batch"}),(0,a.jsxs)("div",{className:"d-flex gap-2",children:[(0,a.jsx)(H.Q,{size:"medium",variant:"danger",onClick:()=>{e.removeSuggestedChangeFromPendingBatch(n),o("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},children:"Remove from batch"}),(0,a.jsx)(H.Q,{ref:i,size:"medium",count:s,variant:"primary",onClick:r,children:`Apply suggestion${s>1?"s":""}`})]})]})}try{iC.displayName||(iC.displayName="CommitOrRemoveFromBatch")}catch{}function iv({commentingImplementation:e,suggestedChange:t}){let{setIsDialogOpen:n}=(0,d.useContext)(nb),[i,r]=(0,d.useState)(!1),s=(0,d.useRef)(void 0),{pendingSuggestedChangesBatch:o,submitSuggestedChanges:l}=e,c=o.some(e=>{var n,i;let r,a;return n=e,i=t,n.commentId===i.commentId&&n.path===i.path&&n.suggestion.length===i.suggestion.length&&(r=n.suggestion,a=i.suggestion,r.length===a.length&&!r.some((e,t)=>e!==a[t]))}),u=0===o.length,{isValid:m,reason:h}=function(e,t){let n={isValid:!1,reason:nK.INVALID_RANGE},i={isValid:!1,reason:nK.BATCH_TOO_BIG};return t.length>=50?i:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let r of t)if(e.path===r.path){var n,i;return n=e.lineRange,i=r.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber}return!1}(e,t)?n:{isValid:!0}}(t,o),f=(0,d.useMemo)(()=>c?o:[t],[c,o,t]),p=(0,d.useCallback)(e=>{r(e),n?.(e)},[n]),g=(0,d.useCallback)(()=>{if(p(!1),s.current){let e=s.current.current;setTimeout(()=>e?.focus())}},[p]),x=(0,d.useCallback)(e=>{p(!0),s.current=e},[p,s]),y=(0,d.useCallback)((e,t,n)=>{l({suggestedChanges:f,commitMessage:e,onCompleted:()=>{g(),n()},onError:t})},[g,l,f]);return(0,a.jsxs)("div",{className:"border-top p-2",children:[c&&(0,a.jsx)(iC,{commentingImplementation:e,suggestedChange:t,onOpenDialog:x}),!c&&!m&&h&&(0,a.jsx)(ib,{reason:h,className:"m-0"}),!c&&u&&(0,a.jsx)(id,{commentingImplementation:e,suggestedChange:t,onOpenDialog:x}),!c&&m&&!u&&(0,a.jsx)(io,{commentingImplementation:e,suggestedChange:t}),i&&(0,a.jsx)(iy,{authorLogins:f.map(e=>e.authorLogin),batchSize:f.length,onClose:g,onCommit:y})]})}try{iv.displayName||(iv.displayName="CodeSuggestionActions")}catch{}function iN({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:n,commentingImplementation:i,filePath:r,isOutdated:s,isThreadResolved:o,subject:l,suggestedChangesConfig:c,databaseId:u,viewerData:m}){let h=function(e,t,n,i,r){let[a,s]=(0,d.useState)();return(0,th.N)(()=>{if(!e.current||t.subjectType?.toUpperCase()!=="LINE")return;let a=[...e.current.getElementsByClassName("js-apply-changes")];if(a.length>0){let e=[];for(let s of a){let a=s?.closest("div.js-suggested-changes-blob");if(!a)continue;let o=[...a.querySelectorAll(".js-blob-code-addition")];r.lineRange&&e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,path:n,ref:s,suggestion:o.map(e=>e.textContent),lineRange:r.lineRange,threadId:i})}s(e)}},[r.lineRange,t.author?.login,t.bodyHTML,t.id,t.subjectType,e,n,i]),a}(n,t,r,u,e),f=l?.state?.toUpperCase();return(0,a.jsx)(a.Fragment,{children:h?.length?h.map(n=>{let{isValid:r,reason:d}=function({suggestedChange:e,isOutdated:t,isPending:n,isResolved:i,pullRequestIsClosed:r,pullRequestIsInMergeQueue:a,userCanApplySuggestion:s,applySuggestedChangesValidationData:o,suggestedChangesConfig:l}){let{lineRange:c}=o;if(t)return{isValid:!1,reason:nK.IS_OUTDATED};if(n)return{isValid:!1,reason:nK.IS_PENDING};if(i)return{isValid:!1,reason:nK.IS_RESOLVED};if(r)return{isValid:!1,reason:nK.PULL_REQUEST_IS_CLOSED};if(a)return{isValid:!1,reason:nK.PULL_REQUEST_IS_IN_MERGE_QUEUE};if(!s)return{isValid:!1,reason:nK.USER_CANNOT_APPLY_SUGGESTION};if(!c)return{isValid:!1,reason:nK.RANGE_NOT_PROVIDED};if(!l)return{isValid:!1,reason:nK.UNABLE_TO_DETERMINE_VALIDITY};if(!l?.isValidSuggestionRange)return{isValid:!1,reason:nK.DELETED_LINES};let d=l?.sourceContentFromDiffLines,u=e.suggestion.join(`
`);return 0!==e.suggestion.length&&u===d?{isValid:!1,reason:nK.UNCHANGED_CODE}:{isValid:!0}}({suggestedChange:n,isOutdated:s,isPending:"PENDING"===t.state.toUpperCase(),isResolved:o,pullRequestIsClosed:void 0===f||"CLOSED"===f||"MERGED"===f,pullRequestIsInMergeQueue:!!l?.isInMergeQueue,userCanApplySuggestion:!!m?.viewerCanApplySuggestion,applySuggestedChangesValidationData:e,suggestedChangesConfig:c});return!r&&d?(0,is.createPortal)((0,a.jsx)(ib,{reason:d}),n.ref):(0,is.createPortal)((0,a.jsx)(iv,{commentingImplementation:i,suggestedChange:n}),n.ref)}):null})}try{iN.displayName||(iN.displayName="SuggestedChangeView")}catch{}function ij({isAnchorable:e=!1,index:t=0,isInlineComment:n,isLastChild:i,isOutdated:r,isThreadResolved:s,anchorPrefix:o="r",comment:l,commentingImplementation:c,filePath:m,hideActions:h,isFirstComment:f=!1,enterDialogMode:p=eb.l,onRefreshThread:g,onQuoteReply:x=eb.l,subjectId:y,subject:b,threadCommentCount:C,threadId:v,threadPositionNumber:j,threadsConnectionId:w,suggestedChangesConfig:_,applySuggestedChangesValidationData:S,viewerData:L,ghostUser:I=n8.t.ghostUser,skipReactions:T=!1,originalDiffPathUri:D}){let{addToast:R}=(0,ir.Y6)(),[A,M]=(0,d.useState)(!1),[O,$]=(0,d.useState)(l.isHidden),[B,U]=(0,d.useState)(l.body),[F,H]=(0,d.useState)(!1),[z,V]=(0,d.useState)(""),{persistCommentToStorage:G,removePersistedCommentFromStorage:W}=nZ({subjectId:y,filePath:m,fileLevelComment:"FILE"===l.subjectType,threadId:l.id,handlePersistedCommentExists:({text:e})=>{e&&U(e)}}),{blockUserFromOrg:K,unblockUserFromOrg:q,editComment:X,deleteComment:Q,hideComment:J,unhideComment:Y,reactToComment:Z,lazyFetchReactionGroups:ee}=c,et=!!K,en=!!q,ei=(0,d.useRef)(null),er=(0,d.useRef)(null),[ea,es]=(0,d.useState)(""),{isInDialogMode:eo}=nl(),el=()=>{ei.current?.focus()};(0,d.useEffect)(()=>{if(A){let e=window.setTimeout(el);return()=>{window.clearTimeout(e)}}},[A]);let ec=(0,ia.S)(),{enableInlineCommentDialogMode:ed,disableInlineCommentDialogMode:eu}=nl(),em=async()=>{eu();let e=!1;try{e=await ec({title:"Delete comment?",content:"Are you sure you want to delete this comment?",confirmButtonContent:"Delete",confirmButtonType:"danger"})}finally{ed()}e&&Q({commentId:l.id,onCompleted:()=>{g?.(v)},onError:()=>{H(!1),R({type:"error",message:"Failed to delete comment"})},threadCommentCount:C,threadId:v,threadsConnectionId:w,filePath:m})},eh=(0,d.useCallback)((e,t,n,i,r,a)=>{K&&K({duration:e,shouldHideComment:t,hiddenReason:n,organizationLogin:i,notifyBlockedUser:r,userLogin:a,onCompleted:()=>{t&&$(!0),g?.(v)},onError:()=>{es("Failed to block user")}})},[K,g,v]),ef=(0,d.useCallback)((e,t)=>{q&&q({organizationLogin:e,userLogin:t,onCompleted:()=>{g?.(v)},onError:()=>{es("Failed to unblock user")}})},[g,v,q]),ep=(0,d.useCallback)(()=>{H(!0);let e=n0(B,_?.sourceContentFromDiffLines??"");if(!e.isValid){V(e.errorMessage),H(!1);return}X({text:B,comment:l,onCompleted:()=>{M(!1),H(!1),W(),g?.(v)},onError:()=>{H(!1),R({type:"error",message:"Failed to update comment"})}})},[R,B,l,X,g,W,_,v]),eg=l.databaseId?.toString(),ex=eg?`${o}${eg}`:void 0,ey=ex&&N.fV?new URL(`${N.fV.pathname}#${ex}`,N.fV.origin).toString():"",eC=(0,d.useRef)(null);(0,d.useEffect)(()=>{e&&eg&&ex&&window.location.hash.split("#").pop()===ex&&(nW(eg,o),p?.(!1),eC.current?.focus())},[o,ex,eg,p,e]);let ev={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},eN=t>0,ej=t>1,ew=c.suggestedChangesEnabled,e_=A?"editing":O?"hidden":"visible",eS={headingProps:{as:"h3"},avatarUrl:l.author?.avatarUrl??I.avatarUrl,comment:{...l,url:ey,referenceText:l.reference.text??`#${l.reference.number}`},commentRef:eC,deleteComment:em,editComment:()=>{M(!0)},editHistoryComponent:void 0,hideComment:e=>{J({commentDatabaseId:l.databaseId,reason:e,onCompleted:()=>{$(!0),g?.(v)},onError:()=>{H(!1),es("Failed to hide comment")}})},onBlock:et?eh:void 0,onUnblock:en?ef:void 0,onMinimize:$,onSuccessfulBlock:()=>{setTimeout(()=>N.cg?.location.reload(),800)},isMinimized:O,commentAuthorLogin:l.author?.login??I.login,navigate:eb.l,commentSubjectAuthorLogin:l.reference?.author?.login??"",commentSubjectType:c.commentSubjectType,onReplySelect:x,unhideComment:()=>{Y({commentDatabaseId:l.databaseId,onCompleted:()=>{$(!1),g?.(v)},onError:()=>{H(!1),es("Failed to unhide comment")}})},hideActions:h,isReply:eN,forceInlineAvatar:!0,containerStyle:{},originalDiffPathUri:D,isOutdated:r,commentAuthorSlug:"copilot"===l.reviewVariantType?"copilot-pull-request-reviewer":void 0,commentAuthorType:"copilot"===l.reviewVariantType?"Bot":void 0};return(0,a.jsxs)(nG.A,{ref:eC,id:e?ex:void 0,tabIndex:n?eo?0:-1:0,"data-first-thread-comment":f,"data-marker-navigation-comment-thread-id":v,"data-marker-navigation-comment-id":l.id,...eo?{role:"document","aria-roledescription":"comment","aria-label":eN?void 0!==j?`Reply ${t} to Comment ${j}`:`Reply ${t}`:void 0!==j?`Comment ${j}`:"Comment"}:{},sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":ev,":focus":ev,scrollMarginTop:e?"120px":0},children:[ej&&(0,a.jsx)(nG.A,{sx:{display:"flex",pl:+!!eN},children:(0,a.jsx)(nG.A,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,a.jsx)(nG.A,{sx:{px:3,pt:2*!ej,pb:0},children:(0,a.jsx)(n9.v,{...eS,commentBody:l.body,threadCommentCount:C,isInDialogMode:eo,actions:h?void 0:(0,a.jsx)(n5.p,{...eS}),isOutdated:r})}),ea&&(0,a.jsxs)(k.A,{variant:"danger",className:"m-3",children:[(0,a.jsx)(u.StopIcon,{className:"mr-2"}),ea]}),(0,a.jsxs)(nG.A,{sx:{display:"flex",pl:+!!eN},children:[eN&&(0,a.jsx)(nG.A,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...i&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),"editing"===e_&&(0,a.jsx)("div",{className:(0,E.$)("flex-1 min-width-0 pr-2 pt-1 pb-2",eN?"pl-0":"pl-2"),children:(0,a.jsxs)(n3,{ref:ei,label:"Update comment",value:B,onChange:e=>{G({text:e}),U(e),V(void 0)},onPrimaryAction:ep,subject:c.commentBoxSubject,suggestedChangesConfig:_,markdownErrorMessage:z,children:[(0,a.jsx)(n4.x,{variant:"default",onClick:()=>{M(!1),W(),U(l.body)},children:"Cancel"}),(0,a.jsx)(n4.x,{disabled:F||!B.length,variant:"primary",onClick:ep,children:"Update"})]})}),"visible"===e_&&(0,a.jsx)(nG.A,{sx:eN?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:l.bodyHTML&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.vb,{ref:er,className:"markdown-body","comment-testid":`Comment body html for comment ${l.id}`,html:l.bodyHTML,sx:{mt:1,fontSize:1}}),"copilot"===l.reviewVariantType&&(0,a.jsxs)("p",{className:"text-small color-fg-muted mt-2 mb-1",children:[(0,a.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"Link--inTextBlock",href:"https://docs.github.com/en/copilot/responsible-use-of-github-copilot-features/responsible-use-of-github-copilot-code-review",children:"Copilot"})," ","uses AI. Check for mistakes."]}),(0,a.jsxs)("div",{className:"d-flex flex-direction-column gap-2",children:["copilot"===l.reviewVariantType&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(n7.Z,{commentUrl:l.url,commentId:l.databaseId?.toString()??""})}),l.reactionGroups&&Z?(0,a.jsx)("div",{className:"d-flex flex-direction-column mt-2",children:(0,a.jsx)(ie.P,{reactionGroups:l.reactionGroups,onReact:(e,t)=>{Z?.({commentDatabaseId:l.databaseId,threadId:v,reaction:e,viewerHasReacted:t,onCompleted:()=>{g?.(v)},onError:()=>{H(!1),R({type:"error",message:"Failed to react to comment"})}})},canReact:l.viewerCanReact})}):!T&&(0,a.jsx)(nG.A,{sx:{display:"flex",flexDirection:"column",mt:3},children:ee?(0,a.jsx)(d.Suspense,{fallback:(0,a.jsx)(it.e,{}),children:(0,a.jsx)(ii.ReactionViewerRelayQueryComponent,{id:l.id,subjectLocked:!l.viewerCanReact})}):(0,a.jsx)(ii.ReactionViewerRelay,{reactionGroups:l,subjectId:l.id,canReact:l.viewerCanReact})})]}),ew&&S&&(0,a.jsx)(iN,{comment:l,commentBodyRef:er,commentingImplementation:c,filePath:m,isOutdated:r,isThreadResolved:s,databaseId:l.databaseId,suggestedChangesConfig:_,applySuggestedChangesValidationData:S,subject:b,viewerData:L})]})})]})]})}try{ij.displayName||(ij.displayName="ReviewThreadComment")}catch{}let iw={StaticDiffPreview:"StaticUnifiedDiffPreview-module__StaticDiffPreview--DNR9v",HeaderContainer:"StaticUnifiedDiffPreview-module__HeaderContainer--KpYuj"};function i_({subject:e,tabSize:t,hideHeaderDetails:n,className:i,diffTableClassName:r}){if(!e?.diffLines||e?.diffLines.length<1)return null;let s=(0,eK.c7)(e.diffLines);return(0,a.jsxs)("div",{className:(0,E.$)(iw.StaticDiffPreview,i),children:[!n&&(0,a.jsx)("div",{className:iw.HeaderContainer,children:(0,a.jsxs)("span",{className:"text-small fgColor-muted",children:["Line"," ",(0,y.Ah)({originalStartLine:e.originalStartLine,originalEndLine:e.originalEndLine,startDiffSide:e.startDiffSide,endDiffSide:e.endDiffSide}),", commit ",(0,a.jsx)("code",{children:e.pullRequestCommit?.commit.abbreviatedOid})]})}),(0,a.jsx)(y.l4,{lineWidth:s,lines:e.diffLines,tabSize:t,className:r})]})}try{i_.displayName||(i_.displayName="StaticUnifiedDiffPreview")}catch{}function iS({batchingEnabled:e,batchPending:t,commentAnchorPrefix:n,commentingImplementation:i,commentsConnectionId:r,filePath:s,hideDiffPreview:o,isInlineComment:l,onRefreshThread:c,enterDialogMode:u,repositoryId:m,subject:h,subjectId:f,tabSize:p,thread:g,threadPositionNumber:x,threadsConnectionId:y,shouldLimitHeight:b=!0,suggestedChangesConfig:C,viewerData:v,ghostUser:j}){let[w,_]=(0,d.useState)(!1),[S,E]=(0,d.useState)(void 0),{sendAnalyticsEvent:L}=(0,nU.s)(),{addThreadReply:k}=i,I=(0,d.useRef)(null),T=e=>{E(e),_(!0)};if(null===g.commentsData.comments||g.commentsData.comments.length<1)return null;let D=function(e){if(!e||"LINE"!==e.subjectType||!e.subject)return;let t=e.subject.startDiffSide??e.subject.endDiffSide;if(!t)return;if(e.isOutdated&&e.subject.originalStartLine&&e.subject.originalEndLine)return{endLineNumber:e.subject.originalEndLine,endOrientation:e.subject.endDiffSide||"RIGHT",startLineNumber:e.subject.originalStartLine,startOrientation:t};if(!e.subject.endLine||!e.subject.endDiffSide)return;let n=e.subject.startLine??e?.subject.endLine;return{endLineNumber:e.subject.endLine,endOrientation:e.subject.endDiffSide,startLineNumber:n,startOrientation:t||"RIGHT"}}(g),R="LINE"===g.subjectType?{lineRange:D}:void 0;return(0,a.jsx)("div",{"data-testid":"review-thread",children:(0,a.jsxs)(nG.A,{sx:b?{maxHeight:"40vh",overflowY:"auto"}:{},children:[!o&&g.isOutdated&&(0,a.jsx)(i_,{subject:g.subject,tabSize:p??4}),g.commentsData.comments.map((e,t)=>(0,a.jsx)(ij,{enterDialogMode:u,isAnchorable:!0,index:t,threadPositionNumber:x,isFirstComment:0===t,isInlineComment:l,isLastChild:t===g.commentsData.comments.length-1,anchorPrefix:n,comment:e,commentConnectionId:g.commentsData.__id,commentingImplementation:i,filePath:s,isOutdated:g.isOutdated,repositoryId:m,subject:h,subjectId:f,threadId:g.id,onRefreshThread:c,onQuoteReply:T,threadCommentCount:g.commentsData.comments.length,threadsConnectionId:y,isThreadResolved:!!g.isResolved,suggestedChangesConfig:C,applySuggestedChangesValidationData:R,viewerData:v,ghostUser:j},e.id)),g.reviewCommentsLimitExceeded&&(0,a.jsx)(e$.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${(g.reviewCommentsLimit||0)-1} replies are currently being shown.`,className:"m-3"}),g.viewerCanReply&&(0,a.jsxs)("div",{className:"rounded-bottom-2 p-2",children:[w&&(0,a.jsx)(n6,{batchingEnabled:e,batchPending:t,commentBoxSubject:i.commentBoxSubject,condensed:!1,fileLevelComment:!0,filePath:s,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{_(!1),L("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON"),N.cg?.requestAnimationFrame(()=>I.current?.focus())},repositoryId:m,quotedText:S,subjectId:f,threadId:g.id,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{let a=[];g.commentsData.__id&&a.push(g.commentsData.__id),r&&a.push(r),k({commentsConnectionIds:a,filePath:s,thread:g,text:e,submitBatch:i,onCompleted:e=>{e&&nW(e.toString()),t?.(),c?.(g.id)},onError:n,threadsConnectionId:y}),L("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:C}),!w&&(0,a.jsx)(nV.z,{ref:I,onClick:()=>{L("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),_(!0)},children:"Write a reply"})]})]})})}try{iS.displayName||(iS.displayName="ReviewThread")}catch{}function iE({children:e}){return(0,a.jsx)("span",{className:"text-semibold fgColor-default",children:e})}function iL({thread:e}){return void 0!==e&&e?.diffSide&&e.line?e.startLine&&e.startDiffSide?iI({thread:e}):ik({thread:e}):null}function ik({thread:e}){let t="LEFT"===e.diffSide?"L":"R";return(0,a.jsxs)("h2",{className:nz.inlineReviewThreadHeading,children:["Comment on line"," ",(0,a.jsxs)(iE,{children:[t,e.line]})]})}function iI({thread:e}){let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.diffSide?"L":"R";return(0,a.jsxs)("h2",{className:nz.inlineReviewThreadHeading,children:["Comment on lines"," ",(0,a.jsxs)(iE,{children:[t,e.startLine]})," ","to"," ",(0,a.jsxs)(iE,{children:[n,e.line]})]})}function iT({commentingImplementation:e,fileAnchor:t,filePath:n,threadId:i,threadPositionNumber:r,isOutdated:s,threads:o,threadsConnectionId:c,isFirstThread:m,enterDialogMode:h,ghostUser:f,manuallyUpdateCommentsWithThisThreadId:p,suggestedChangesConfig:g,...x}){let[y,b]=(0,d.useState)(void 0),{fetchThread:C,shouldRefetchThread:v}=e,N=(0,d.useRef)(null),j=(0,nB.A)("localStorage"),w=y?.isResolved,[_,S]=(0,d.useState)(""),[L,I]=(0,d.useState)(w??!1);(0,d.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${i}`);null!==e?I(JSON.parse(e)):w&&I(!0)},[w,i]);let T=(0,d.useCallback)(async(e,t=!0)=>{b(await C(e,t))},[C]);(0,d.useEffect)(()=>{T(i,!1)},[T,p,i]),nw({commentSubjectType:e.commentSubjectType,markerRef:N,isThread:!0,thread:y}),(0,d.useEffect)(()=>{y||T(i,!1)},[i,y,C,T]);let D=(0,d.useMemo)(()=>{if(t&&y&&y.subject?.startDiffSide&&y.subject?.endDiffSide&&y.subject?.startLine&&y.subject?.endLine&&g?.configureSuggestedChangesFromLineRange){let e=y.subject?.startLine??y?.subject?.endLine,n=y.subject?.startDiffSide??y?.subject?.endDiffSide,i={diffAnchor:t,endLineNumber:y?.subject?.endLine,endOrientation:y.subject?.endDiffSide==="LEFT"?"left":"right",startLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===n?"left":"right",startOrientation:"LEFT"===n?"left":"right"};return g?.configureSuggestedChangesFromLineRange(i)}},[t,y,g]);(0,d.useEffect)(()=>{y&&v?.(y)&&T(i,!0)},[T,v,y,i,o]);let{sendAnalyticsEvent:R}=(0,nU.s)(),{resolveThread:A,unresolveThread:M,resolvingEnabled:O}=e,$=o.find(e=>e.id===i);if(!y||!(y.commentsData.comments.length>0))return null;let P=!!y.isResolved,B=$?.commentsConnectionId,U=O&&y.commentsData.comments.some(e=>e.state?.toUpperCase()!=="PENDING");return(0,a.jsx)(l.t,{fallback:(0,a.jsx)(nH,{}),children:(0,a.jsxs)("div",{className:"rounded-2 bgColor-default",ref:N,children:[(0,a.jsxs)("div",{className:(0,E.$)("px-1",nz.ReviewThreadContainer),children:[(0,a.jsx)(V.K,{"aria-label":L?"Expand comment":"Collapse comment",icon:L?u.ChevronRightIcon:u.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{window.requestAnimationFrame(()=>{j.setItem(`reviewThreadIsCollapsed_${i}`,JSON.stringify(!L))}),I(e=>!e)},"data-is-first-collapse-button":m}),(0,a.jsx)(iL,{thread:$}),(0,a.jsxs)("div",{className:nz.ResolvableContainer,children:[P&&(0,a.jsx)(G.A,{variant:"secondary",children:"Resolved"}),U&&(0,a.jsx)(nF.m,{text:P?"Unresolve conversation":"Resolve conversation",type:"label",direction:"w",id:"resolve-conversation",children:(0,a.jsx)(V.K,{"aria-labelledby":"resolve-conversation",icon:P?u.CheckCircleFillIcon:u.CheckCircleIcon,sx:{color:P?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},variant:"invisible",onClick:P?()=>{y&&(M({threadId:y.id,onCompleted:()=>{v||T(y.id),I(!1),j.removeItem(`reviewThreadIsCollapsed_${i}`)},onError:()=>{S("Failed to unresolve thread")}}),R("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))}:()=>{y&&(A({threadId:y.id,onCompleted:()=>{v||T(y.id),I(!0),j.removeItem(`reviewThreadIsCollapsed_${i}`)},onError:()=>{S("Failed to resolve thread")}}),R("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON"))}})})]})]}),(0,a.jsxs)(d.Suspense,{fallback:(0,a.jsxs)("div",{className:nz.ThreadLoading,children:[(0,a.jsx)(tw.A,{}),(0,a.jsx)("p",{children:"Loading comments"})]}),children:[_&&(0,a.jsxs)(k.A,{variant:"danger",className:"m-2",children:[(0,a.jsx)(u.StopIcon,{className:"mr-2"}),_]}),!L&&(0,a.jsx)(iS,{enterDialogMode:h,commentingImplementation:e,commentsConnectionId:B,filePath:n,isInlineComment:!0,onRefreshThread:T,thread:y,threadPositionNumber:r,threadsConnectionId:c,suggestedChangesConfig:D,shouldLimitHeight:!1,...x,ghostUser:f})]})]})})}try{iE.displayName||(iE.displayName="Emphasis")}catch{}try{iL.displayName||(iL.displayName="ThreadBanner")}catch{}try{ik.displayName||(ik.displayName="SingleLineThreadBanner")}catch{}try{iI.displayName||(iI.displayName="MultineLineThreadBanner")}catch{}try{iT.displayName||(iT.displayName="InlineReviewThread")}catch{}let iD={[e9.Failure]:0,[e9.Warning]:1,[e9.Notice]:2};function iR(e){return(0,a.jsx)(nC,{children:(0,a.jsx)(iA,{...e})})}function iA({annotations:e,children:t,commentingImplementation:n,conversationListThreads:i,inlineMarkersRef:r,isMarkerListOpen:s,isRowSelected:o,fileAnchor:l,filePath:c,gutterSizeOffset:m,lineType:h,onAnnotationSelected:f,onCloseConversationList:p,onCloseFocusMode:g,onThreadSelected:x,returnFocusRef:y,selectedAnnotationId:b,selectedThreadId:C,threadsConnectionId:v,suggestedChangesConfig:N,manuallyUpdateCommentsWithThisThreadId:j,ghostUser:w,enterDialogMode:_,...S}){let L=(0,d.useCallback)(async e=>{let t=await n.fetchThread(e,!1);t&&i.push(t),I({})},[n,i]),[k,I]=(0,d.useState)({});(0,d.useEffect)(()=>{0===i.length&&j&&""!==j&&L(j)},[n,i.length,L,j]);let{isInDialogMode:T,enableInlineCommentDialogMode:D}=nl(),R=(0,d.useRef)(null),A=(0,d.useMemo)(()=>[...e].sort((e,t)=>iD[e.annotationLevel]-iD[t.annotationLevel]),[e]),M=(0,d.useMemo)(()=>t?[...i,{id:"new-comment"},...A]:[...i,...A],[t,i,A]);return!function({containerRef:e,markers:t,disabled:n=!1,focusInStrategy:i="previous",selectedMarkerId:r}){let a=(0,d.useRef)(void 0),s=(0,d.useRef)(void 0);(0,d.useEffect)(()=>{s.current=new MarkerNavigator(t,a.current?.focusedMarker?.id||r||void 0),a.current=s.current},[t,r]);let o=(0,d.useCallback)((e,t,n)=>{let i=n.key,r=!t?.hasAttribute("data-marker-id")&&!t?.hasAttribute("data-marker-navigation-comment-id");switch(!0){case r&&("ArrowUp"===i||"ArrowDown"===i||"ArrowRight"===i||"ArrowLeft"===i):return t?.closest("[data-marker-navigation-comment-id]")||t?.closest("[data-marker-id]")||void 0;case"ArrowUp"===i||"ArrowDown"===i:if(s.current&&t?.hasAttribute("data-marker-id")){let e=s.current.moveToNextMarker(i,t);if(e)return document.querySelector(`[data-marker-id="${e.id}"]`)||void 0;return t}if(s.current&&t?.hasAttribute("data-marker-navigation-comment-id")){let e=s.current.moveToNextMarkerItem(i,t);if(e)return document.querySelector(`[data-marker-navigation-comment-id="${e.id}"]`)||void 0}return t;case"ArrowRight"===i:if(t?.hasAttribute("data-marker-navigation-comment-id"))return t;if(t?.hasAttribute("data-marker-id"))return t?.querySelector('[data-first-thread-comment="true"]')||void 0;return t;case"ArrowLeft"===i:if(t?.hasAttribute("data-marker-id"))return t;if(t?.hasAttribute("data-marker-navigation-comment-id"))return t?.closest("[data-marker-id]")||void 0;return t;default:return t??void 0}},[s]);(0,tD.G)({containerRef:e,bindKeys:nv,getNextFocusable:o,focusableElementFilter:e=>e.hasAttribute("data-marker-id")||e.hasAttribute("data-marker-navigation-comment-id"),focusInStrategy:i,disabled:n},[o,n])}({containerRef:R,markers:M,disabled:!T,selectedMarkerId:C}),(0,a.jsxs)("div",{className:(0,E.$)("d-flex pt-1",T?nP.markersDialogActive:""),style:T?{marginRight:`-${m}`,backgroundColor:tu(h,!0,o)}:{marginRight:`-${m}`},onFocus:()=>{T||D()},"data-inline-markers":!0,ref:r,children:[(0,a.jsxs)("div",{className:nP.markersWrapper,ref:R,children:[i.map((e,t)=>(0,a.jsx)("div",{className:(0,E.$)("mt-1 border rounded-2 color-border-default color-shadow-small",t===M.length-1?"mb-1":"mb-2"),"data-first-marker":0===t,"data-marker-id":`${e.id}`,tabIndex:T?0:-1,children:(0,a.jsx)(iT,{threadPositionNumber:t+1,manuallyUpdateCommentsWithThisThreadId:j,enterDialogMode:_,isFirstThread:0===t,commentingImplementation:n,filePath:c,fileAnchor:l,threadId:e.id,isOutdated:e.isOutdated,threads:i,threadsConnectionId:v,onThreadSelected:x,suggestedChangesConfig:N,ghostUser:w,...S})},`review-thread-${e.id}`)),t,A.map((e,t)=>{let i=0===t&&e===M[0];return(0,a.jsx)(n$,{annotation:e,commentingImplementation:n,isFirstMarker:i},`annotation-${e.id}`)})]}),T&&(0,a.jsx)(V.K,{icon:u.UndoIcon,className:(0,E.$)(nP.closeMarkersDialogButton,"ml-2 position-relative",0===i.length?"mt-2":"mt-1"),"aria-label":"Return to code","data-exit-dialog-mode-button":"true",variant:"default",size:"small",onMouseUp:g,onKeyDown:e=>{("Enter"===e.key||"Space"===e.code)&&g()}})]})}try{iR.displayName||(iR.displayName="InlineMarkers")}catch{}try{iA.displayName||(iA.displayName="InlineMarkersInternal")}catch{}var iM=n(3971),iO=n(84217);function i$({addCommentDialogTitle:e,isLeftSide:t,filePath:n,lineNumber:i,onAddComment:r,onClose:s,viewerData:o,threadsConnectionId:l,showOnCloseIcon:c=!0,...d}){return(0,a.jsxs)("div",{className:"px-2 pb-2 pt-1",children:[(0,a.jsxs)("div",{className:"d-flex flex-justify-between flex-items-center",children:[(0,a.jsxs)(iO.A,{as:"h4",className:"f5 ml-1 pt-1 pb-2",children:[(0,a.jsx)(n_.r,{alt:o.login,size:24,src:o.avatarUrl||"",className:"mr-2"}),(0,a.jsx)("span",{children:e??"Add a comment"})]}),s&&c&&(0,a.jsx)(V.K,{variant:"invisible",icon:u.XIcon,onClick:s,"aria-label":"Cancel"})]}),(0,a.jsx)(n6,{focusOnMount:!0,condensed:!1,fileLevelComment:!1,filePath:n,lineNumber:i,onAddComment:({commentText:e,onCompleted:t,onError:i,submitBatch:a})=>{r({text:e,onError:i,onCompleted:(e,n)=>{n&&nW(n.toString()),t?.(e,n)},submitBatch:a,filePath:n,threadsConnectionId:l})},onCancelComment:s,side:t?"LEFT":"RIGHT",...d})]})}try{i$.displayName||(i$.displayName="StartThreadComment")}catch{}function iP({align:e="end",anchorRef:t,isOpen:n,isDialog:i=!0,returnFocusRef:r,onCloseCommentDialog:s,suggestedChangesConfig:o,...l}){let{sendAnalyticsEvent:c}=(0,nU.s)(),{isInDialogMode:u}=nl(),m=(0,d.useMemo)(()=>{if(n&&o?.configureSuggestedChangesFromLineRange)return o.configureSuggestedChangesFromLineRange(o?.selectedDiffRowRange,o?.shouldStartNewConversationWithSuggestedChange)},[n,o]);return n?i?(0,a.jsx)(iM.T,{align:e,anchorRef:t,focusZoneSettings:{disabled:!0},open:n,renderAnchor:null,focusTrapSettings:{disabled:!0},overlayProps:{id:"conversation-dialog",role:"dialog",width:"xlarge",preventOverflow:!1,returnFocusRef:r,sx:{borderRadius:2},"aria-label":"Add a comment",onClickOutside:eb.l,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:s,children:(0,a.jsx)(i$,{onClose:()=>{s(),c("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},suggestedChangesConfig:m,...l})}):(0,a.jsx)("div",{className:"rounded-2 bgColor-default","data-marker-id":"new-comment",tabIndex:u?0:-1,children:(0,a.jsx)(i$,{onClose:()=>{s(),c("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},showOnCloseIcon:!1,suggestedChangesConfig:m,...l})}):null}try{iP.displayName||(iP.displayName="StartConversation")}catch{}function iB({cellId:e,actionBarRef:t,onOpenInLineThread:n}){let{replaceSelectedDiffRowRange:i}=tg(),{fileAnchor:r}=tI(),[a,s]=(0,d.useState)(t),{annotations:o,openDialog:l,closeDialog:c,selectedAnnotationId:u,selectAnnotationId:m,selectedThreadId:h,selectThreadId:f,openContextMenuCell:p,openNewConversationCell:g,openMarkerDetailsCell:x,threads:y,anyMenuOpen:b}=nf(),{sendAnalyticsEvent:C}=(0,nU.s)(),v=(0,d.useMemo)(()=>g?.cellId===e,[e,g]),N=(0,d.useMemo)(()=>g?.withSuggestedChange,[g]),j=(0,d.useCallback)(t=>{n?.(),l("new-conversation",e,t)},[e,n,l]),w=(0,d.useCallback)(()=>{j()},[j]),_=(0,d.useCallback)(()=>{j({withSuggestedChange:!0}),C("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},[j,C]),S=(0,d.useCallback)(()=>{c("new-conversation")},[c]),E=(0,d.useMemo)(()=>p===e,[e,p]),L=(0,d.useCallback)(()=>{l("context-menu",e)},[e,l]),k=(0,d.useCallback)(()=>{s(t),L()},[t,L]),I=(0,d.useCallback)(()=>{c("context-menu")},[c]),T=(0,d.useCallback)(()=>{E?I():L()},[I,E,L]),D=(0,d.useCallback)(()=>{s(t),T()},[t,T]),R=(0,d.useMemo)(()=>x===e?h:void 0,[e,x,h]),A=(0,d.useMemo)(()=>x===e?u:void 0,[e,x,u]),M=(0,d.useCallback)(()=>{n?.()},[n]),O=tf((e,t={skipLineSelection:!1})=>{if(f(e),M(),t.skipLineSelection)return;let n=y.find(t=>t.id===e);if(n&&n.diffSide&&n.line){let e=n.startLine??n.line,t=n.startDiffSide??n.diffSide;i({diffAnchor:r,endLineNumber:n.line,endOrientation:"LEFT"===n.diffSide?"left":"right",startLineNumber:e,startOrientation:"LEFT"===t?"left":"right",firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right"})}});return{isNewConversationDialogOpen:v,startNewConversation:w,closeNewConversation:S,startNewConversationWithSuggestedChange:_,shouldStartNewConversationWithSuggestedChange:N,isContextMenuOpen:E,openContextMenu:L,openContextMenuFromActionBar:k,closeContextMenu:I,toggleContextMenu:T,toggleContextMenuFromActionBar:D,optimizedSelectedThreadId:R,optimizedSelectedAnnotationId:A,selectThread:O,selectAnnotation:tf((e,t={skipLineSelection:!1})=>{if(m(e),M(),t.skipLineSelection)return;let n=o.find(t=>t.id===e);n&&i({diffAnchor:r,endLineNumber:n.endLine,endOrientation:"right",startLineNumber:n.startLine,startOrientation:"right",firstSelectedLineNumber:n.startLine,firstSelectedOrientation:"right"})}),openMarkersDialog:M,closeMarkerListDialog:(0,d.useCallback)(()=>{c("marker-list")},[c]),annotations:o,returnFocusRef:a,threads:y,anyMenuOpen:b}}function iU({cellRef:e}){let{showActionBar:t,hideActionBar:n,anyMenuOpen:i}=nf(),[r,a]=(0,d.useState)(!1),s=(0,d.useCallback)(()=>{t()},[t]),o=(0,d.useCallback)(t=>{!i&&(e.current&&e.current.contains(t.relatedTarget)||n())},[i,e,n]),l=(0,d.useCallback)(()=>{t()},[t]),c=(0,d.useCallback)(()=>{!i&&(e.current===document.activeElement||e.current?.contains(document.activeElement)||n())},[i,e,n]),u=(0,d.useCallback)(t=>{e.current&&(i||(e.current.contains(t.relatedTarget)?e.current===t.relatedTarget&&a(!1):(n(),a(!1))))},[i,e,n]);return{isActionBarFocused:r,handleCellBlur:o,handleCellFocus:s,handleCellMouseEnter:l,handleCellMouseLeave:c,handleActionBarBlur:u,handleActionBarFocusCapture:(0,d.useCallback)(e=>{i||(e.stopPropagation(),a(!0))},[i]),handleActionBarKeydownCapture:(0,d.useCallback)(e=>{!i&&nn(e.key)&&e.stopPropagation()},[i])}}function iF({fileAnchor:e}){let{isSplit:t,isLeftSide:n,diffLine:i}=tI(),{selectedDiffRowRange:r}=tg(),{getDiffSingleLineCode:a,getUnifiedDiffMultiLineCode:s,getSplitDiffMultiLineCode:o}=function(e,t){let{selectedDiffLines:n,getDiffLinesByDiffAnchor:i}=tg();return{getUnifiedDiffMultiLineCode:()=>{let n=i(e);if(!n||!t)return"";let{startOrientation:r,endOrientation:a,startLineNumber:s,endLineNumber:o}=t,l=0,c=0;return n.length>1&&(l=n.findIndex(e=>"left"===r?e.left===s:e.right===s),c=n.findIndex(e=>"left"===a?e.left===o:e.right===o)),td(n.slice(l,c+1))},getDiffSingleLineCode:(t,n)=>{if(!t||!n)return"";let r=i(e)?.find(e=>"left"===t?e.left===n:e.right===n);return r?td([r]):""},getSplitDiffMultiLineCode:e=>void 0===e?"":"left"===e?td(n.leftLines):td(n.rightLines)}}(e,r);return(0,d.useCallback)(async()=>{let e=window.getSelection();return e&&""!==e.toString()?void document.execCommand("copy"):void 0===r||r?.startOrientation===r?.endOrientation&&r?.startLineNumber===r?.endLineNumber?void await (0,ng.D)(a(n?"left":"right",n?i?.left:i?.right)):t?void await (0,ng.D)(o(n?"left":"right")):void await (0,ng.D)(s())},[r,t,s,a,n,i?.left,i?.right,o])}function iH(e,t){switch(t){case"SHOW_MARKERS":return{userMinimized:!1,showMarkers:!0};case"USER_EXPANDED_MARKERS":return{showMarkers:!0,userMinimized:!1};case"USER_MINIMIZED_MARKERS":return{userMinimized:!0,showMarkers:!1};case"USER_EXITED_MARKERS_DIALOG":return{...e,showMarkers:!1}}}var iz=n(64515);let iV={"action-bar-position":"ActionBar-module__action-bar-position--oh8aA","left-action-bar":"ActionBar-module__left-action-bar--dnkHz","left-action-bar-draft-compact":"ActionBar-module__left-action-bar-draft-compact--UkLHl","left-action-bar-draft-relaxed":"ActionBar-module__left-action-bar-draft-relaxed--lG7rU","left-action-bar-new":"ActionBar-module__left-action-bar-new--_MHYJ",addCommentButtonNew:"ActionBar-module__addCommentButtonNew--teXNI",actionBarArrowSizing:"ActionBar-module__actionBarArrowSizing--KcVe8",actionBarHeight:"ActionBar-module__actionBarHeight--SF4O1",actionBarStartCommentWidth:"ActionBar-module__actionBarStartCommentWidth--FFL02","action-bar-button-group":"ActionBar-module__action-bar-button-group--BpWMX"};var iG=n(70892);let iW={commentIndicatorContainer:"CommentIndicator-module__commentIndicatorContainer--YLtXK",AvatarStack:"CommentIndicator-module__AvatarStack--YjVsp",Compact:"CommentIndicator-module__Compact--gCLe3",Relaxed:"CommentIndicator-module__Relaxed--aveJ9",textStyles:"CommentIndicator-module__textStyles--y3tqp"},iK={compact:{avatarSize:18},relaxed:{avatarSize:20}};function iq({shouldAnimateRef:e,lineSpacingPreference:t="relaxed"}){let{diffLine:n}=tI(),{ghostUser:i}=e2();(0,d.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let{avatarSize:r}=iK[t],s=(n.threadsData?.totalCommentsCount||0)+(n.annotationsData?.totalCount||0);if(0===s)return null;let o={},l=[];n.annotationsData?.annotations?.map(e=>{e?.annotationLevel&&l.push({id:e.id,level:e.annotationLevel})}),n.threadsData?.threads?.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?o[e?.author.login]=e.author:i?.login&&(o[i.login]=i)}));let c=[...l.sort((e,t)=>(nR[e.level]?.priority||0)<(nR[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,a.jsx)(nD,{annotationLevel:t.level},t.id):(0,a.jsx)(nI,{annotationLevel:t.level},t.id)),...Object.keys(o).map(e=>{let t=o[e]?.login,n=o[e]?.avatarUrl??(i?.avatarUrl||" ");return(0,a.jsx)(n_.r,{alt:t,size:20,src:n},t)})].slice(0,3),u=s>9?"9+":`${s}`;return(0,a.jsxs)("div",{className:(0,E.$)("d-flex","flex-justify-between","flex-items-center",iW.commentIndicatorContainer),children:[(0,a.jsx)(iG.A,{disableExpand:!0,size:r,className:(0,E.$)(iW.AvatarStack,"relaxed"===t?iW.Relaxed:iW.Compact),children:c}),(0,a.jsx)("span",{className:(0,E.$)("fgColor-default","ml-1",iW.textStyles),children:u})]})}try{iq.displayName||(iq.displayName="CommentIndicator")}catch{}var iX=n(94800),iQ=n(96339);function iJ(){let{nextHunk:e,currentHunk:t,previousHunk:n}=tI(),{addInjectedContextLines:i}=e2(),r=!!t&&0!==t.startBlobLineNumber,a=!!t&&!!e;return{expandStartOfHunk:()=>{r&&t&&i({start:Math.max(0,t.startBlobLineNumber-20),end:t.startBlobLineNumber})},expandEndOfHunk:()=>{a&&t&&i({start:t.endBlobLineNumber+1,end:t.endBlobLineNumber+1+20})},expandEndOfPreviousHunk:()=>{n&&i({start:n.endBlobLineNumber+1,end:n.endBlobLineNumber+1+20})},canExpandEndOfHunk:a,canExpandStartOfHunk:r}}let iY={left:"L",right:"R"},iZ="Add comment",i0="Suggest change";function i1(e,t,n){let i=n&&!tn(t)?iY.left:iY.right;return`${e} on line ${i}${t.blobLineNumber}`}function i2({handleStartConversationWithSuggestedChange:e,handleStartConversation:t}){let n,i,r,{selectedDiffRowRange:s,selectedDiffLines:o,replaceSelectedDiffRowRange:l}=tg(),{commentingEnabled:c}=e2(),{diffLine:m,isLeftSide:h,isSplit:f,diffContext:p}=tI(),g=(0,d.useMemo)(()=>o.leftLines[0],[o.leftLines]),x=(0,d.useMemo)(()=>o.leftLines[o.leftLines.length-1],[o.leftLines]),y=(0,d.useMemo)(()=>o.leftLines.every(e=>!tt(e)&&"DELETION"!==e.type),[o.leftLines]),b=(0,d.useMemo)(()=>o.rightLines[0],[o.rightLines]),C=(0,d.useMemo)(()=>o.rightLines[o.rightLines.length-1],[o.rightLines]),v=(0,d.useMemo)(()=>0===o.rightLines.length,[o.rightLines]),N=(0,d.useMemo)(()=>0===o.leftLines.length,[o.leftLines]),j=(0,d.useMemo)(()=>!(o.leftLines.find(e=>!tt(e)&&!tn(e)&&"INJECTED_CONTEXT"!==e.type)||o.rightLines.find(e=>!tt(e)&&!tn(e)&&"INJECTED_CONTEXT"!==e.type)),[o.leftLines,o.rightLines]),w=(0,d.useCallback)((n,i)=>{!(!s||!x||!g||tt(x)||tt(g))&&g.left&&x.left&&(l({diffAnchor:s.diffAnchor,endLineNumber:x.left,endOrientation:"left",startLineNumber:g.left,startOrientation:"left",firstSelectedLineNumber:g.left,firstSelectedOrientation:"left"}),i?.withSuggestedChange?e():t())},[s,x,g,l,e,t]),_=(0,d.useCallback)((n,i)=>{!(!s||!C||!b||tt(C)||tt(b))&&b.right&&C.right&&(l({diffAnchor:s.diffAnchor,endLineNumber:C.right,endOrientation:"right",startLineNumber:b.right,startOrientation:"right",firstSelectedLineNumber:b.right,firstSelectedOrientation:"right"}),i?.withSuggestedChange?e():t())},[s,C,b,l,e,t]),S="DELETION"!==m.type&&("pr"===p||void 0===p),E=(0,d.useMemo)(()=>!!s&&(s.startOrientation!==s.endOrientation||s.startLineNumber!==s.endLineNumber),[s]);if(!c)return null;let L=!1,k=!1;if(s&&E){let o=iY[s.startOrientation],l=iY[s.endOrientation];return r=` on lines ${o}${s.startLineNumber}-${l}${s.endLineNumber}`,!tt(g)&&!tt(x)&&g&&x&&(L=!0,n=g.left===x.left?v?` on line L${g.left}`:`, original line L${g.left}`:v?` on lines L${g.left}-L${x.right}`:`, original lines L${g.left}-L${x.left}`),!tt(b)&&!tt(C)&&b&&C&&(k=!0,i=b.right===C.right?N||f&&j?` on line R${b.right}`:`, modified line R${C.right}`:N||f&&j?` on lines R${b.right}-R${C.right}`:`, modified lines R${b.right}-R${C.right}`),(0,a.jsx)(a.Fragment,{children:f?(0,a.jsx)(a.Fragment,{children:j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eo.l.Item,{onSelect:_,children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.PlusIcon,{})}),iZ+i,(0,a.jsx)(eo.l.TrailingVisual,{children:(0,a.jsx)(iQ.U,{keys:"Alt+n"})})]}),(0,a.jsxs)(eo.l.Item,{onSelect:e=>_(e,{withSuggestedChange:!0}),children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.PlusCircleIcon,{})}),i0+i]})]}):(0,a.jsxs)(a.Fragment,{children:[L?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eo.l.Item,{onSelect:w,children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.PlusIcon,{})}),iZ+n,(0,a.jsx)(eo.l.TrailingVisual,{children:(0,a.jsx)(iQ.U,{keys:v?"Alt+n":"Alt+Shift+N"})})]}),y&&(0,a.jsxs)(eo.l.Item,{onSelect:e=>w(e,{withSuggestedChange:!0}),children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.PlusCircleIcon,{})}),i0+n]})]}):null,k?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eo.l.Item,{onSelect:_,children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.PlusIcon,{})}),iZ+i,(0,a.jsx)(eo.l.TrailingVisual,{children:(0,a.jsx)(iQ.U,{keys:"Alt+n"})})]}),(0,a.jsxs)(eo.l.Item,{onSelect:e=>_(e,{withSuggestedChange:!0}),children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.PlusCircleIcon,{})}),i0+i]})]}):null]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eo.l.Item,{onSelect:t,children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.PlusIcon,{})}),iZ+r]}),S&&y&&(0,a.jsxs)(eo.l.Item,{onSelect:e,children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.PlusCircleIcon,{})}),i0+r]})]})})}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(eo.l.Item,{onSelect:t,children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.PlusIcon,{})}),i1(iZ,m,h)]}),S&&(0,a.jsxs)(eo.l.Item,{onSelect:e,children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.PlusCircleIcon,{})}),i1(i0,m,h)]})]})}try{i2.displayName||(i2.displayName="StartConversationContextMenuItems")}catch{}function i4(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i8,{...e}),(0,a.jsx)(i9,{fileDiffReference:e.copilotChatReference}),(0,a.jsx)(ri,{handleCopyCode:e.handleCopyCode}),(0,a.jsx)(i5,{}),(0,a.jsx)(i3,{}),(0,a.jsx)(rr,{})]})}function i3(){let{diffLine:e,fileAnchor:t}=tI(),{selectedDiffRowRange:n}=tg(),i=(0,d.useCallback)(()=>{let i=ts({line:e,range:n,fileAnchor:t});i&&(0,ng.D)(i)},[t,e,n]);return(0,a.jsxs)(eo.l.Item,{onSelect:i,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.LinkIcon,{})}),"Copy link",(0,a.jsx)(eo.l.TrailingVisual,{children:(0,a.jsx)(iQ.U,{keys:"Mod+Alt+y"})})]})}function i6(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ra,{}),(0,a.jsx)(i5,{})]})}let i9=e=>{let{selectedDiffRowRange:t}=tg(),{diffLine:n,isLeftSide:i,fileAnchor:r}=tI(),s=((e,t,n,i)=>{let r;if(e)return e;if(!tt(t)){let e=(n?t.left:t.right)??0,a=n?"left":"right";r={startOrientation:a,endOrientation:a,startLineNumber:e,endLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:a,diffAnchor:i}}return r})(t,n,i,r);return e.fileDiffReference?(0,a.jsx)(iX.w,{showDivider:!0,selectedRange:s,fileDiffReference:e.fileDiffReference}):null};function i5(){let{fileAnchor:e}=tI();return(0,a.jsxs)(eo.l.Item,{onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.MultiSelectIcon,{})}),"Select all",(0,a.jsx)(eo.l.TrailingVisual,{children:(0,a.jsx)(iQ.U,{keys:"Mod+a"})})]})}function i8({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t,showStartConversation:n,startConversationCurrentLine:i,startConversationWithSuggestedChange:r}){let{commentingEnabled:s}=e2(),{annotations:o,threads:l}=nf(),c=o.length>0;return s&&(n||l||c)?(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(i2,{handleStartConversation:i,handleStartConversationWithSuggestedChange:r}),(0,a.jsx)(i7,{handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}),(0,a.jsx)(eo.l.Divider,{})]}):null}function i7({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}){let{commentingEnabled:n}=e2(),{isSplit:i}=tI(),{viewerData:r}=e2();return n&&r.commentsPreference!==x.sI.Visible?i?(0,a.jsx)(re,{handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}):(0,a.jsx)(rt,{onSelect:()=>e(),shouldDisplayCollapseComments:t}):null}function re({handleViewMarkersSelection:e,shouldDisplayCollapseComments:t}){let{originalLineHasThreads:n,modifiedLineHasThreads:i,isLeftSide:r}=tI(),{annotations:s}=nf(),o=s.length>0;return r?(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(rn,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e("LEFT")}),(i||o)&&(0,a.jsx)(rn,{text:t?"Collapse comments, modified line":"Expand comments, modified line",onSelect:()=>e("RIGHT")})]}):(0,a.jsxs)(a.Fragment,{children:[(i||o)&&(0,a.jsx)(rn,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e("RIGHT")}),n&&(0,a.jsx)(rn,{text:t?"Collapse comments, original line":"Expand comments, original line",onSelect:()=>e("LEFT")})]})}function rt({onSelect:e,shouldDisplayCollapseComments:t}){let{ghostUser:n}=e2(),{diffLine:i}=tI(),{annotations:r}=nf();return i&&tT(i.threadsData,n).length>0||r.length>0?(0,a.jsx)(rn,{text:t?"Collapse comments":"Expand comments",onSelect:()=>e()}):null}function rn({onSelect:e,text:t}){return(0,a.jsxs)(eo.l.Item,{onSelect:e,children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.CommentDiscussionIcon,{})}),t]})}function ri({handleCopyCode:e}){return(0,a.jsxs)(eo.l.Item,{onSelect:e,onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.CopyIcon,{})}),"Copy",(0,a.jsx)(eo.l.TrailingVisual,{children:(0,a.jsx)(iQ.U,{keys:"Mod+c"})})]})}function rr(){let{canExpandStartOfHunk:e,canExpandEndOfHunk:t}=iJ(),{previousHunk:n,nextHunk:i}=tI();return e||t||n||i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eo.l.Divider,{}),(0,a.jsx)(ra,{}),(0,a.jsx)(rs,{})]}):null}function ra(){let{canExpandStartOfHunk:e,expandEndOfHunk:t,expandStartOfHunk:n,canExpandEndOfHunk:i}=iJ();return(0,a.jsxs)(a.Fragment,{children:[e&&(0,a.jsxs)(eo.l.Item,{onSelect:n,children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.FoldUpIcon,{})}),"Expand above"]}),i&&(0,a.jsxs)(eo.l.Item,{onSelect:t,children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.FoldDownIcon,{})}),"Expand below"]})]})}function rs(){let{previousHunk:e,nextHunk:t}=tI(),{fileAnchor:n}=tI();return(0,a.jsxs)(a.Fragment,{children:[t?(0,a.jsxs)(eo.l.Item,{"aria-keyshortcuts":"PageDown",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.MoveToBottomIcon,{})}),"Go to next hunk",(0,a.jsx)(eo.l.TrailingVisual,{children:"Page Down"})]}):null,e?(0,a.jsxs)(eo.l.Item,{"aria-keyshortcuts":"PageUp",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.MoveToTopIcon,{})}),"Go to previous hunk",(0,a.jsx)(eo.l.TrailingVisual,{children:"Page Up"})]}):null]})}try{i4.displayName||(i4.displayName="CellContextMenu")}catch{}try{i3.displayName||(i3.displayName="CopyAnchorLink")}catch{}try{i6.displayName||(i6.displayName="EmptyCellContextMenu")}catch{}try{i5.displayName||(i5.displayName="SelectAllListItem")}catch{}try{i8.displayName||(i8.displayName="MarkerListItems")}catch{}try{i7.displayName||(i7.displayName="ViewMarkerListItems")}catch{}try{re.displayName||(re.displayName="SplitDiffMarkersListItems")}catch{}try{rt.displayName||(rt.displayName="UnifiedDiffMarkerListItem")}catch{}try{rn.displayName||(rn.displayName="MarkerListItem")}catch{}try{ri.displayName||(ri.displayName="CopyContentListItems")}catch{}try{rr.displayName||(rr.displayName="HunkListItems")}catch{}try{ra.displayName||(ra.displayName="ExpandHunksListItems")}catch{}try{rs.displayName||(rs.displayName="JumpToHunkListItems")}catch{}var ro=n(34582);function rl({authorAvatarUrl:e,authorLogin:t,lineSpacingPreference:n,sx:i}){return(0,a.jsx)(ro.k,{altText:`${t}'s avatar image with pending indicator`,icon:u.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,size:"compact"===n?18:20,src:e,backgroundSx:{backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",boxShadow:"0 0 0 .1px var(--bgColor-default, var(--color-canvas-default))"},sx:{alignItems:"center",display:"flex",height:"var(--diff-line-minimum-height)",...i}})}try{rl.displayName||(rl.displayName="InProgressCommentIndicator")}catch{}let rc=(0,d.forwardRef)(function({authorAvatarUrl:e,authorLogin:t,cellId:n,cellRef:i,showStartConversation:r,hasDraftComment:s,copilotChatReference:o,handleCopyCode:l,onOpenInLineThread:c,shouldDisplayCollapseComments:m,toggleViewingMarkers:h},f){let p=(0,d.useRef)(null),g=(0,d.useRef)(null),{commentingEnabled:y,viewerData:{lineSpacingPreference:b,commentsPreference:C}}=e2(),{diffLine:v}=tI(),N=(0,d.useRef)(null),j=p.current?p:g;(0,iz.T)(f,j);let w=v.threadsData?.totalCommentsCount||0,_=v.annotationsData?.totalCount||0,{isActionBarFocused:S,handleActionBarBlur:L,handleActionBarFocusCapture:k,handleActionBarKeydownCapture:I}=iU({cellRef:i}),{annotations:T,isContextMenuOpen:D,startNewConversation:R,startNewConversationWithSuggestedChange:A,anyMenuOpen:M,threads:O,toggleContextMenu:$,toggleContextMenuFromActionBar:P}=iB({cellId:n,actionBarRef:N,onOpenInLineThread:c}),B=y&&w+_>0&&C===x.sI.Collapsed,U=y&&r,F={onBlur:L,onFocusCapture:k,onKeyDownCapture:I};return(0,a.jsxs)(a.Fragment,{children:[U&&(0,a.jsx)("div",{"aria-hidden":!S,className:(0,E.$)("d-flex","flex-row",iV["left-action-bar"]),children:(0,a.jsx)(a.Fragment,{children:s?(0,a.jsx)(H.Q,{"aria-label":"Continue comment in progress",size:"small",className:(0,E.$)("py-0","compact"===b?iV["left-action-bar-draft-compact"]:iV["left-action-bar-draft-relaxed"],iV.actionBarHeight),onClick:R,...F,children:(0,a.jsx)(rl,{lineSpacingPreference:b,authorAvatarUrl:e,authorLogin:t})}):(0,a.jsx)(H.Q,{icon:u.PlusIcon,"aria-label":"Add comment",ref:g,size:"small",className:(0,E.$)("fgColor-muted","bgColor-accent-emphasis","fgColor-onEmphasis","px-0",iV["left-action-bar-new"],iV.addCommentButtonNew,iV.actionBarHeight,iV.actionBarStartCommentWidth),onClick:R,...F})})}),(0,a.jsx)("div",{"aria-hidden":!S,className:(0,E.$)("d-flex","flex-row",iV["action-bar-position"]),children:(0,a.jsxs)(il.A,{className:iV["action-bar-button-group"],...F,children:[B&&(0,a.jsx)(H.Q,{ref:p,"aria-expanded":M,"aria-label":"View comments",size:"small",className:(0,E.$)("py-0","px-1",iV.actionBarHeight),onClick:e=>{(1===O.length||1===T.length)&&e.preventDefault(),h?.()},children:(0,a.jsx)(iq,{lineSpacingPreference:b})}),(0,a.jsxs)(ny.W,{anchorRef:N,open:D,onOpenChange:$,children:[(0,a.jsx)(ny.W.Anchor,{children:(0,a.jsx)(H.Q,{ref:N,"aria-haspopup":"true","aria-label":"More actions",icon:u.TriangleDownIcon,size:"small",className:(0,E.$)("fgColor-muted",iV.actionBarArrowSizing),onClick:P})}),(0,a.jsx)(ny.W.Overlay,{width:"medium",children:(0,a.jsx)(eo.l,{children:(0,a.jsx)(i4,{shouldDisplayCollapseComments:m,copilotChatReference:o,showStartConversation:r,handleCopyCode:l,handleViewMarkersSelection:h,startConversationCurrentLine:R,startConversationWithSuggestedChange:A})})})]})]})})]})});rc.displayName="ActionBar";let rd={visibilityHidden:"DiffHighlightedOverlay-module__visibilityHidden--fvv62",userSelectNone:"DiffHighlightedOverlay-module__userSelectNone--c5FNR",focusedResultStyles:"DiffHighlightedOverlay-module__focusedResultStyles--jP0Xu",nonFocusedResultStyles:"DiffHighlightedOverlay-module__nonFocusedResultStyles--uQzKN",nonHunkStyles:"DiffHighlightedOverlay-module__nonHunkStyles--zZluZ"};function ru({searchResults:e,focusedSearchResult:t,className:n,styleObject:i}){let r=0,s=e[0]?.text??"",o=e[0]?.diffLineNumIndex??-1,l=`overlay-${o}-${s}`;return(0,a.jsxs)("span",{className:(0,E.$)(n,"position-absolute",rd.userSelectNone,!e[0].isHunk&&rd.nonHunkStyles),style:{...i},children:[e.map(e=>{var n,i;let o=e.indexWithinPathDigest===t,l=(0,a.jsxs)("span",{children:[(0,a.jsx)("span",{className:(0,E.$)(rd.visibilityHidden,rd.userSelectNone),children:s.substring(r,e.column)}),(0,a.jsx)("span",{className:(0,E.$)(rd.userSelectNone,o&&rd.focusedResultStyles,!o&&rd.nonFocusedResultStyles),children:(0,a.jsx)("span",{className:(0,E.$)(!o&&rd.visibilityHidden),id:(n=e.indexWithinPathDigest,i=e.pathDigest,`match-${i}-${n}`),children:s.substring(e.column,e.columnEnd)})})]},`find-match-${e.diffLineNumIndex}-${e.column}`);return r=e.columnEnd,l}),(0,a.jsx)("span",{className:(0,E.$)(rd.visibilityHidden,rd.userSelectNone),children:s.substring(r)})]},l)}try{ru.displayName||(ru.displayName="DiffHighlightedOverlay")}catch{}function rm({diffLine:e}){let t=function(e){let t=(e.annotationsData?.annotations??[]).length>0,n=(e.threadsData?.threads??[]).length>0;switch(!0){case t&&n:return"Code has comments and alerts. Press enter to view.";case n:return"Code has comments. Press enter to view.";case t:return"Code has alerts. Press enter to view.";default:return""}}(e);return t?(0,a.jsx)("span",{className:"sr-only user-select-none",children:t}):null}try{rm.displayName||(rm.displayName="DiffLineScreenReaderSummary")}catch{}let rh={"comment-indicator":"DiffLineTableCellParts-module__comment-indicator--ozCro","in-progress-comment-indicator":"DiffLineTableCellParts-module__in-progress-comment-indicator--igDiw"},rf=["CONTEXT","INJECTED_CONTEXT"];function rp(e){let{rowId:t}=tI();if(t)return te(t,e)}let rg=(0,d.forwardRef)(function({children:e,ContextMenu:t,className:n,columnIndex:i,handleDiffCellClick:r,handleDiffCellMouseDown:s,handleExitDialogMode:o,handleHideMarkersFromFocus:l,handleDiffSideCellSelectionBlocking:c,handleStartConversation:u,handleUserClosedMarkersDialog:m,lineAnchor:h,firstLineNumberSelection:f,commentDialogOpen:p,enterDialogMode:g,hasThreads:x,...y},b){let{diffLine:C,fileAnchor:v,isRowSelected:j,isLeftSide:w}=tI(),_=(0,d.useRef)(null);(0,d.useImperativeHandle)(b,()=>_.current,[]);let[S,E]=(0,d.useState)(!1),{selectedDiffRowRange:L}=tg(),{disableInlineCommentDialogMode:k,isInDialogMode:I}=nl(),T=(0,d.useRef)(null),D=(0,nx.U)(e=>{if(!e.target)return;let t=e.target;if(!S||T.current?.contains(t)||_.current?.contains(t)||2!==e.button?_.current?.contains(t)&&e.target.closest("button")?.contains(t)&&E(!1):E(!1),I){let t=!e.target.closest("[data-inline-markers]"),n=!e.target.closest("#__primerPortalRoot__");t&&n&&k()}});(0,d.useEffect)(()=>(N.XC?.addEventListener("mousedown",D),()=>N.XC?.removeEventListener("mousedown",D)),[D]),(0,d.useEffect)(()=>()=>N.XC?.removeEventListener("mousedown",D),[]);let R=(0,d.useCallback)(()=>{let e=ts({line:C,range:L,fileAnchor:v});e&&(0,ng.D)(e)},[v,C,L]),A=(0,d.useCallback)(()=>{f?.current&&(f.current=null)},[f]),M=(0,d.useCallback)(e=>{let t=e.target?.closest("td"),n=t?.classList.contains("diff-line-number");e.shiftKey?e.preventDefault():n?s?.():f&&(f.current=null),f&&n&&(f.current=w?C.left:C.right),c?.(e)},[c]),O=(0,d.useCallback)(()=>{_.current?.focus(),k(),o?.(),m?.()},[k,o,m]),$=iF({fileAnchor:v}),P=(0,d.useCallback)(async e=>{if(e.target===_.current&&(e?.metaKey||e?.ctrlKey)&&"c"===e.key){e.preventDefault(),await $();return}if(e.target===_.current&&(e?.metaKey||e?.ctrlKey)&&e.altKey&&"y"===e.key)return void R();if(_.current?.contains(e.target)&&e?.key==="Escape")return void O();if(_.current?.contains(e.target)&&"true"===e.target.getAttribute("data-exit-dialog-mode-button")&&!e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),_.current?.querySelector('[data-is-first-collapse-button="true"]')?.focus();return}if(_.current?.contains(e.target)&&"true"===e.target.getAttribute("data-is-first-collapse-button")&&e?.shiftKey&&e?.key==="Tab"){e.preventDefault(),_.current?.querySelector('[data-exit-dialog-mode-button="true"]')?.focus();return}e.target===_.current&&"Enter"===e.key&&(g?.(),!1===x&&u?.(),e.preventDefault())},[$,R,O,g,x,u]),B=`inline-dialog-heading-${(0,d.useId)()}`;return(0,a.jsxs)("td",{ref:_,"data-grid-cell-id":rp(i),"data-line-anchor":h,"data-selected":j,role:I?"dialog":"gridcell",style:{userSelect:"none",position:"relative"},tabIndex:-1,valign:"top",className:n?`focusable-grid-cell ${n} ${i<3?"left-side":""}`:"focusable-grid-cell",onKeyDown:P,onBlur:e=>e.target.ariaSelected="false",onClick:r,onFocus:e=>e.target.ariaSelected="true",onMouseDown:M,onMouseUp:A,"aria-labelledby":I?B:void 0,...y,children:[I&&(0,a.jsx)("h1",{id:B,className:"sr-only",children:"Comment view"}),e,t&&S&&(0,a.jsx)(ny.W,{anchorRef:_,open:!0,onOpenChange:E,children:(0,a.jsx)(ny.W.Overlay,{width:e?"medium":"small",children:(0,a.jsx)(eo.l,{children:t})})})]})});function rx(){let{isSplit:e}=tI();return(0,a.jsx)("div",{className:(0,E.$)("hunk-kebab-icon pr-2 pb-1",!e&&"hunk-kebab-icon-unified"),children:(0,a.jsx)(u.KebabHorizontalIcon,{})})}let ry=(0,d.forwardRef)(function({searchResultsForLine:e,focusedSearchResult:t,columnIndex:n,lineAnchor:i,firstLineNumberSelection:r,handleDiffCellClick:s,handleDiffSideCellSelectionBlocking:o,filePath:l,copilotChatReference:c},m){let{diffLine:h,fileAnchor:f,isLeftSide:p,isRowSelected:g}=tI(),y=(0,$.u)("react_diff_line_type_character_correction"),[b,C]=ti(h.html,h.type,y),v=C&&["+","-"].includes(C),[N,j]=(0,d.useState)(""),{isActionBarVisible:w}=nf(),{selectedDiffRowRange:_,selectedDiffLines:S}=tg(),{commentBatchPending:L,commentingEnabled:k,commentingImplementation:I,initialExpandedThreadId:T,markerNavigationImplementation:D,repositoryId:R,subjectId:A,subject:M,viewerData:O}=e2(),{hasPersistedComment:B}=nZ({diffSide:p?"LEFT":"RIGHT",filePath:l,line:h.blobLineNumber,subjectId:A,fileLevelComment:!1}),{isInDialogMode:U,enableInlineCommentDialogMode:F,disableInlineCommentDialogMode:H}=nl(),z=(0,d.useRef)(null),V=(0,d.useRef)(null);(0,d.useImperativeHandle)(m,()=>V.current,[]);let G=!!h.threadsData?.threads?.length||!!h.annotationsData?.annotations?.length,W=function({hasThreads:e}){return e?"80px":"24px"}({hasThreads:G&&O.commentsPreference===x.sI.Collapsed}),K=function(e,t,n){let{selectedDiffRowRange:i}=tg();return(0,d.useMemo)(()=>{let r="Add a comment on",a=!!i&&i.startLineNumber!==i.endLineNumber;if(i&&a&&n){let e={left:"L",right:"R"},t=e[i.startOrientation],n=e[i.endOrientation];r+=i.startLineNumber!==i.endLineNumber?` lines ${t}${i.startLineNumber} to ${n}${i.endLineNumber}`:` line ${t}${i.startLineNumber}`}else{let n=t&&!tn(e)?"L":"R";r+=` line ${n}${e.blobLineNumber}`}return r},[e,t,i,n])}(h,!!p,g),q=rp(n),{handleCellBlur:X,handleCellFocus:Q,handleCellMouseEnter:J,handleCellMouseLeave:Y}=iU({cellRef:V}),Z=(0,d.useRef)(null),[ee,et]=function(e){let[t,n]=(0,d.useReducer)(iH,{userMinimized:e===x.sI.Collapsed,showMarkers:!1}),i=(0,d.useRef)(e);return(0,d.useEffect)(()=>{i.current!==e&&(i.current=e,e===x.sI.Visible?n("SHOW_MARKERS"):n("USER_MINIMIZED_MARKERS"))},[e,n]),[t,n]}(O.commentsPreference),en=(0,d.useCallback)((e=!0)=>{V.current?.classList.contains("diff-text-cell")&&(F(),et("USER_EXPANDED_MARKERS"),e&&setTimeout(()=>{V.current?.querySelector('[data-first-marker="true"]')?.focus()},0))},[et,F]),ei=(0,d.useCallback)(()=>{setTimeout(()=>V.current?.focus()),H(),et("USER_MINIMIZED_MARKERS")},[H,et]),er=(0,d.useCallback)(()=>{O.commentsPreference===x.sI.Collapsed&&ee.showMarkers?ei():en()},[ei,en,ee.showMarkers,O.commentsPreference]),{annotations:ea,isNewConversationDialogOpen:es,shouldStartNewConversationWithSuggestedChange:eo,startNewConversation:el,startNewConversationWithSuggestedChange:ec,selectAnnotation:ed,selectThread:eu,closeNewConversation:em,closeMarkerListDialog:eh,returnFocusRef:ef,optimizedSelectedAnnotationId:ep,optimizedSelectedThreadId:eg,threads:ex}=iB({cellId:q,actionBarRef:z,onOpenInLineThread:en}),ey=(0,d.useMemo)(()=>{var e;return!es&&(e=O.viewerCanComment,k&&e&&((e,t)=>{if(!e)return!1;let n=t.leftLines.concat(t.rightLines);return n.length>0&&n.includes(e)?n.every(e=>!tt(e)&&tc.includes(e.type)):!tt(e)&&tc.includes(e.type)})(h,S))},[es,k,O.viewerCanComment,h,S]);(0,d.useEffect)(()=>{I&&T&&eg!==T&&ex.map(e=>e.id).includes(T)&&eu(T,{skipLineSelection:!0})},[T]),(0,d.useEffect)(()=>{if(!D)return;let{activeGlobalMarkerID:e}=D;if(e){let t=ex.map(e=>e.id),n=ea.map(e=>e.id);t.includes(e)?eu(e,{skipLineSelection:!0}):n.includes(e)&&ed(e,{skipLineSelection:!0})}},[eu,ex,D,ea,ed]);let eb=function(e,t,n){let{sendAnalyticsEvent:i}=(0,nU.s)(),{getDiffLinesFromLineRange:r,selectedDiffRowRange:a}=tg(),s=tf(function(n,a){if(!e)return;let s=function(e){if(!e)return"DELETION"!==t.type;if("right"===e.startOrientation&&"right"===e.endOrientation)return!0;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation)return"DELETION"!==t.type;let n=r(e)?.selectedLeftLines;return!!n?.every(e=>"empty-diff-line"!==e&&"DELETION"!==e.type)}(n);return{isValidSuggestionRange:s,showSuggestChangesButton:s,sourceContentFromDiffLines:s?function(e){let n=r(e)?.selectedRightLines;if(e&&n&&n.length>1)return td(n);if(!t)return"";let[i]=ti(t.text,t.type);return i}(n):void 0,onInsertSuggestedChange:()=>{i("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:a}});return(0,d.useMemo)(()=>({selectedDiffRowRange:a,configureSuggestedChangesFromLineRange:s,shouldStartNewConversationWithSuggestedChange:n}),[a,s,n])}(I?.suggestedChangesEnabled,h,eo),eC=(0,d.useCallback)(()=>{en?.(),el?.()},[en,el]),ev=(0,d.useCallback)(()=>{U||0!==(V.current?.querySelectorAll(":focus")??[]).length||H()},[H,U]),eN=(0,d.useRef)(!0),{ghostUser:ej}=e2(),ew=iF({fileAnchor:f}),e_=(0,d.useMemo)(()=>G&&O.commentsPreference===x.sI.Collapsed?!ee.userMinimized:(!!es||!!G)&&!!k&&(O.commentsPreference===x.sI.Collapsed&&(!!es||!!U)||O.commentsPreference===x.sI.Visible&&(!!G||!!es||!!ee.showMarkers)||!1),[k,G,U,es,ee.showMarkers,ee.userMinimized,O.commentsPreference]),eS=(0,d.useMemo)(()=>!!(h.text.length<1&&("CONTEXT"===h.type||"INJECTED_CONTEXT"===h.type)||("DELETION"===h.type||"ADDITION"===h.type)&&1===h.text.length&&["+","-"].includes(h.text.charAt(0))),[h]);return(0,a.jsxs)(rg,{ref:V,columnIndex:n,commentDialogOpen:es,handleDiffCellClick:s,enterDialogMode:en,handleDiffSideCellSelectionBlocking:o,handleExitDialogMode:()=>et("USER_EXITED_MARKERS_DIALOG"),handleUserClosedMarkersDialog:()=>et("USER_MINIMIZED_MARKERS"),lineAnchor:i,firstLineNumberSelection:r,handleStartConversation:eC,hasThreads:G,ContextMenu:(0,a.jsx)(i4,{shouldDisplayCollapseComments:e_,copilotChatReference:c,showStartConversation:ey,handleViewMarkersSelection:er,startConversationCurrentLine:eC,startConversationWithSuggestedChange:ec}),className:(0,E.$)(`diff-text-cell ${p?"left-side-diff-cell":"right-side-diff-cell"} ${eS?"pt-4":""}`,{"border-right":p&&"HUNK"!==h.type}),style:{backgroundColor:tu(h.type,!1,g),paddingRight:W},onBlur:e=>{X(e),ev()},onFocus:Q,onMouseEnter:J,onMouseLeave:Y,children:[(0,a.jsxs)("code",{className:(0,E.$)("diff-text syntax-highlighted-line",{addition:"ADDITION"===h.type,deletion:"DELETION"===h.type}),children:[v&&(0,a.jsx)("span",{className:"diff-text-marker",children:C}),e&&e.length>0&&(0,a.jsx)(ru,{searchResults:e,focusedSearchResult:t,className:(0,E.$)("diff-text-inner",{"color-fg-muted":"HUNK"===h.type})}),(0,a.jsx)(P.$6,{html:b,className:(0,E.$)("diff-text-inner",{"color-fg-muted":"HUNK"===h.type})})]}),h.displayNoNewLineWarning&&(0,a.jsx)(u.NoEntryIcon,{size:16,className:"fgColor-danger"}),w&&(0,a.jsx)(rc,{shouldDisplayCollapseComments:ee.showMarkers,copilotChatReference:c,authorAvatarUrl:O.avatarUrl,authorLogin:O.login,ref:z,cellId:q,cellRef:V,hasDraftComment:B,showStartConversation:ey,onOpenInLineThread:en,handleCopyCode:ew,toggleViewingMarkers:er}),I&&D&&(0,a.jsx)(a.Fragment,{children:e_?(0,a.jsx)(iR,{gutterSizeOffset:W,inlineMarkersRef:Z,manuallyUpdateCommentsWithThisThreadId:N,annotations:ea,enterDialogMode:en,batchPending:L,batchingEnabled:I.batchingEnabled,commentingImplementation:{...I,deleteComment:({onCompleted:e,...t})=>{I&&h&&I.deleteComment({...t,onCompleted:()=>{e?.(),ex.length<=1&&setTimeout(()=>V.current?.focus())},filePath:l})}},conversationListThreads:ex,fileAnchor:f,filePath:l,onCloseFocusMode:ei,isMarkerListOpen:!!V.current?.classList.contains("diff-text-cell")&&ex.length>0,isRowSelected:g,lineType:h.type,repositoryId:R,returnFocusRef:ef,selectedAnnotationId:ep,selectedThreadId:eg||(V.current?.classList.contains("diff-text-cell")&&ex.length>0?ex[0]?.id:null),subjectId:A,subject:M,suggestedChangesConfig:eb,onCloseConversationList:eh,onAnnotationSelected:ed,onThreadSelected:eu,viewerData:O,ghostUser:ej,children:es&&(0,a.jsx)("div",{className:(0,E.$)(" border rounded-2 color-border-default",(ex.length,"mt-2 mb-1")),children:(0,a.jsx)(iP,{isDialog:!1,addCommentDialogTitle:K,anchorRef:V,batchPending:L,batchingEnabled:I.batchingEnabled,commentBoxSubject:I.commentBoxSubject,filePath:l,isLeftSide:!!p,isOpen:es,lineNumber:g?_?.endLineNumber:h.blobLineNumber,repositoryId:R,returnFocusRef:ef,startLineNumber:g?_?.startLineNumber:void 0,subjectId:A,suggestedChangesConfig:eb,viewerData:O,onAddComment:({onCompleted:e,threadsConnectionId:t,...n})=>{if(!I||!h)return;let{leftLines:i,rightLines:r}=S;if(_){var a;let e="left"===_.endOrientation?i:r,n=e[e.length-1];n&&(a=n)&&a!==e5&&n.threadsData?.__id&&(t=n.threadsData?.__id)}I.addThread({...n,diffLine:h,isLeftSide:p,isLineSelected:g,selectedDiffRowRange:_,threadsConnectionId:t,onCompleted:(t,n)=>{e?.(t,n),eu(t),j(t)}})},onCloseCommentDialog:()=>{ei(),em()}})})}):null}),!w&&O.commentsPreference===x.sI.Collapsed&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{"aria-hidden":"true",style:{left:"compact"===O.lineSpacingPreference?"-1px":"-2px"},className:(0,E.$)("position-absolute top-0 d-flex user-select-none",rh["in-progress-comment-indicator"]),children:B&&(0,a.jsx)(rl,{lineSpacingPreference:O.lineSpacingPreference,authorAvatarUrl:O.avatarUrl,authorLogin:O.login})}),(0,a.jsx)("div",{"aria-hidden":"true",className:(0,E.$)("position-absolute top-0 d-flex user-select-none",rh["comment-indicator"]),children:(0,a.jsx)(iq,{shouldAnimateRef:eN,lineSpacingPreference:O.lineSpacingPreference})})]}),(0,a.jsx)(rm,{diffLine:h})]})}),rb=(0,d.memo)(ry),rC=(0,d.memo)(rv);function rv({children:e,columnIndex:t,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:i,firstLineNumberSelection:r,filePath:s,copilotChatReference:o,contentRef:l,...c}){let u=(0,d.useRef)(null),{diffLine:m,fileAnchor:h,isLeftSide:f,isRowSelected:p}=tI(),{updateSelectedDiffRowRange:g}=tg(),x=(0,d.useCallback)(()=>{r&&null!==r.current&&g(h,f?m.left:m.right,f?"left":"right",!0,!0)},[h,f,m.left,m.right,r,g]),y=(0,d.useCallback)(()=>{g(h,f?m.left:m.right,f?"left":"right",!1,!0)},[h,f,m.left,m.right,g]);return(0,a.jsx)(rg,{ref:u,className:(0,E.$)("diff-line-number position-relative",rf.includes(m.type)&&"diff-line-number-neutral"),columnIndex:t,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:i,firstLineNumberSelection:r,style:{backgroundColor:tu(m.type,!0,p),textAlign:"center"},handleDiffCellMouseDown:y,onMouseEnter:x,...c,children:(0,a.jsx)("code",{children:e})})}function rN({ContextMenu:e,renderHunkButton:t,searchResultsForLine:n,focusedSearchResult:i}){let r=(0,d.useRef)(null),[s,o]=function(e){let[t,n]=(0,d.useState)(!1),[i,r]=(0,d.useState)(!1),a=(0,d.useCallback)(t=>{e.current&&e.current.contains(t.relatedTarget)||n(!1)},[e]),s=(0,d.useCallback)(()=>{e.current===document.activeElement&&n(!0)},[e]),o=(0,d.useCallback)(t=>{e.current&&!e.current.contains(t.relatedTarget)&&n(!1),r(!1)},[e]),l=(0,d.useCallback)(e=>{e.stopPropagation(),r(!0)},[]);return[{onFocus:s,onBlur:a},{"aria-hidden":!i,tabIndex:t?0:-1,onBlur:o,onFocusCapture:l,onKeyDownCapture:(0,d.useCallback)(e=>{nn(e.key)&&e.stopPropagation()},[])}]}(r),{diffLine:l}=tI();return(0,a.jsx)(rg,{ref:r,ContextMenu:e,colSpan:4,columnIndex:0,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},...s,className:"diff-hunk-cell",children:(0,a.jsxs)("div",{className:"d-flex flex-row",children:[t?.(o)??(0,a.jsx)(rx,{}),(0,a.jsxs)("code",{className:"diff-text-cell hunk",children:[n&&n.length>0&&(0,a.jsx)(ru,{searchResults:n,focusedSearchResult:i,className:(0,E.$)("diff-text-inner",{"color-fg-muted":"HUNK"===l.type})}),(0,a.jsx)(P.$6,{className:"diff-text-inner color-fg-muted",html:l.html})]})]})})}function rj({columnIndex:e,showRightBorder:t}){return(0,a.jsx)(rg,{ContextMenu:(0,a.jsx)(i6,{}),className:(0,E.$)("empty-diff-line",{"border-right":t}),columnIndex:e})}try{rg.displayName||(rg.displayName="Cell")}catch{}try{rx.displayName||(rx.displayName="HunkKebabIcon")}catch{}try{ry.displayName||(ry.displayName="ContentCellUnmemoized")}catch{}try{rb.displayName||(rb.displayName="ContentCell")}catch{}try{rC.displayName||(rC.displayName="LineNumberCell")}catch{}try{rv.displayName||(rv.displayName="LineNumberCellUnmemoized")}catch{}try{rN.displayName||(rN.displayName="HunkCell")}catch{}try{rj.displayName||(rj.displayName="EmptyCell")}catch{}let rw=({resultsForLine:e,focusedSearchResult:t,handleDiffSideCellSelectionBlocking:n,handleDiffRowClick:i,lineAnchor:r,filePath:s,copilotChatReference:o,firstLineNumberSelection:l})=>{let{diffLine:c,hasHiddenUnicodeCharacters:u,isLeftSide:m,isSplit:h,setInGridMode:f}=tI(),p=(0,d.useRef)(null),g="ADDITION"!==c.type,x=!h||m,y=x&&!g,b="DELETION"!==c.type,C=!h||!m,v=C&&!b,N=(0,d.useCallback)(e=>{c.left&&i(e,c.left,"left",e.shiftKey,!0)},[i,c.left]),j=(0,d.useCallback)(e=>{c.left&&i(e,c.left,"left",e.shiftKey,!1)},[i,c.left]),w=(0,d.useCallback)(e=>{c.right&&i(e,c.right,"right",e.shiftKey,!0)},[i,c.right]),_=(0,d.useCallback)(e=>{c.right&&i(e,c.right,"right",e.shiftKey,!1)},[i,c.right]),S=(0,d.useCallback)(()=>{n&&n("left")},[n]),E=(0,d.useCallback)(()=>{n&&n("right")},[n]);return(0,a.jsxs)(nh,{line:c,children:[x&&(0,a.jsxs)(rC,{copilotChatReference:o,columnIndex:0,filePath:s,handleDiffCellClick:y?w:N,handleDiffSideCellSelectionBlocking:E,firstLineNumberSelection:l,contentRef:p,children:[u&&!b&&(0,a.jsx)(rS,{children:(0,a.jsx)(na.o,{})}),g&&c.left]}),C&&(0,a.jsxs)(rC,{copilotChatReference:o,columnIndex:h?2:1,filePath:s,handleDiffCellClick:v?N:w,handleDiffSideCellSelectionBlocking:S,firstLineNumberSelection:l,contentRef:p,children:[u&&b&&(0,a.jsx)(rS,{children:(0,a.jsx)(na.o,{})}),b&&c.right]}),(0,a.jsx)(no,{enableDiffGridMode:f,children:(0,a.jsx)(rb,{copilotChatReference:o,columnIndex:h?m?1:3:2,filePath:s,handleDiffCellClick:m?j:_,lineAnchor:r,handleDiffSideCellSelectionBlocking:m?E:S,searchResultsForLine:e,focusedSearchResult:t,firstLineNumberSelection:l,ref:p})})]})},r_=({resultsForLine:e,focusedSearchResult:t,fileAnchor:n,filePath:i,handleDiffRowClick:r,handleDiffSideCellSelectionBlocking:s,copilotChatReference:o,firstLineNumberSelection:l})=>{let{diffLine:c,isLeftSide:d}=tI();if(tt(c))return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rj,{columnIndex:2*!d}),(0,a.jsx)(rj,{columnIndex:d?1:3,showRightBorder:d})]});let u=d?"left":(0,eK.XU)(c.type),m="left"===u?c.left:c.right,h=(0,eK.IQ)(n,u,m??0);switch(c.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":return(0,a.jsx)(rL,{copilotChatReference:o,filePath:i,handleDiffRowClick:r,handleDiffSideCellSelectionBlocking:s,lineAnchor:h,resultsForLine:e,focusedSearchResult:t,firstLineNumberSelection:l});default:throw Error(`cannot handle type ${c.type}`)}};function rS({children:e}){return(0,a.jsx)("span",{className:"position-absolute",style:{left:"-1px",zIndex:"1"},children:e})}let rE=d.memo(r_),rL=d.memo(rw);try{rw.displayName||(rw.displayName="CodeDiffLineUnmemoized")}catch{}try{r_.displayName||(r_.displayName="DiffLineSideUnmemoized")}catch{}try{rS.displayName||(rS.displayName="DiffCodeAlert")}catch{}try{rE.displayName||(rE.displayName="DiffLineSide")}catch{}try{rL.displayName||(rL.displayName="CodeDiffLine")}catch{}let rk={"expand-button-line":"ExpandableHunkHeaderDiffLine-module__expand-button-line--wZKjF","expand-up-and-down":"ExpandableHunkHeaderDiffLine-module__expand-up-and-down--uarCJ","expand-button-unified":"ExpandableHunkHeaderDiffLine-module__expand-button-unified--Eae6C"};function rI({direction:e,icon:t,label:n,onClick:i,ariaLabel:r,className:s,...o}){let{sendAnalyticsEvent:l}=(0,nU.s)(),{isSplit:c}=tI();return(0,a.jsx)("button",{onClick:()=>{i(),l("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")},className:(0,E.$)("Button Button--iconOnly Button--invisible",rk["expand-button-line"],!c&&rk["expand-button-unified"],s),"aria-label":r??n,"data-direction":e,...o,children:(0,a.jsx)(t,{})})}function rT({nextLine:e,prevLine:t,resultsForLine:n,focusedSearchResult:i}){let{fileLineCount:r,diffLine:s}=tI(),{expandStartOfHunk:o,expandEndOfPreviousHunk:l}=iJ(),c=!t,m=!e,h=0===s.blobLineNumber,f=c||m,p=m&&s.blobLineNumber===r,g=(0,d.useMemo)(()=>!f&&!(s.blobLineNumber<=0)&&(!!(s.blobLineNumber-t.blobLineNumber<=20)||!!(e.blobLineNumber-s.blobLineNumber>=20)),[f,s,e,t]),x=(0,d.useMemo)(()=>!f&&!p&&s.blobLineNumber-t.blobLineNumber>20,[f,p,s,t]),y=(0,d.useMemo)(()=>!(s.blobLineNumber<=0)&&!h&&!!c,[c,h,s]),b=(0,d.useMemo)(()=>!c&&!p&&!!m,[c,m,p]),C=(0,d.useMemo)(()=>{switch(!0){case g:return"expand-all";case x:return"expand-up-and-down";case y:return"expand-up";case b:return"expand-down"}},[g,x,y,b]),v=()=>o(),N=()=>l(),j=()=>o();return(0,a.jsx)(rN,{searchResultsForLine:n,focusedSearchResult:i,renderHunkButton:n=>{switch(C){case"expand-all":return(0,a.jsx)(rI,{...n,direction:"all",icon:u.UnfoldIcon,label:`Expand file from line ${t?.blobLineNumber||""} to line ${e?.blobLineNumber||""}`,onClick:j});case"expand-up-and-down":return(0,a.jsxs)("div",{className:"d-flex flex-column",children:[(0,a.jsx)(rI,{...n,direction:"down",icon:u.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,className:rk["expand-up-and-down"],onClick:N}),(0,a.jsx)(rI,{...n,direction:"up",icon:u.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,className:rk["expand-up-and-down"],onClick:v})]});case"expand-up":return(0,a.jsx)(rI,{...n,direction:"up",icon:u.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,onClick:v});case"expand-down":return(0,a.jsx)(rI,{...n,direction:"down",icon:u.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,onClick:N});default:return null}},ContextMenu:(0,a.jsx)(rD,{handleCopyContent:()=>{let[e]=ti(tr(s.html),s.type);(0,ng.D)(e)},handleExpandAbove:v,handleExpandAll:j,handleExpandBelow:N,shouldCopyContent:!!s.html,shouldExpandAbove:x||y,shouldExpandBelow:x||b})})}function rD({shouldExpandBelow:e,shouldExpandAbove:t,shouldCopyContent:n,handleExpandAll:i,handleExpandBelow:r,handleExpandAbove:s,handleCopyContent:o}){let l={includeShiftKey:!0,key:"["},c={key:"]"},d={key:"["},m={key:"C"};return(0,a.jsx)(ny.W.Overlay,{width:"medium",children:(0,a.jsxs)(eo.l,{children:[(0,a.jsxs)(eo.l.Item,{"aria-keyshortcuts":tl(l),onSelect:i,children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.UnfoldIcon,{})}),"Expand all",(0,a.jsx)(eo.l.TrailingVisual,{children:(0,a.jsx)("span",{children:`${to(l)}`})})]}),t?(0,a.jsxs)(eo.l.Item,{"aria-keyshortcuts":tl(c),onSelect:s,children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.FoldUpIcon,{})}),"Expand above",(0,a.jsx)(eo.l.TrailingVisual,{children:(0,a.jsx)("span",{children:`${to(c)}`})})]}):null,e?(0,a.jsxs)(eo.l.Item,{"aria-keyshortcuts":tl(d),onSelect:r,children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.FoldDownIcon,{})}),"Expand below",(0,a.jsx)(eo.l.TrailingVisual,{children:(0,a.jsx)("span",{children:`${to(d)}`})})]}):null,(0,a.jsx)(rs,{}),n?(0,a.jsxs)(eo.l.Item,{"aria-keyshortcuts":tl(m),onSelect:o,children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.CopyIcon,{})}),"Copy",(0,a.jsx)(eo.l.TrailingVisual,{children:(0,a.jsx)("span",{children:`${to(m)}`})})]}):null]})})}try{rI.displayName||(rI.displayName="ExpandButtonLine")}catch{}try{rT.displayName||(rT.displayName="ExpandableHunkHeaderDiffLine")}catch{}try{rD.displayName||(rD.displayName="HunkContextMenu")}catch{}let rR=(0,d.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,clearSelectedDiffRowRange:i,diffEntryId:r,diffHasHiddenUnicodeCharacters:s,diffLines:o,fileAnchor:l,fileLineCount:c,filePath:u,handleDiffRowClick:m,handleDiffSideCellSelectionBlocking:h,replaceSelectedDiffRowRangeFromGridCells:f,selectedDiffRowRange:p,setInGridMode:g,showHiddenUnicode:x,tableRef:y,updateDiffLines:b,copilotChatReference:C,inGridMode:v,firstLineNumberSelection:N}){let{leftLines:j,rightLines:w}=function(e){let t=e.reduce((e,t)=>e+(t.threadsData?.totalCount??0),0)??0,{leftLines:n,rightLines:i}=(0,d.useMemo)(()=>(function(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(e5);for(;n.length<t.length;)n.push(e5)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":var r;i();let[e,s]=[{...r=a,threadsData:void 0,annotationsData:void 0},{...r,threadsData:r.threadsData?{...r.threadsData,threads:r.threadsData.threads,totalCommentsCount:r.threadsData.totalCommentsCount,totalCount:r.threadsData.totalCount}:void 0}];t.push(e),n.push(s);break;case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}})(e),[e,t]);return{leftLines:n,rightLines:i}}(o),{ghostUser:_}=e2();ni({clearSelectedDiffRowRange:i,containerRef:y,fileAnchor:l,isSplitDiff:!0,leftLines:j,replaceSelectedDiffRowRangeFromGridCells:f,rightLines:w,disabled:!v});let S=(0,d.useMemo)(()=>{if(p)return tm({selectedDiffRowRange:p,leftLines:j,rightLines:w,isNumberCell:!0})},[p,j,w]);(0,d.useEffect)(()=>{b(l,o)},[o,l,b]);let E=(0,d.useMemo)(()=>tN(j),[j]),L=new Map,k=new Map,I=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(L.has(n.leftLineNumber)?L.get(n.leftLineNumber)?.push(n):-1!==n.leftLineNumber&&L.set(n.leftLineNumber,[n]),I.has(n.hunkLineNumber)?I.get(n.hunkLineNumber)?.push(n):n.isHunk&&I.set(n.hunkLineNumber,[n]),k.has(n.rightLineNumber)?k.get(n.rightLineNumber)?.push(n):-1!==n.rightLineNumber&&k.set(n.rightLineNumber,[n]))}let T=e=>{let t=!1;return s&&!tt(e)&&(t=(0,eX.Y)(e.text),x&&t&&(e=e.html?{...e,html:(0,tE.Gx)(e.html)??e.html}:{...e,text:(0,eX.TA)(e.text)})),[e,t]},D=[];for(let e=0;e<j.length;e++){let i=j[e],s=w[e],o=j[e-1],[d,f]=T(i),[p,x]=T(s),y=tt(j[e+1])?w[e+1]:j[e+1],b=!!d&&d!==e5&&"HUNK"===d.type,v=e7(l,d,p),R=tt(d)?tt(p)?void 0:p:d;if(!R)continue;let A=tt(d)?void 0:d.threadsData,M=tt(p)?void 0:p.threadsData,{currentHunk:O,nextHunk:$,previousHunk:P}=tv(R,E),B=L.get(tt(d)?-2:d.left??-2),U=k.get(tt(p)?-2:p.right??-2),F=I.get(R.blobLineNumber),H=F?.[0]?.rightLineNumber===p?.right?n:void 0,z=B?.[0]?.leftLineNumber===d?.left?n:void 0,V=U?.[0]?.rightLineNumber===p?.right?n:void 0,G=tT(M,_),W=tT(A,_),K={currentHunk:O,diffEntryId:r,fileAnchor:l,fileLineCount:c,filePath:u,isRowSelected:(S?.isRowSelected(i)||S?.isRowSelected(s))??!1,nextHunk:$,previousHunk:P,rowId:v,isSplit:!0,diffContext:t,setInGridMode:g};D.push((0,a.jsx)("tr",{className:"diff-line-row",children:b?(0,a.jsx)(tk,{...K,hasHiddenUnicodeCharacters:f||x,diffLine:R,modifiedLineThreads:G,originalLineThreads:W,children:(0,a.jsx)(rT,{nextLine:y,prevLine:o,focusedSearchResult:H,resultsForLine:F})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tk,{...K,diffLine:d,hasHiddenUnicodeCharacters:f,isLeftSide:!0,modifiedLineThreads:G,originalLineThreads:W,children:(0,a.jsx)(rE,{copilotChatReference:C,fileAnchor:l,filePath:u,handleDiffRowClick:m,handleDiffSideCellSelectionBlocking:h,resultsForLine:B,focusedSearchResult:z,firstLineNumberSelection:N})}),(0,a.jsx)(tk,{...K,diffLine:p,hasHiddenUnicodeCharacters:x,modifiedLineThreads:G,originalLineThreads:W,children:(0,a.jsx)(rE,{copilotChatReference:C,fileAnchor:l,filePath:u,handleDiffRowClick:m,handleDiffSideCellSelectionBlocking:h,resultsForLine:U,focusedSearchResult:V,firstLineNumberSelection:N})})]})},v))}return(0,a.jsx)(a.Fragment,{children:D})});try{rR.displayName||(rR.displayName="SplitDiffLines")}catch{}let rA=(0,d.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,clearSelectedDiffRowRange:i,diffEntryId:r,diffHasHiddenUnicodeCharacters:s,diffLines:o,fileLineCount:l,fileAnchor:c,filePath:u,tableRef:m,selectedDiffRowRange:h,showHiddenUnicode:f,handleDiffRowClick:p,updateDiffLines:g,replaceSelectedDiffRowRangeFromGridCells:x,copilotChatReference:y,setInGridMode:b,inGridMode:C,firstLineNumberSelection:v}){ni({clearSelectedDiffRowRange:i,containerRef:m,fileAnchor:c,isSplitDiff:!1,leftLines:o,replaceSelectedDiffRowRangeFromGridCells:x,disabled:!C});let N=(0,d.useMemo)(()=>{if(h)return tm({selectedDiffRowRange:h,leftLines:o,isNumberCell:!0})},[h,o]),j=(0,d.useMemo)(()=>tN(o.map(e=>e)),[o]);(0,d.useEffect)(()=>{g(c,o)},[o,c,g]);let w=new Map;for(let t=0;t<(e?.length??0);t++){let n=e?.[t];n&&(e&&w.has(n.diffLineNumIndex)?w.get(n.diffLineNumIndex)?.push(n):e&&w.set(n.diffLineNumIndex,[n]))}let _=o.map((e,i)=>{let d=e,m=o[i+1],h=o[i-1],g="HUNK"===e.type,x=(0,eK.IQ)(c,(0,eK.XU)(d.type),d.blobLineNumber),{currentHunk:C,nextHunk:_,previousHunk:S}=tv(d,j),E=w.get(i),L=i===E?.[0]?.diffLineNumIndex?n:void 0,k=N?.isRowSelected(e)??!1,I=e7(c,d,d),T=s&&(0,eX.Y)(d.text);f&&T&&(d=d.html?{...d,html:(0,tE.Gx)(d.html)??d.html}:{...d,text:(0,eX.TA)(d.text)});let D={diffEntryId:r,diffLine:d,currentHunk:C,fileAnchor:c,fileLineCount:l,filePath:u,hasHiddenUnicodeCharacters:T,isLeftSide:"DELETION"===d.type,isRowSelected:k,isSplit:!1,nextHunk:_,previousHunk:S,diffContext:t,rowId:I,setInGridMode:b};return(0,a.jsx)("tr",{className:"diff-line-row",children:(0,a.jsx)(tk,{...D,children:g?(0,a.jsx)(rT,{nextLine:m,prevLine:h,focusedSearchResult:L,resultsForLine:E}):(0,a.jsx)(rL,{filePath:u,copilotChatReference:y,handleDiffRowClick:p,firstLineNumberSelection:v,lineAnchor:x,resultsForLine:E,focusedSearchResult:L})})},I)});return(0,a.jsx)(a.Fragment,{children:_})});try{rA.displayName||(rA.displayName="UnifiedDiffLines")}catch{}function rM({diffAnchor:e,children:t}){return(0,a.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":e,children:t})}let rO=(0,d.memo)(function({searchResults:e,diffContext:t="pr",focusedSearchResult:n,diffEntryData:i,diffLinesManuallyUnhidden:r,baseHelpUrl:s,onHandleLoadDiff:o,copilotChatReference:l,hasExpandedAllRanges:c,...d}){let u=`diff-${i.pathDigest}`;if(i.isBinary)return(0,a.jsx)(rM,{diffAnchor:u,children:"Binary file not shown."});if((0,eU.dK)(i))return(0,a.jsx)(rM,{diffAnchor:u,children:"File renamed without changes."});if((0,eU.Jc)(i))return(0,a.jsx)(rM,{diffAnchor:u,children:"File copied without changes."});if((0,eU.Sn)(i,i.status,i.oldTreeEntry?.mode,i.newTreeEntry?.mode))return(0,a.jsx)(rM,{diffAnchor:u,children:"File mode changed."});if(!r&&(0,eU.HI)(i))return(0,a.jsx)(tS,{diffAnchor:u,onLoadDiff:o,children:(0,eU.l_)(i.truncatedReason)});if((0,eU.s8)(i))return(0,a.jsx)(rM,{diffAnchor:u,children:"Whitespace-only changes."});if(!r&&(0,eU.lO)(i))return(0,a.jsx)(tS,{diffAnchor:u,onLoadDiff:o,children:"This file was deleted."});if(!r&&(0,eU.xW)(i))return(0,a.jsxs)(tS,{diffAnchor:u,helpText:"customizing how changed files appear on GitHub.",helpUrl:`${s}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`,onLoadDiff:o,children:["Some generated files are not rendered by default. Learn more about"," "]});if(i.isTooBig&&0===i.diffLines.length)if(r)return(0,a.jsxs)(rM,{diffAnchor:u,children:["Diff is too big to render. To view,"," ",(0,a.jsx)(z.A,{inline:!0,href:`${s}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});else return(0,a.jsx)(tS,{diffAnchor:u,onLoadDiff:o,children:"Large diffs are not rendered by default."});return i.diffLines?(0,a.jsx)(e1,{...d,children:(0,a.jsx)(ty,{children:(0,a.jsx)(r$,{diffAnchor:u,diffContext:t,diffEntryData:i,viewerData:d.viewerData,focusedSearchResult:n,searchResults:e,copilotChatReference:l,hasExpandedAllRanges:c})})}):null});function r$({diffAnchor:e,viewerData:t,diffEntryData:n,searchResults:i,focusedSearchResult:r,copilotChatReference:s,diffContext:o,hasExpandedAllRanges:l}){let c=(0,d.useRef)(null),[u,m]=(0,d.useState)(!0),[h,f]=(0,d.useState)(null),[p,g]=(0,d.useState)(!1),x=n.newTreeEntry?.lineCount??n.oldTreeEntry?.lineCount??0,b=(0,d.useMemo)(()=>{let e=n.diffLines[n.diffLines.length-1];return e?.blobLineNumber&&e.blobLineNumber<x?n.diffLines.concat({__id:tb.finalLineId,blobLineNumber:e.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}):n.diffLines},[n.diffLines,x]),{diffViewPreference:C,lineSpacingPreference:v,tabSizePreference:j}=t,{selectedDiffRowRange:w,replaceSelectedDiffRowRange:_,replaceSelectedDiffRowRangeFromGridCells:S,clearSelectedDiffRowRange:L,updateDiffLines:k,updateSelectedDiffRowRange:I}=tg(),T=(0,d.useCallback)(e=>{if(!c.current||!e.target)return;let t=e.target,n=t.closest("td.diff-line-number"),i=c.current.contains(t);n&&!i&&(L(),P.current=null)},[L,c]);(0,d.useEffect)(()=>(N.XC?.addEventListener("mousedown",T),()=>{N.XC?.removeEventListener("mousedown",T)}),[T]);let D=e===w?.diffAnchor,R=(0,d.useMemo)(()=>{let e,t=n.status,i=n.oldTreeEntry?.path,r=n.newTreeEntry?.path;if(i||r)return e="RENAMED"===t?`${i} renamed to ${r}`:"DELETED"===t||"REMOVED"===t?i:r,`Diff for: ${e}`},[n]);(0,d.useEffect)(()=>{if(!D)return;let e=function(e,t){if(!e)return;if(!t)return e;let n=!1,i=!1,r=!1;for(let a of t)if(a&&(i||(i=e8(a,e.startLineNumber,e.startOrientation)),r||(r=e8(a,e.endLineNumber,e.endOrientation)),(n=r&&!i)||i&&r))break;return n?{...e,startLineNumber:e.endLineNumber,startOrientation:e.endOrientation,endLineNumber:e.startLineNumber,endOrientation:e.startOrientation}:e}(w,b);e&&e!==w&&_(e)},[b,w,D,_]);let A=N.cg?.location.search,M=(0,d.useMemo)(()=>"split"===new URLSearchParams(A).get("diff")||"split"===C,[A,C]),O=(0,eK.c7)(b),$=(0,d.useCallback)(e=>{f(e)},[f]),P=(0,d.useRef)(null),B=(0,d.useCallback)(e=>{if(e.shiftKey&&e.metaKey&&"ArrowLeft"===e.key&&!l&&u&&e.target?.getAttribute("role")==="gridcell"){let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${n.path}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))}},[l,u,n.path]),U=(0,d.useCallback)((t,n,i,r,a)=>{!function(e){let t=document.getElementById("__primerPortalRoot__");return!!t&&!!e&&t.contains(e)}(t.target)&&!t.defaultPrevented&&a&&I(e,n,i,r,a)},[e,I]),F=(0,d.useCallback)(e=>{let t=document.getSelection();if(t){let n=[];for(let e=0;e<t.rangeCount;e++){let i=t.getRangeAt(e).cloneContents();if(i.querySelectorAll("td").length){let e=`td.diff-line-number, span.diff-text-marker${M?`, ${"left"===h?"td.left-side-diff-cell":"td.right-side-diff-cell"}`:""}`;for(let t of i.querySelectorAll(e))t.parentNode&&t.parentNode.removeChild(t);for(let e of i.children){let t=e.textContent;`
`===t?n.push(""):n.push(t)}}else 1===t.rangeCount?n.push(t.toString()):n.push(i.textContent)}e.clipboardData.setData("text/plain",n.join(`
`)),e.preventDefault()}},[h,M]),H=(0,d.useMemo)(()=>b.some(e=>(0,eX.Y)(e.text)),[b]),z={searchResults:i,diffContext:o,focusedSearchResult:r,clearSelectedDiffRowRange:L,diffEntryId:n.objectId,diffHasHiddenUnicodeCharacters:H,diffLines:b,fileAnchor:e,fileLineCount:x,filePath:n.path,handleDiffRowClick:U,handleDiffSideCellSelectionBlocking:$,replaceSelectedDiffRowRangeFromGridCells:S,selectedDiffRowRange:D?w:null,showHiddenUnicode:p,tableRef:c,updateDiffLines:k,updateSelectedDiffRowRange:I,copilotChatReference:s,setInGridMode:m,inGridMode:u,firstLineNumberSelection:P};return(0,a.jsxs)(a.Fragment,{children:[H&&(0,a.jsx)(eq.a,{isShown:p,toggleShowHiddenCharacters:()=>g(!p)}),(0,a.jsx)("table",{"aria-label":R,onKeyDown:B,ref:c,className:(0,E.$)("tab-size","width-full",tj.tableLayoutFixed,{[tj.compact]:"compact"===v}),"data-block-diff-cell-selection":h,"data-diff-anchor":e,"data-tab-size":j,"data-paste-markdown-skip":!0,onCopy:F,role:"grid",style:{"--line-number-cell-width":`${O}px`,"--line-number-cell-width-unified":`${2*parseFloat(O)}px`},children:M?(0,a.jsx)(y.wj,{lineWidth:O,children:(0,a.jsx)(rR,{...z})}):(0,a.jsx)(y.Qe,{lineWidth:O,children:(0,a.jsx)(rA,{...z})})})]})}try{rM.displayName||(rM.displayName="PlainTextStatus")}catch{}try{rO.displayName||(rO.displayName="DiffLines")}catch{}try{r$.displayName||(r$.displayName="CodeDiffLines")}catch{}var rP=n(58990);let rB={filesActionList:"SubmoduleDiff-module__filesActionList--mBzOT",fileRowLinkItem:"SubmoduleDiff-module__fileRowLinkItem--v78Zt",path:"SubmoduleDiff-module__path--gPJe4",fileRow:"SubmoduleDiff-module__fileRow--g8axL",linesAdded:"SubmoduleDiff-module__linesAdded--pJwaG",linesDeleted:"SubmoduleDiff-module__linesDeleted--EbCHM"};function rU({submodule:e}){let{basePath:t,changedFiles:n,contentsUrl:i,newCommitOid:r,oldCommitOid:s,status:o,submoduleUrl:l}=e,c=e.summary.length>0&&e.contentsUrl&&"MODIFIED"===o,m=(0,d.useMemo)(()=>{switch(o){case"ADDED":return(0,a.jsx)(rz,{commitOid:r,contentsUrl:i,type:"added"});case"DELETED":case"REMOVED":return(0,a.jsx)(rz,{commitOid:s,contentsUrl:i,type:"deleted"});default:return(0,a.jsx)(rV,{newCommitOid:r,oldCommitOid:s,changedFiles:n,contentsUrl:i})}},[r,s,o,n,i]);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:`px-3 py-2 ${c?"border-bottom bgColor-muted":""}`,children:[(0,a.jsx)(u.FileSubmoduleIcon,{className:"fgColor-muted mr-2",size:16}),(0,a.jsx)(rF,{basePath:t,submoduleUrl:l}),m]}),c&&(0,a.jsx)(eo.l,{className:rB.filesActionList,showDividers:!0,variant:"full",children:e.summary.map(e=>(0,a.jsx)(rG,{compareUrl:`${i}/compare/${s}...${r}`,linesAdded:e.linesAdded,linesDeleted:e.linesDeleted,path:e.path,pathDigest:e.pathDigest,status:e.status},e.pathDigest))})]})}function rF({basePath:e,submoduleUrl:t}){return(0,a.jsxs)(a.Fragment,{children:["Submodule"," ",t?(0,a.jsx)(z.A,{inline:!0,href:t,children:e}):e," "]})}function rH(e){return e.slice(0,7)}function rz({commitOid:e="",contentsUrl:t,type:n}){let i="added"===n?"added at":"deleted from";return t?(0,a.jsxs)(a.Fragment,{children:[i," ",(0,a.jsx)(z.A,{inline:!0,href:`${t}/tree/${e}`,children:rH(e)})]}):(0,a.jsxs)(a.Fragment,{children:[i," ",rH(e)]})}function rV({newCommitOid:e="",oldCommitOid:t="",changedFiles:n=0,contentsUrl:i}){let r=n>0&&i?`${n} ${1===n?"file":"files"}`:`from ${rH(t)} to ${rH(e)}`;return(0,a.jsxs)(a.Fragment,{children:["updated"," ",i?(0,a.jsx)(z.A,{inline:!0,href:`${i}/compare/${t}...${e}`,children:r}):r]})}function rG({compareUrl:e,linesAdded:t,linesDeleted:n,path:i,pathDigest:r,status:s}){return(0,a.jsx)(eo.l.LinkItem,{href:`${e}#diff-${r}`,className:rB.fileRowLinkItem,children:(0,a.jsxs)(O.B,{gap:"condensed",direction:"horizontal",align:"center",className:rB.fileRow,children:[(0,a.jsx)(rP.E,{status:s}),(0,a.jsxs)("div",{className:"d-flex gap-1 flex-justify-between width-full",children:[(0,a.jsx)("span",{className:rB.path,children:i}),(t>0||n>0)&&(0,a.jsxs)("div",{className:"d-flex flex-shrink-0 gap-1 flex-nowrap",children:[(0,a.jsx)("div",{className:rB.linesAdded,children:t>0&&(0,a.jsxs)(eB.C,{isAddition:!0,children:["+",rW(t)]})}),(0,a.jsx)("div",{className:rB.linesDeleted,children:n>0&&(0,a.jsxs)(eB.C,{isAddition:!1,children:["-",rW(n)]})})]})]})]})})}function rW(e){return e>999?`${(e/1e3).toFixed(1)}k`:e.toLocaleString()}try{rU.displayName||(rU.displayName="SubmoduleDiff")}catch{}try{rF.displayName||(rF.displayName="SubmodulePath")}catch{}try{rz.displayName||(rz.displayName="SubmoduleCommitChange")}catch{}try{rV.displayName||(rV.displayName="SubmoduleModified")}catch{}try{rG.displayName||(rG.displayName="SubmoduleFileRow")}catch{}function rK(e,t){let n=new Map;for(let t of e){let e=`${t.left}-${t.right}`;n.set(e,t)}return t.map(e=>{let t=`${e.left}-${e.right}`,i=n.get(t);return i?{...e,position:i.position}:{...e,position:null,threadsData:void 0}})}var rq=n(54779);function rX({oid:e,path:t,repo:n,isViewable:i=!0,copilotDiffChatProps:r}){return(0,a.jsxs)(ny.W,{children:[(0,a.jsx)(ny.W.Anchor,{children:(0,a.jsx)("button",{className:"Button Button--iconOnly Button--invisible","aria-label":"More options",children:(0,a.jsx)(u.KebabHorizontalIcon,{})})}),(0,a.jsx)(ny.W.Overlay,{children:(0,a.jsxs)(eo.l,{children:[(0,a.jsxs)(eo.l.LinkItem,{href:(0,C.nD_)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:e}),inactiveText:i?void 0:"Action unavailable",children:[(0,a.jsx)(eo.l.LeadingVisual,{children:(0,a.jsx)(u.EyeIcon,{})}),"View file"]}),r&&(0,a.jsx)(rq.$,{...r})]})})]})}try{rX.displayName||(rX.displayName="BlobActionsMenu")}catch{}var rQ=n(89323),rJ=n(69851);function rY({dependencyDiffPath:e,fileRendererInfo:t,proseDiffHtml:n,loading:i}){return i?(0,a.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,a.jsx)(tw.A,{size:"large"})}):n?(0,a.jsx)("div",{className:"prose-diff position-relative",children:(0,a.jsx)(P.vb,{html:n})}):t?(0,a.jsx)(rQ.default,{...t}):e?(0,a.jsx)(rJ.x,{src:e,children:(0,a.jsxs)("div",{className:"text-center py-3",children:[(0,a.jsx)(tw.A,{size:"medium"}),(0,a.jsx)("p",{className:"color-fg-muted my-2",children:"Loading Dependency Review..."})]})}):(0,a.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."})}try{rY.displayName||(rY.displayName="RichDiff")}catch{}let rZ=(0,d.memo)(function({commitOid:e,path:t,proseDiffHtml:n,fileRendererInfo:i,dependencyDiffPath:r}){let{loaded:o,richDiffData:l}=function(e,t,n,i){let r=!!t.proseDiffHtml||!!t.fileRendererInfo||!!i,a=(0,s.t)(),[o,l]=(0,d.useState)(r),[c,u]=(0,d.useState)(t),m=(0,d.useCallback)(async()=>{let t=await (0,eN.lS)(`${(0,C.$Qz)({owner:a.ownerLogin,repo:a.name,commitish:e})}/rich_diff/${encodeURIComponent(n)}`);t.ok&&u(await t.json()),l(!0)},[e,n,a]);return(0,d.useEffect)(()=>{r||m()},[r,m]),{loaded:o,richDiffData:c}}(e,{proseDiffHtml:n,fileRendererInfo:i},t,r);return(0,a.jsx)(rY,{dependencyDiffPath:r,fileRendererInfo:l.fileRendererInfo,loading:!o,proseDiffHtml:l.proseDiffHtml})});try{rZ.displayName||(rZ.displayName="CommitRichDiff")}catch{}let r0={diffHeaderWrapper:"Diff-module__diffHeaderWrapper--rsdD4"},r1={isInMergeQueue:!1,state:"OPEN"},r2=d.memo(r4);function r4({diffMatches:e,focusedSearchResult:t,diffEntryData:n,contextLinePathURL:i,recalcTotalHeightOfVirtualWindow:r,onOptionCollapseToggle:s,helpUrl:l,headerStickyOffset:u=0,repo:m,oid:h,index:f,ignoreWhitespace:p,virtualizerScrollTo:x}){let y=(0,o.i)(),{data:b}=(0,g.ID)();void 0===b&&(b=g.aX);let C=(0,d.useMemo)(()=>({filteredMarkers:[],activeGlobalMarkerID:"",decrementActiveMarker:eb.l,incrementActiveMarker:eb.l,overlayPortalContainerName:"commit-details-marker-portal"}),[]),v=(0,c.B)().commentInfo,{getThreadDataByPathAndPosition:N,getInlineCommentInfoByPathAndPosition:j,updateInlineCommentMapWithNewComment:w,initialExpandedThreadId:_}=(0,eF.B)(),{commentBoxSubject:S}=(0,eH.X)(),E=function(e,t,n){let i=(0,c.B)(),{commit:r,commentInfo:a,repoOwnerGlobalRelayId:s}=i,o=(0,ez.I)({commit:r,repo:i.repo,viewerCanReply:a.canComment,repoOwnerGlobalRelayId:s,getInlineCommentInfoByPathAndPosition:t}),{addComment:l,deleteComment:u,editComment:m,hideComment:h,unhideComment:f}=(0,eH.X)(),{findInlineComment:p,findInlineCommentWithRelay:g}=(0,eF.B)(),x=(0,d.useCallback)(({filePath:e,onCompleted:t,onError:n,text:i,thread:r})=>{let[a,s]=r.id.split("::");if(!a||!s)return void n(Error("Invalid threadId"));l(i,e,s).then(e=>{e.comment?t?.(e.comment.id):n(Error("Failed to add comment"))})},[l]),y=(0,d.useCallback)(({text:e,diffLine:t,filePath:i,onCompleted:r,onError:a})=>{t&&t.position&&l(e,i,t.position.toString()).then(e=>{if(e.comment){let a=e.comment.id,s=`${i}::${t.position}`;n?.(i,t.position??0,[e.comment],!0),o(s,!0),r?.(s,a)}else a?.(Error("Failed to add comment"))})},[l,n,o]),b=(0,d.useCallback)(({comment:e,text:t,onCompleted:n,onError:i})=>{let r=g(e.id);if(!r)return void i(Error("Comment not found"));m(t,{id:r.id,bodyVersion:r.bodyVersion}).then(e=>{e.updatedFields?n?.():i(Error("Failed to edit comment"))})},[m,g]),C=(0,d.useCallback)(({commentId:e,onCompleted:t,onError:n})=>{let i=g(e);if(!i)return void n?.(Error("Comment not found"));u(i.id.toString()).then(e=>{"success"===e?t?.():"error"===e&&n?.(Error("Failed to delete comment"))})},[u,g]),v=(0,d.useCallback)(({commentDatabaseId:e,reason:t,onCompleted:n,onError:i})=>{let r=p(e);if(!r)return void i?.(Error("Comment not found"));h(r.id.toString(),t).then(e=>{"success"===e?n?.():"error"===e&&i(Error("Failed to hide comment"))})},[p,h]),N=(0,d.useCallback)(({commentDatabaseId:e,onCompleted:t,onError:n})=>{let i=p(e);if(!i)return void n?.(Error("Comment not found"));f(i.id.toString()).then(e=>{"success"===e?t?.():"error"===e&&n(Error("Failed to unhide comment"))})},[p,f]);return(0,d.useMemo)(()=>({batchingEnabled:!1,commentSubjectType:"commit",commentBoxSubject:e,multilineEnabled:!1,resolvingEnabled:!1,suggestedChangesEnabled:!1,lazyFetchReactionGroups:!0,addThread:y,addThreadReply:x,deleteComment:C,editComment:b,pendingSuggestedChangesBatch:[],submitSuggestedChanges:eb.l,addSuggestedChangeToPendingBatch:eb.l,removeSuggestedChangeFromPendingBatch:eb.l,addFileLevelThread:eb.l,resolveThread:eb.l,unresolveThread:eb.l,hideComment:v,unhideComment:N,fetchThread:o}),[y,x,C,b,o,v,N,e])}(S,j,w),[L,k]=(0,d.useState)(r3(n.current[f],N)),I=(0,d.useCallback)(e=>{k(r3(e,N))},[N]),[T,D]=(0,d.useState)(L.collapsed),[R,A]=(0,d.useState)(L.defaultToRichDiff),M=L.isSubmodule&&!!L.submodule,O=!M&&!R,[$,P]=(0,d.useState)(L.diffManuallyExpanded),B=(0,d.useRef)(!1);(0,d.useEffect)(()=>{D(L.collapsed)},[L.collapsed]);let U=(0,d.useRef)([]),F=(0,d.useCallback)(async e=>{U.current.push(e);let t=await eG(U.current,i,L.pathDigest);if(void 0!==t){let e={...L};e.diffLines=rK(e.diffLines,t.diffEntryWithContext),I(e),n.current[f]=e,r()}},[i,n,L,f]),H=async()=>{U.current=[],B.current||((L.newTreeEntry?.lineCount??0)<5e3?U.current.push({start:1,end:Math.max(L.oldTreeEntry?.lineCount??0,L.newTreeEntry?.lineCount??0)}):U.current=function(e,t){let n=[];for(let t=0;t<e.length;t++)if("HUNK"===e[t].type){let i=e[t-1>=0?t-1:0],r=e[t+1<e.length?t+1:e.length-1],a=i?.blobLineNumber,s=r?.blobLineNumber;a&&s&&(n.push({start:a,end:a+40}),n.push({start:Math.max(s-40,1),end:s}))}let i=e[e.length-1].blobLineNumber;return i<t&&n.push({start:i,end:i+40}),n}(L.diffLines,L.newTreeEntry?.lineCount??0)),B.current=!B.current;let e=await eG(U.current,i,L.pathDigest);if(void 0!==e){let t={...L};t.diffLines=rK(t.diffLines,e.diffEntryWithContext),I(t),n.current[f]=t,r()}},z=(0,d.useCallback)(async()=>{if(0===L.diffLines.length){let e;try{e=await eW({repo:m,sha1:L.oldOid,sha2:L.newOid,entry:L.diffNumber.toString()})}catch{throw Error("Error fetching diff lines")}let t={...L};t.diffLines=e,I(t),n.current[f]=t}L.diffManuallyExpanded=!0,n.current[f].diffManuallyExpanded=!0,P(!0),r(),requestAnimationFrame(()=>{x?.(f,{align:"center"})})},[n,L,f,r]);(0,d.useEffect)(()=>{I(n.current[f]),U.current=[]},[p,f,n,h,m.name,m.ownerLogin,L.path,I]);let V=(0,d.useMemo)(()=>{if(L.isBinary||L.isSubmodule||(0,eU.dK)(L))return!1;if(B.current||(n.current[f]?.diffLines?.[1]?.blobLineNumber||0)>1)return!0;let e=n.current[f]?.diffLines?.length||0,t=n.current[f]?.diffLines?.[e-1]?.blobLineNumber||0,i=n.current[f]?.newTreeEntry?.lineCount||0;return!!(t<i)||!!(e-1<i)},[n.current[f]?.diffLines,n.current[f]?.newTreeEntry?.lineCount,f,n,L]),G=(0,d.useMemo)(()=>({avatarUrl:y?.avatarURL??"",diffViewPreference:b.splitPreference,isSiteAdmin:!1,commentsPreference:b.commentsPreference,login:y?.login??"",lineSpacingPreference:b.lineSpacing,tabSizePreference:y?.tabSize??4,viewerCanComment:v.canComment,viewerCanApplySuggestion:!1}),[y?.avatarURL,y,y?.login,y?.tabSize,b]),W=(0,d.useMemo)(()=>{if(L.copilotChatReference)return{copilotChatReference:L.copilotChatReference}},[L]),K=(0,d.useId)(),q=`heading-${K}`;return(0,a.jsxs)("div",{role:"region","aria-labelledby":q,className:"position-relative",style:{contain:"layout"},children:[(0,a.jsx)("div",{className:r0.diffHeaderWrapper,style:{"--header-sticky-offset":`${u}px`},children:(0,a.jsx)(eB.B,{areLinesExpanded:B.current,canExpandOrCollapseLines:V,fileLinkHref:`#diff-${L.pathDigest}`,isCollapsed:T,isBinary:L.isBinary,isSubmodule:M,headingId:q,size:L.diffSize,canToggleRichDiff:L.canToggleRichDiff,linesAdded:L.linesAdded,linesChanged:L.linesChanged,linesDeleted:L.linesDeleted,newMode:L.newTreeEntry?.mode,newPath:L.newTreeEntry?.path,oldMode:L.oldTreeEntry?.mode,oldPath:L.oldTreeEntry?.path,patchStatus:L.status,path:L.path,onToggleExpandAllLines:H,onToggleFileCollapsed:e=>{e.altKey?s(!T):(L.collapsed=!T,n.current[f].collapsed=!T,D(!T))},onToggleDiffDisplay:e=>A(e),rightSideContent:(0,a.jsx)(rX,{oid:"REMOVED"===L.status&&L.deletedSha?L.deletedSha:h,path:L.path,repo:m,isViewable:!L.isSubmodule,copilotDiffChatProps:W}),showRichDiff:R})}),T?null:(0,a.jsxs)("div",{className:"border position-relative rounded-bottom-2",children:[M&&L.submodule&&(0,a.jsx)(rU,{submodule:L.submodule}),R&&(0,a.jsx)(rZ,{commitOid:h,path:L.path,proseDiffHtml:L.proseDifffHtml,fileRendererInfo:L.renderInfo,dependencyDiffPath:L.dependencyDiffPath}),O&&(0,a.jsx)(rO,{diffContext:"commit",copilotChatReference:L.copilotChatReference,searchResults:e,focusedSearchResult:t,diffEntryData:L,baseHelpUrl:l,commentingEnabled:!0,commentBatchPending:!1,repositoryId:m.id.toString(),subject:r1,subjectId:h,viewerData:G,newCommitOid:L.newOid,oldCommitOid:L.oldOid,addInjectedContextLines:F,commentingImplementation:E,markerNavigationImplementation:C,diffLinesManuallyUnhidden:$,onHandleLoadDiff:z,initialExpandedThreadId:_})]})]},`${L.pathDigest}_${L.diffLines.length}`)}function r3(e,t){for(let n of e.diffLines??[]){let i=t(e.path,n.position);i?n.threadsData={totalCommentsCount:i.count,totalCount:i.count,threads:(i.threads??[]).map(e=>({id:e.id,diffSide:e.diffSide,commentsData:e.commentsData,line:n.blobLineNumber,isOutdated:!1}))}:n.threadsData=void 0}return e}try{r2.displayName||(r2.displayName="Diff")}catch{}try{r4.displayName||(r4.displayName="DiffUnmemoized")}catch{}var r6=n(14634);let r9=(0,d.memo)(r5);function r5({treeToggleElement:e,headerInfo:t,searchBox:n,ignoreWhitespace:i}){let r=(0,d.useRef)(null),s=function(e){let[t,n]=(0,d.useState)(!1),i=(0,d.useCallback)(e=>{let i=e[e.length-1].intersectionRatio<1;i!==t&&n(i)},[t,n]);return(0,d.useEffect)(()=>{let t=e.current,n=new IntersectionObserver(i,{root:t?.ownerDocument,threshold:[1],rootMargin:"-1px 0px 0px 0px"});return e.current&&n.observe(e.current),()=>{t&&n.unobserve(t)}},[e,i]),t}(r),o=s?"d-none d-sm-flex":"";return(0,a.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between gap-2 pt-3 pt-lg-4 pb-2 position-sticky top-0 color-bg-default",style:{zIndex:2},ref:r,children:[(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[e,(0,a.jsxs)(iO.A,{as:"h2",className:"mx-2 f4",children:[t.filesChangedString," file",t.filesChanged>1?"s":""," changed"]}),(0,a.jsxs)(eB.C,{className:o,isAddition:!0,children:["+",t.additions]}),(0,a.jsxs)(eB.C,{className:o,isAddition:!1,children:["-",t.deletions]}),(0,a.jsx)("span",{className:`${o} ml-2 fgColor-muted text-small`,style:{whiteSpace:"nowrap"},children:"lines changed"})]}),(0,a.jsxs)("div",{className:"d-flex gap-2 flex-items-center",children:[s&&(0,a.jsx)(r8,{}),void 0!==n&&n,(0,a.jsx)(r6.G,{reloadOnWhitespaceChange:!0,defaultHideWhitespace:i})]})]})}let r8=()=>(0,a.jsx)(H.Q,{leadingVisual:u.ArrowUpIcon,variant:"invisible",className:"fgColor-default px-2 f6 gap-1",onClick:e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})},children:"Top"});try{r9.displayName||(r9.displayName="DiffsHeader")}catch{}try{r5.displayName||(r5.displayName="DiffsHeaderUnmemoized")}catch{}try{r8.displayName||(r8.displayName="GoToTopButton")}catch{}let r7=d.memo(ae);function ae(){return(0,a.jsx)("div",{className:"pt-3",children:(0,a.jsxs)("div",{className:"border borderColor-muted rounded-top-2",children:[(0,a.jsx)("div",{className:"gap-2 p-3 border-bottom borderColor-muted bgColor-muted rounded-top-2",children:(0,a.jsx)(U.O,{height:"sm",variant:"rounded",width:"140px"})}),(0,a.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",children:[(0,a.jsx)(U.O,{height:"sm",variant:"rounded",width:"random"}),(0,a.jsx)(U.O,{height:"sm",variant:"rounded",width:"random"}),(0,a.jsx)(U.O,{height:"sm",variant:"rounded",width:"random"}),(0,a.jsx)(U.O,{height:"sm",variant:"rounded",width:"random"})]})]})})}try{r7.displayName||(r7.displayName="LoadingContentBlock")}catch{}try{ae.displayName||(ae.displayName="LoadingContentBlockUnmemoized")}catch{}function at({diffEntryData:e,contextLinePathURL:t,repo:n,oid:i,treeToggleElement:r,headerInfo:s,totalFileCount:o}){let l=(0,d.useRef)(e),u=(0,eC.X)(),m=(0,c.B)();return(0,a.jsxs)("div",{"data-hpc":!0,children:[o>40&&(0,a.jsx)(eP,{}),(0,a.jsx)(r9,{treeToggleElement:r,headerInfo:s}),e.map((e,r)=>r>=10?null:(0,a.jsx)("div",{className:0===r?"pt-0":"pt-3",children:(0,a.jsx)(r2,{onOptionCollapseToggle:eb.l,diffEntryData:l,index:r,helpUrl:u.helpUrl,contextLinePathURL:t,recalcTotalHeightOfVirtualWindow:eb.l,repo:n,ignoreWhitespace:m.ignoreWhitespace,oid:i})},e.pathDigest))]})}try{at.displayName||(at.displayName="SSRDiffs")}catch{}let an=(0,d.memo)(ai);function ai({totalFileCount:e,diffEntryData:t,contextLinePathURL:n,unselectedFileExtensions:i,repo:r,oid:s,ignoreWhitespace:o,filterTerm:l,searchTerm:u,setSearchTerm:m,isTreeExpanded:h,treeToggleElement:f,headerInfo:p}){let x=function(){let[e,t]=(0,d.useState)(""),n=(0,d.useCallback)(()=>{t((eL(N.fV.hash??"")??"").replace("diff-",""))},[]);return(0,d.useEffect)(()=>(window.addEventListener("hashchange",n),n(),()=>{window.removeEventListener("hashchange",n)}),[n]),e}(),{data:y}=(0,g.ID)();void 0===y&&(y=g.aX);let b=y.lineSpacing,v=(0,g.Qn)(o),j=(0,c.B)(),w=(0,d.useCallback)(()=>S({}),[]),[_,S]=(0,d.useState)({}),E=(0,d.useRef)(t),{findInDiffWorkerPath:L}=(0,K.D)(),I=(0,d.useRef)(t),T=(0,d.useRef)(e>40),D=(0,d.useRef)(null),[R,A]=(0,d.useState)(v),M=(0,d.useRef)(0),O=(0,d.useRef)(e),[$,P]=(0,d.useState)(s),{focusedSearchResult:B,setFocusedSearchResult:U,searchResults:F,currentIndex:H,setCurrentIndex:z}=function(e,t,n,i){let[r,a]=(0,d.useState)(new Map),[s,o]=(0,d.useState)(void 0),[l,c]=(0,d.useState)(0),u=d.useRef();!u.current&&t&&(u.current=new eD.N(new eT.z(n,eR),200,e=>1!==e.query.length));let m=(0,d.useRef)(t);m.current=t;let h=(0,d.useRef)("");(0,d.useEffect)(()=>function(){u.current?.terminate()},[]);let f=(0,d.useRef)([]);return u.current&&e!==f.current&&(u.current.onResponse=e=>{e.query===m.current&&(a(e.matchingDiffs),h.current=m.current)},f.current=e),(0,d.useEffect)(()=>{if(!e||!u.current||!h.current||""===h.current){a(new Map),o(void 0);return}a(new Map),o(void 0),u.current.post({query:h.current,diffEntryInfo:e,currentDiffEntryData:void 0})},[e?.length,e]),(0,d.useEffect)(()=>{if(e&&u.current)if(""===t)a(new Map),o(void 0),c(0),h.current="";else{var n;if(!((n=t).length>0&&n.length<=1e3))return;let i=h.current.length>0&&t.startsWith(h.current);u.current.post({query:t,diffEntryInfo:e,currentDiffEntryData:i?r:void 0}),c(0)}},[t,i]),{focusedSearchResult:s,setFocusedSearchResult:o,searchResults:r,currentIndex:l,setCurrentIndex:c}}(E.current,u,L,_);function V(e){for(let t of E.current)t.collapsed=e;w()}(0,d.useEffect)(()=>{if(i&&i.size>0?E.current=I.current.filter(e=>!i.has((0,ey.QC)(e.path))):E.current=I.current,l&&(E.current=E.current.filter(e=>e.path.toLowerCase().includes(l.toLowerCase()))),O.current!==E.current.length||0===E.current.length){let e=E.current.length;!function(e,t=0){if(void 0===N.XC)return;let n=N.XC.getElementById("screenReaderAnnouncementDiv")??void 0;if(n||(n=function(){if(void 0===N.XC)return;let e=N.XC.createElement("div");return e.classList.add("sr-only","mt-n1"),e.id="screenReaderAnnouncementDiv",e.setAttribute("role","alert"),e.setAttribute("data-testid","screenReaderAnnouncement"),e.setAttribute("aria-live","assertive"),N.XC.body.appendChild(e),e}()),!n)return;let i=n.textContent===e?`${e}\u00A0`:e;setTimeout(()=>{n&&(n.textContent=i)},t)}(0===e?"There are no files selected for viewing":`${e} file${1===e?"":"s"} remain${1===e?"s":""}`,150)}O.current=E.current.length,T.current=E.current.length>40,w()},[i?.size,l]),(0,d.useEffect)(()=>{E.current=t,I.current=t,T.current=e>40,w(),A(o),P(s)},[j.path]);let G=(0,eC.X)(),W=(0,C.VWf)({owner:j.repo.ownerLogin,repo:j.repo.name,sha1:j.commit.sha1,sha2:j.commit.sha2,oid:j.commit.oid}),q=function(e,t,n,i,r,a){let[s,o]=(0,d.useState)(ej),l=(0,d.useRef)([]),c=(0,d.useRef)(n);return(0,d.useEffect)(()=>{if(!i||!r)return;let a=!1,s=async(e,t,n)=>{o(ej);let r=await (0,eN.lS)(`${i}&start_entry=${e}&bytes=${t}&lines=${n}`);if(!a)try{if(r.ok){let e=await r.json();e&&(e.loading=e.loadMore,l.current=l.current.concat(e.extraDiffEntries),e.extraDiffEntries=l.current,e.loadMore&&c.current!==e.asyncDiffLoadInfo.startIndex?(c.current=e.asyncDiffLoadInfo.startIndex,o(e),setTimeout(()=>s(e.asyncDiffLoadInfo.startIndex,e.asyncDiffLoadInfo.byteCount,e.asyncDiffLoadInfo.lineShownCount),0)):(c.current===e.asyncDiffLoadInfo.startIndex?e.error=!0:e.error=!1,e.loading=!1,o(e)))}else o(e=>({...e,loading:!1,error:!0,extraDiffEntries:l.current}))}catch{o(e=>({...e,loading:!1,error:!0,extraDiffEntries:l.current}))}};return s(n,e,t),function(){a=!0}},[e,t,r,n,i,a]),(0,d.useEffect)(()=>{l.current=[],c.current=n},[i,n,a]),s}(j.asyncDiffLoadInfo.byteCount,j.asyncDiffLoadInfo.lineShownCount,j.asyncDiffLoadInfo.startIndex,W,j.moreDiffsToLoad,o);(0,d.useEffect)(()=>{let e=t.concat(q.extraDiffEntries);i&&i.size>0?E.current=e.filter(e=>!i.has((0,ey.QC)(e.path))):E.current=e,l&&(E.current=E.current.filter(e=>e.path.toLowerCase().includes(l.toLowerCase()))),I.current=e,w()},[q.extraDiffEntries.length]);let X=(0,d.useRef)(null),Q=(0,ev.CK)({parentRef:X,shouldUseScrollRef:T.current,size:h?0:E.current.length,estimateSize:(0,d.useCallback)(e=>{var t;let n;if(!T.current)return 0;let i=(t=E.current[e],n=57,t?.collapsed?n:t?.newTreeEntry?.isGenerated&&!t?.diffManuallyExpanded?199:t?.isTooBig?104:(t?.diffLines&&("compact"===b?n+=20*t.diffLines.length:n+=25*t.diffLines.length),t?.newTreeEntry?.lineCount&&t.newTreeEntry.lineCount>(t?.diffLines[t?.diffLines.length-1]?.right??0)&&(n+=32),n));return 0===e&&(i-=16),i},[E.current.length,_]),rangeExtractor(e){if(!T.current)return(0,ev.vp)(e);let t=eL(N.fV.hash.substring(1)),n=document.querySelector("[data-path-digest]:focus-within")?.getAttribute("data-path-digest"),i=E.current.findIndex(e=>e.pathDigest===n),r=E.current.findIndex(e=>t?.endsWith(e.pathDigest));return i<0&&r<0?(0,ev.vp)(e):Array.from(new Set([...(0,ev.vp)(e),...[i,r].filter(e=>e>-1)])).sort((e,t)=>e-t)}});(0,d.useEffect)(()=>{let e=x.includes("R"),t=x.includes("L"),n=t||e,i=n?t?x.split("L")[0]:x.split("R")[0]:x,r=ar(i??x,E.current);if(-1===r){if(q.error&&null!==D){let e=D.current?.childNodes[0];e?.focus(),e?.scrollIntoView({block:"center"})}return}if(T.current)Q.scrollToIndex(r,{align:"center"}),requestAnimationFrame(()=>{if(n&&aa(X,x));else{let e=X.current?.querySelectorAll(`[aria-label="collapse file: ${E.current[r]?.path}"]`);e&&1===e.length&&e[0].focus()}});else if(n&&aa(X,x));else{let e=X.current?.querySelectorAll(`[data-diff-anchor=diff-${i}]`);if(e&&1===e.length){let t=e[0].getBoundingClientRect().top+(N.cg?.scrollY??0)-57-60;N.cg?.scrollTo(0,t);let n=X.current?.querySelectorAll(`[aria-label="collapse file: ${E.current[r]?.path}"]`);n&&1===n.length&&n[0].focus()}}},[x,q]);let J=(0,a.jsx)(eS,{currentPathDigestIndex:M,searchTerm:u,focusedSearchResult:B,currentIndex:H,setCurrentIndex:z,setFocusedSearchResult:U,setSearchTerm:m,searchResults:F,scrollDiffCellIntoView:e=>{let t=ar(e?.pathDigest??"",E.current);-1!==t&&(Q.scrollToIndex(t,{align:"center"}),requestAnimationFrame(()=>{!function(e,t){let n=N.XC?.getElementById(`match-${t}-${e}`);n&&n.scrollIntoView({block:"center"})}(e?.indexWithinDigest??0,e?.pathDigest??"")}))}});return(0,a.jsxs)("div",{"data-hpc":!0,ref:X,children:[T.current&&(0,a.jsx)(eP,{}),(0,a.jsx)(r9,{treeToggleElement:f,headerInfo:p,searchBox:J,ignoreWhitespace:R}),!T.current&&E.current.map((e,t)=>{let i,s;return F.has(e?.pathDigest??"")&&(i=F.get(e?.pathDigest??"")??[]),B&&e?.pathDigest===B?.pathDigest&&(s=B?.indexWithinDigest??-1),(0,a.jsx)("div",{style:{paddingTop:16*(0!==t),left:3,right:3},children:(0,a.jsx)(r2,{diffEntryData:E,diffMatches:i,focusedSearchResult:s,onOptionCollapseToggle:V,index:t,contextLinePathURL:n,recalcTotalHeightOfVirtualWindow:eb.l,repo:r,helpUrl:G.helpUrl,oid:$,ignoreWhitespace:R})},e.pathDigest)}),T.current&&(0,a.jsx)("div",{style:{height:Q.totalSize,width:"100%",position:"relative"},children:Q.virtualItems.map(e=>{let t,i,s=E.current[e.index];return(F.has(s?.pathDigest??"")&&(t=F.get(s?.pathDigest??"")??[]),B&&s?.pathDigest===B?.pathDigest&&(i=B?.indexWithinDigest??-1),s)?(0,a.jsx)("div",{ref:e.measureRef,"data-key":e.key,style:{position:"absolute",paddingTop:16*(0!==e.index),left:3,right:3,transform:`translateY(${e.start}px)`},children:(0,a.jsx)(r2,{diffMatches:t,focusedSearchResult:i,diffEntryData:E,index:e.index,contextLinePathURL:n,onOptionCollapseToggle:V,recalcTotalHeightOfVirtualWindow:w,headerStickyOffset:-e.start,helpUrl:G.helpUrl,repo:r,oid:$,ignoreWhitespace:R,virtualizerScrollTo:Q.scrollToIndex})},s.pathDigest):null})}),j.moreDiffsToLoad&&(0,a.jsxs)(a.Fragment,{children:[q.loading&&(0,a.jsx)(r7,{}),q.error&&(0,a.jsx)("div",{style:{justifyContent:"center",paddingTop:"16px"},ref:D,children:(0,a.jsx)(k.A,{variant:"danger",tabIndex:0,children:(0,a.jsx)("div",{className:"d-flex flex-items-center",style:{justifyContent:"center"},children:"There was a problem loading the remainder of the diff."})})})]})]})}function ar(e,t){for(let n=0;n<t.length;n++)if(e===t[n]?.pathDigest)return n;return -1}function aa(e,t){let n=e.current?.querySelectorAll(`[data-line-anchor=diff-${t}]`);return!!n&&1===n.length&&(n[0].focus(),!0)}try{an.displayName||(an.displayName="Diffs")}catch{}try{ai.displayName||(ai.displayName="DiffsUnmemoized")}catch{}var as=n(70170),ao=n(26940),al=n(92032),ac=n(68415);let ad="diff_file_tree",au=(0,d.memo)(am);function am({contentId:e,diffs:t,onFileSelected:n,diffsHeader:i,unselectedFileExtensions:r,onFilterTextChange:s,onFileExtensionsChange:o}){let[l,c]=(0,d.useState)(""),{getCommentCountByPath:u}=(0,eF.B)(),m=(0,d.useRef)(null),h=(0,d.useRef)(null),f=(0,d.useRef)(null),p=(0,d.useMemo)(()=>(0,ey.s2)(t),[t]),g=t;r&&r.size>0&&(g=g.filter(e=>!r.has((0,ey.QC)(e.path))));let x=(l?g.filter(e=>e.path.toLowerCase().includes(l.toLowerCase())):g).map(e=>{let t=u(e.path);return{...e,totalCommentsCount:t??0}});return(0,a.jsxs)("div",{className:"d-flex flex-column gap-2",id:ad,tabIndex:-1,children:[(0,a.jsx)(j.ak,{commands:{"pull-requests-diff-file-tree:focus-file-tree":function(){let t=document.getElementById(e),n=document.getElementById(ad),i=!1;if(t?.contains(document.activeElement)&&(i=!0),i){let e=f.current||n;h.current=t?.contains(document.activeElement)?document.activeElement:null,e?.focus()}else{let e=h.current||t;f.current=n?.contains(document.activeElement)?document.activeElement:null,e?.focus()}}}}),(0,a.jsx)("h2",{className:"sr-only",children:"File tree"}),(0,a.jsx)("div",{className:"d-md-none",ref:m,children:i}),(0,a.jsx)(ah,{filterText:l,onFilterTextChange:e=>{c(e),s(e)},fileExtensions:p,unselectedFileExtensions:r,onFileExtensionsChange:o}),(0,a.jsx)(al.oj,{diffs:x,onSelect:e=>{n(e,(0,ac.nn)(window.innerWidth)<=ac.Gy.medium?"close_tree":void 0)},sortByDiffOrder:!1})]})}function ah({filterText:e,onFilterTextChange:t,fileExtensions:n,unselectedFileExtensions:i,onFileExtensionsChange:r}){let s=(0,d.useRef)((0,as.s)(e=>t(e),250));return(0,a.jsx)(ao.kF,{filterText:e,fileExtensions:n,unselectedFileExtensions:i,onFilterTextChange:e=>s.current(e),onFilterChange:(e,t)=>{r(e,t.extension)}})}try{au.displayName||(au.displayName="FileTree")}catch{}try{am.displayName||(am.displayName="FileTreeUnmemoized")}catch{}try{ah.displayName||(ah.displayName="FileFilter")}catch{}var af=n(89574);async function ap({repo:e,commitOid:t,untilCommentId:n}){let i=await (0,eN.Sr)((0,eV.RD)((0,C.clg)({owner:e.ownerLogin,repo:e.name,commitOid:t,untilCommentId:n})));if(i.ok){let e=await i.json();return(0,eV.Av)(e),e}throw Error("Failed to fetch comment data")}let ag=(0,d.createContext)({diffFindOpen:!1,setDiffFindOpen:()=>void 0});function ax({children:e,searchTerm:t,setSearchTerm:n}){let i=(0,d.useRef)(""),[r,s]=(0,d.useState)(!1),o=(0,d.useCallback)(e=>{e&&""===t&&""!==i.current?n(i.current):e||""===t||(i.current=t,n("")),s(e)},[t,n]),l=(0,d.useMemo)(()=>({diffFindOpen:r,setDiffFindOpen:o}),[r,o]);return(0,a.jsx)(ag.Provider,{value:l,children:e})}try{ag.displayName||(ag.displayName="DiffFindOpenContext")}catch{}try{ax.displayName||(ax.displayName="DiffFindOpenProvider")}catch{}var ay=n(321);let ab={SplitPageLayout_Content:"Commit-module__SplitPageLayout_Content--ZY6yu",HiddenPane:"Commit-module__HiddenPane--_CsIZ",Pane:"Commit-module__Pane--r5DTJ",MobileExpanded:"Commit-module__MobileExpanded--OVBPx",TreeExpanded:"Commit-module__TreeExpanded--asa0G"},aC=(0,v.E7)(),av="diff-content-parent";function aN(){(0,_.L)(!0);let e=(0,c.B)(),{splitPagePaneHidden:t,splitPageContentHidden:n,treeToggleElement:i,collapseTree:r,isMobileTreeExpanded:o,isTreeExpanded:u}=(0,ay.q)(ad,e.fileTreeExpanded,e.currentUser),[m,h]=(0,d.useState)(()=>new Set),[f]=(0,w.I)(()=>!1,!0,[]),[v,k]=(0,d.useState)(""),[I,T]=(0,d.useState)(""),[D,R]=(0,d.useState)(!1),O=(0,d.useCallback)((e,t)=>{"close_tree"===t&&r()},[r]),$=function(e){let t=(0,s.t)(),[n,i]=(0,d.useState)({branches:[],tags:[],loading:!0});return(0,d.useEffect)(()=>{let n=!1;return(async()=>{i({branches:[],tags:[],loading:!0});let r=await (0,eN.lS)((0,C.jnS)({owner:t.ownerLogin,repo:t.name,commitish:e}));if(!n)try{if(r.ok){let e=await r.json();e.loading=!1,e&&i({...e,loading:!1})}else i({branches:[],tags:[],loading:!1})}catch{i({branches:[],tags:[],loading:!1})}})(),function(){n=!0}},[t.ownerLogin,t.name,e]),n}(e.commit.oid),P=(0,C.t0c)({owner:e.repo.ownerLogin,repo:e.repo.name,commitish:e.commit.oid}),{mutate:B}=(0,p.U)({onSuccess:()=>{},onError:()=>{}}),U=(0,g.C0)(e.splitViewPreference),F=(0,d.useMemo)(()=>({splitPreference:U,lineSpacing:e.diffLineSpacingPreference,commentsPreference:e.commentsPreference}),[e.commentsPreference,e.diffLineSpacingPreference,U]),{data:H}=(0,g.ID)(F),z=(0,d.useCallback)(()=>{B({commentsPreference:H?.commentsPreference===x.sI.Visible?x.sI.Collapsed:x.sI.Visible})},[H?.commentsPreference,B]),V=(0,d.useCallback)((e,t)=>{let n=new Set(m);"selectFileExtension"===e?n.delete(t):"unselectFileExtension"===e&&n.add(t),h(n)},[m]);(0,d.useEffect)(()=>{h(new Set)},[e.commit]),(0,d.useEffect)(()=>{(N.cg?.scrollY??0)>0&&N.cg?.scrollTo(0,0)},[e.path]);let{deferredCommentData:G,state:W}=function(e,t){let[n,i]=(0,d.useState)(void 0),[r,a]=(0,d.useState)("initial");return(0,d.useEffect)(()=>{let n;i(void 0),a("loading");let r=N.cg?.location.hash;r&&/^#commitcomment-\d+$/.test(r)&&(n=r.replace("#commitcomment-","")),(async()=>{try{let r=await ap({repo:e,commitOid:t,untilCommentId:n});i(r),a("loaded")}catch{a("error")}})()},[t,e]),{deferredCommentData:n,state:r}}(e.repo,e.commit.oid),K=G?.threadMarkers,q=G?.inlineComments,[X,Q]=(0,d.useState)(void 0);if((0,d.useEffect)(()=>{if("loaded"===W){let e=N.cg?.location.hash.slice(1);if(e&&G){if(/^commitcomment-\d+$/.test(e))G?.discussionComments.comments.find(t=>t.urlFragment===e)&&N.cg?.requestAnimationFrame(()=>{let t=document.getElementById(e??"");t&&(t.scrollIntoView({block:"center"}),t.focus())});else if(/^r\d+$/.test(e)){let t=e.replace("r","");for(let e of G.threadMarkers)if(e.threads){for(let n of e.threads)if(n.commentsData.comments){for(let e of n.commentsData.comments)if(e&&e.id&&e.id.toString()===t)return void Q(n.id)}}}}}},[G,W]),e.unavailableReason)return(0,a.jsx)(eg,{commit:e.commit,commitInfo:$,unavailableReason:e.unavailableReason});let[J,Y]=function(e){let t=e.findIndex(e=>void 0===e.oldOid)-1;return[-2===t?e:e.slice(0,t+1),e.map(e=>({path:e.path,changeType:e.status,pathDigest:e.pathDigest}))]}(e.diffEntryData);return(0,a.jsx)(L.RelayEnvironmentProvider,{environment:aC,children:(0,a.jsxs)(eF.r,{initialInlineComments:q,initialFiles:K,initialExpandedThreadId:X,children:[(0,a.jsx)(j.ak,{commands:{"commit-diff-view:create-permalink":()=>{let t=(0,C.$Qz)({owner:e.repo.ownerLogin,repo:e.repo.name,commitish:e.commit.oid});(0,b.kd)(t)},"commit-diff-view:collapse-expand-comments":z}}),(0,a.jsxs)(S.O7,{children:[(0,a.jsxs)(S.O7.Header,{children:[(0,a.jsx)(A,{commitBranchState:$,oid:e.commit.oid,repo:e.repo}),(0,a.jsx)(em,{commit:e.commit,commitInfo:$,repo:e.repo})]}),(0,a.jsx)(S.O7.Pane,{position:"start",sticky:!0,divider:{regular:"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:!0,className:(0,E.$)(t?ab.HiddenPane:ab.Pane,o&&ab.MobileExpanded,u&&ab.TreeExpanded),children:(0,a.jsx)(l.t,{fallback:(0,a.jsx)("span",{children:"File tree failed to load."}),children:(0,a.jsx)(au,{contentId:av,diffs:Y,onFileSelected:O,unselectedFileExtensions:m,diffsHeader:(0,a.jsx)(r9,{treeToggleElement:i,headerInfo:e.headerInfo}),onFileExtensionsChange:V,onFilterTextChange:k})})}),(0,a.jsx)(S.O7.Content,{as:"div",width:"full",hidden:n,padding:"none",className:ab.SplitPageLayout_Content,children:(0,a.jsxs)("div",{id:av,tabIndex:-1,children:[f?(0,a.jsx)(at,{diffEntryData:J,contextLinePathURL:P,repo:e.repo,oid:e.commit.oid,treeToggleElement:i,headerInfo:e.headerInfo,totalFileCount:e.diffEntryData?.length??0}):(0,a.jsx)(ax,{searchTerm:I,setSearchTerm:T,children:(0,a.jsx)(an,{totalFileCount:e.diffEntryData?.length??0,treeToggleElement:i,headerInfo:e.headerInfo,isTreeExpanded:o,searchTerm:I,setSearchTerm:T,ignoreWhitespace:e.ignoreWhitespace,diffEntryData:J,contextLinePathURL:P,filterTerm:v,unselectedFileExtensions:m,repo:e.repo,oid:e.commit.oid})}),(0,a.jsx)(af.c,{comments:G?.discussionComments?.comments,commentCount:G?.discussionComments?.count,canLoadMore:G?.discussionComments?.canLoadMore,subscribed:G?.subscribed,providerState:W,repo:e.repo,commitOid:e.commit.oid,children:(0,a.jsx)(M.$,{commit:e.commit,commentInfo:e.commentInfo,repoOwnerGlobalRelayId:e.repoOwnerGlobalRelayId})}),(0,a.jsx)(y.nq,{})]})})]})]})})}try{aN.displayName||(aN.displayName="Commit")}catch{}var aj=n(27851);function aw({url:e}){return(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("p",{className:"color-fg-muted f6 mt-4",children:["Seeing something unexpected? Take a look at the",(0,a.jsxs)(z.A,{inline:!0,href:e,children:[" ","GitHub commits guide"]}),"."]})})}try{aw.displayName||(aw.displayName="CommitHelpMessage")}catch{}let a_=(0,d.createContext)({since:null,until:null,author:null,currentBlobPath:"",pagination:{hasNextPage:!1,hasPreviousPage:!1,endCursor:"",startCursor:""},newPath:null,originalBranch:null});function aS({filters:e,children:t}){return(0,a.jsx)(a_.Provider,{value:e,children:t})}function aE(){return(0,d.useContext)(a_)}try{a_.displayName||(a_.displayName="FilterContext")}catch{}try{aS.displayName||(aS.displayName="FilterProvider")}catch{}var aL=n(4539),ak=n(41906),aI=n(56941);function aT(){let e=aE();return e.newPath&&e.originalBranch}function aD(){let e=(0,s.t)(),t=aE();return aT()?(0,a.jsx)(aI.s,{sx:{pt:1,pb:0},children:(0,a.jsxs)("div",{className:"d-flex flex-items-baseline",children:[(0,a.jsx)(aI.s.Heading,{as:"h3",title:`Renamed to ${t.newPath}`,"data-testid":"commit-note-title"}),(0,a.jsx)(ea.N,{to:(0,C.GpY)({owner:e.ownerLogin,repo:e.name,ref:t.originalBranch,path:t.newPath}),children:"(Browse History)"})]})}):null}function aR(){let e=(0,ak.ej)();return e?.hasRenameCommits?(0,a.jsx)(aI.s,{children:(0,a.jsxs)("div",{className:"d-flex flex-items-baseline",children:[(0,a.jsx)(aI.s.Heading,{as:"h3",title:`Renamed from ${e?.oldName}`,"data-testid":"commit-note-title"}),(0,a.jsx)(ea.N,{to:e?.historyUrl,children:"(Browse History)"})]})}):null}function aA(){let e=(0,ak.ej)();return e?.hasRenameCommits?null:(0,a.jsx)(aI.s,{clipTimeline:"bottom",children:(0,a.jsx)(aI.s.Heading,{as:"h3",title:"End of commit history for this file","data-testid":"commit-note-title"})})}function aM(){let e=aE(),t=(0,ak.xs)();return!e.currentBlobPath||e.currentBlobPath&&e.pagination.hasNextPage?null:(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)(aI.s,{leadingVisual:(0,a.jsx)(tw.A,{size:"small"})}),!t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(aR,{}),(0,a.jsx)(aA,{})]})]})}try{aD.displayName||(aD.displayName="RenamedToHistory")}catch{}try{aR.displayName||(aR.displayName="RenamedFromHistory")}catch{}try{aA.displayName||(aA.displayName="EndOfFileHistory")}catch{}try{aM.displayName||(aM.displayName="EndOfFile")}catch{}function aO({commitGroups:e,deferredDataUrl:t,softNavToCommit:n}){let i=aE(),r=(0,s.t)(),o=(0,q.wu)(t);return(0,a.jsxs)("div",{className:"mb-3","data-hpc":!0,children:[(0,a.jsx)(iO.A,{as:"h2",className:"sr-only",children:"Commit History"}),(0,a.jsx)(aL.f,{leadingContent:(0,a.jsx)(aD,{}),commitGroups:e,trailingContent:(0,a.jsx)(aM,{}),repository:r,deferredCommitData:o,shouldClipTimeline:function(){let e=aT(),t=aE();return!e&&!t.pagination.hasPreviousPage}(),currentBlobPath:i.currentBlobPath,softNavToCommit:n})]})}try{aO.displayName||(aO.displayName="CommitList")}catch{}var a$=n(34910),aP=n(24991),aB=n(34700),aU=n(89169);let aF={Box:"CopilotCommitRecapPanel-module__Box--dp2m0",Box_1:"CopilotCommitRecapPanel-module__Box_1--XOyyJ",Box_2:"CopilotCommitRecapPanel-module__Box_2--oaRsM",Octicon:"CopilotCommitRecapPanel-module__Octicon--eqdz1",Heading:"CopilotCommitRecapPanel-module__Heading--WjxBK",Box_3:"CopilotCommitRecapPanel-module__Box_3--sWl2t",Box_4:"CopilotCommitRecapPanel-module__Box_4--aKBoU",Text:"CopilotCommitRecapPanel-module__Text--Hv5_h",Box_5:"CopilotCommitRecapPanel-module__Box_5--NYZ5o",Box_6:"CopilotCommitRecapPanel-module__Box_6--qgyyq",Box_7:"CopilotCommitRecapPanel-module__Box_7--MckvN",Text_1:"CopilotCommitRecapPanel-module__Text_1--bVf_z",Box_8:"CopilotCommitRecapPanel-module__Box_8--GMfvm",Text_2:"CopilotCommitRecapPanel-module__Text_2--OrHB8",fadeInAuthor:"CopilotCommitRecapPanel-module__fadeInAuthor--R7Xzn",avatarLink:"CopilotCommitRecapPanel-module__avatarLink--bckpQ",headerContainer:"CopilotCommitRecapPanel-module__headerContainer--eXL5I",authorNameLink:"CopilotCommitRecapPanel-module__authorNameLink--oBtUm",authorNameText:"CopilotCommitRecapPanel-module__authorNameText--GQmHC",prLink:"CopilotCommitRecapPanel-module__prLink--bMlBe",commitMetadataContainer:"CopilotCommitRecapPanel-module__commitMetadataContainer--X5O0_",commitCountLink:"CopilotCommitRecapPanel-module__commitCountLink--hvwic",commitCountText:"CopilotCommitRecapPanel-module__commitCountText--GnCth",Footer:"CopilotCommitRecapPanel-module__Footer--d0O6J",FeedbackButtons:"CopilotCommitRecapPanel-module__FeedbackButtons--JU7GE",isHidden:"CopilotCommitRecapPanel-module__isHidden--oXV1q",relativeTime:"CopilotCommitRecapPanel-module__relativeTime--arlZY"},aH=({size:e})=>(0,a.jsxs)(G.A,{className:"ml-2",variant:(e=>{switch(e.toUpperCase()){case"XS":case"S":return"success";case"M":return"attention";case"L":return"severe";case"XL":return"danger";default:return"secondary"}})(e),size:"small",children:["size: ",e]}),az=({initials:e})=>(0,a.jsx)("div",{className:aF.Box,children:e.toUpperCase()}),aV=({login:e,avatarUrl:t,name:n,repoOwner:i,repoName:r,refName:s})=>{let o=(e=>{let t=e.trim();if(!t)return"??";let n=t.split(/\s+/).filter(e=>e.length>0);return n.length>=2?(n[0]?.charAt(0)||"")+(n[n.length-1]?.charAt(0)||""):t.charAt(0)+(t.charAt(1)||"")})(e||n);if(t&&e){let n=`/${encodeURIComponent(i)}/${encodeURIComponent(r)}/commits${s?`/${encodeURIComponent(s)}`:""}?author=${encodeURIComponent(e)}`;return(0,a.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer nofollow",className:aF.avatarLink,children:(0,a.jsx)(n_.r,{src:t,size:24,alt:`@${e}`})})}return(0,a.jsx)(az,{initials:o})},aG=({author:e,repoOwner:t,repoName:n,refName:i,className:r})=>{if(e.login){let s=`/${encodeURIComponent(t)}/${encodeURIComponent(n)}/commits${i?`/${encodeURIComponent(i)}`:""}?author=${encodeURIComponent(e.login)}`;return(0,a.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer nofollow",className:`${r} ${aF.authorNameLink}`,children:e.name})}return(0,a.jsx)("span",{className:`${r} ${aF.authorNameText}`,children:e.name})},aW=({pr:e,repoOwner:t,repoName:n})=>{let i=`/${encodeURIComponent(t)}/${encodeURIComponent(n)}/pull/${encodeURIComponent(e.number)}`;return(0,a.jsxs)("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:aF.prLink,children:[(0,a.jsx)("span",{style:{color:"merged"===e.state?"var(--fgColor-done)":"var(--fgColor-open)"},children:(0,a.jsx)(u.GitPullRequestIcon,{size:16})}),(0,a.jsxs)("span",{children:["#",e.number]})]})},aK=({pr:e,commits:t,size:n,repoOwner:i,repoName:r})=>{let s=(()=>{if(1===t.length&&t[0])return(0,C.$Qz)({owner:i,repo:r,commitish:t[0].oid});if(t.length>=2){let e=t.filter(e=>e.author?.date&&""!==e.author.date.trim());if(e.length>=2){let t=[...e].sort((e,t)=>new Date(e.author.date).getTime()-new Date(t.author.date).getTime());if(t.length>=2){let e=t[0],n=t[t.length-1];if(e&&n)return`/${encodeURIComponent(i)}/${encodeURIComponent(r)}/compare/${e.oid}^...${n.oid}`}}}return null})(),o=t.length;return(0,a.jsxs)("div",{className:aF.commitMetadataContainer,children:[(0,a.jsxs)("div",{className:"d-flex flex-items-center",children:[s?(0,a.jsxs)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:aF.commitCountLink,children:[(0,a.jsx)(u.GitCommitIcon,{size:16}),1===o?"1 commit":`${o} commits`]}):(0,a.jsxs)("span",{className:aF.commitCountText,children:[(0,a.jsx)(u.GitCommitIcon,{size:16}),1===o?"1 commit":`${o} commits`]}),n&&(0,a.jsx)(aH,{size:n})]}),e&&(0,a.jsx)(aW,{pr:e,repoOwner:i,repoName:r})]})},aq=[];function aX({isVisible:e,isLoading:t,analysis:n,repoOwner:i,repoName:r,refName:s,onClose:o,commitGroups:l=aq}){let c=(0,d.useRef)(null),m=(0,d.useRef)(null),{sendClickAnalyticsEvent:h}=(0,nU.S)(),[f,p]=(0,d.useState)(!1),g=n.analysisData,x=n.errorMessage,y=(0,d.useMemo)(()=>{let e=new Map;for(let t of g)e.set(t.oid,{summary:t.summary,size:t.size});return e},[g]),b=(0,d.useMemo)(()=>l&&0!==l.length?l.map((e,t)=>{let n=new Map;for(let t of e.commits)if(t.author){let e=t.author.login||t.author.name;n.has(e)||n.set(e,{login:t.author.login,avatarUrl:t.author.avatar_url,name:t.author.name})}return{groupIndex:t,authors:Array.from(n.values()),commitCount:e.commits.length,commits:e.commits,pr:e.pr}}):[],[l]),C=!!x,v=(0,d.useCallback)(e=>{h({category:"copilot.commit-recap",action:`feedback-${e}`,refName:s||""}),p(!0)},[h,s]),N=(0,d.useCallback)(()=>{h({category:"copilot.commit-recap",action:"panel-closed",refName:s||""}),o?.()},[o,h,s]);if((0,d.useEffect)(()=>{let e=m.current;if(!e)return;let t=e=>{let t=e.target.closest("a");t&&t.href&&h({category:"copilot.commit-recap",action:"link-clicked",refName:s||"",href:t.href})};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}},[e,s,g,h]),!e)return null;let j=0===g.length&&!C;return(0,a.jsxs)("div",{className:aF.Box_1,ref:m,children:[(0,a.jsxs)("div",{className:aF.Box_2,children:[(0,a.jsxs)("div",{className:aF.headerContainer,children:[(0,a.jsx)(I.A,{icon:u.CopilotIcon,className:aF.Octicon}),(0,a.jsx)(iO.A,{as:"h3",className:aF.Heading,children:"Commit Recap"}),(0,a.jsx)(aB.X,{className:"pl-2"})]}),o&&(0,a.jsx)(V.K,{"aria-label":"Close commit recap",icon:u.XIcon,size:"small",variant:"invisible",onClick:N})]}),j&&(0,a.jsxs)("div",{className:aF.Box_3,children:[(0,a.jsx)("div",{className:aF.Box_4,children:(0,a.jsx)(a$.A,{})}),(0,a.jsx)("span",{className:aF.Text,children:"Analyzing recent commits..."})]}),C&&(0,a.jsx)(k.A,{variant:"danger",className:aF.Box_4,children:x}),g.length>0&&!C&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{ref:c,className:`${aF.Box_5} ${aF.fadeInAuthor}`,children:b.map((e,n)=>{let o=e.commits[0]?.oid,l=o?y.get(o):void 0,c=e.authors,d=e.commits.reduce((e,t)=>{let n=new Date(t.author?.date||0);return n>e?n:e},new Date(0));return l?(0,a.jsxs)("div",{className:aF.Box_6,children:[c.length>0&&(0,a.jsxs)("div",{className:aF.Box_7,children:[c.slice(0,3).map((e,o)=>(0,a.jsx)("div",{className:`${aF.fadeInAuthor} ${t&&n===b.length-1?aF.isHidden:""}`,style:{animationDelay:`${200*n+100*o}ms`},children:(0,a.jsx)(aV,{login:e.login,avatarUrl:e.avatarUrl,name:e.name,repoOwner:i,repoName:r,refName:s})},e.login||e.name)),c.length>3&&(0,a.jsxs)("span",{className:aF.Text_1,children:["+",c.length-3]})]}),(0,a.jsxs)("div",{className:`${aF.Box_8} ${aF.fadeInAuthor}`,style:{animationDelay:`${200*n}ms`},children:[c.length>0&&(0,a.jsxs)("span",{children:[c.map((e,t)=>(0,a.jsxs)("span",{children:[(0,a.jsx)(aG,{author:e,repoOwner:i,repoName:r,refName:s,className:aF.fadeInAuthor}),t<c.length-1&&", "]},e.login||e.name)),(0,a.jsx)(aU.A,{className:`${aF.fadeInAuthor} ${aF.relativeTime}`,date:d})]}),(0,a.jsx)(aP.To,{markdown:l.summary,isStreaming:!1,openLinksInCurrentTab:!1})]}),e&&(0,a.jsx)("div",{className:`${aF.fadeInAuthor} ${t&&n===b.length-1?aF.isHidden:""}`,style:{animationDelay:`${200*n+300}ms`},children:(0,a.jsx)(aK,{pr:e.pr,commits:e.commits,size:e.commits.length>0&&e.commits[0]?.oid?y.get(e.commits[0].oid)?.size:void 0,repoOwner:i,repoName:r})})]},`commitGroup-${e.groupIndex}`):null})})}),(0,a.jsxs)("div",{className:aF.Footer,children:[(0,a.jsx)("span",{className:aF.Text_2,children:"AI-generated content may be inaccurate. Please verify important information."}),f?(0,a.jsxs)("span",{className:aF.Text_2,children:["Thank you. This feature is under development and ",(0,a.jsx)("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLSeKJgUAL0ENwW13Qy-QuiihzSfXfs81vzP0Jc5FZX-CCNDJnQ/viewform",children:"detailed feedback"})," is appreciated!"]}):(0,a.jsxs)("div",{className:aF.FeedbackButtons,children:[(0,a.jsx)(V.K,{"aria-label":"Good summary",icon:u.ThumbsupIcon,size:"small",variant:"invisible",onClick:()=>v("positive")}),(0,a.jsx)(V.K,{"aria-label":"Bad summary",icon:u.ThumbsdownIcon,size:"small",variant:"invisible",onClick:()=>v("negative")})]})]})]})}try{aH.displayName||(aH.displayName="SizeBadge")}catch{}try{az.displayName||(az.displayName="Monogram")}catch{}try{aV.displayName||(aV.displayName="AuthorAvatar")}catch{}try{aG.displayName||(aG.displayName="AuthorNameLink")}catch{}try{aW.displayName||(aW.displayName="RichPullRequestLink")}catch{}try{aK.displayName||(aK.displayName="CommitGroupMetadata")}catch{}try{aX.displayName||(aX.displayName="CopilotCommitRecapPanel")}catch{}var aQ=n(50609),aJ=n(26807),aY=n(83569),aZ=n(53904),a0=n(6442),a1=n(84929),a2=n(96912),a4=n(5225);async function a3(e){let t=await (0,eN.lS)(e);return t.ok?await t.json():void 0}let a6=new Map,a9=(0,a4.A)(a3,{cache:a6});function a5(e,t){let n=new URL(N.fV.origin+N.fV.pathname+N.fV.search,N.fV.origin),i=n.searchParams;for(let e of t)i.has(e)&&i.delete(e);for(let[t,n]of Object.entries(e))i.set(t,n.toString());return n.pathname+n.search}var a8=n(6907);let a7=(0,d.lazy)(()=>Promise.resolve().then(n.bind(n,47594)).then(e=>({default:e.DatePicker}))),se=()=>(0,a.jsx)(I.A,{icon:u.CalendarIcon,className:"fgColor-muted",sx:{my:"2px"}});function st({repo:e,refInfo:t,path:n,author:i,contributorsUrl:r,since:o,until:l,showCopilotButton:c=!1,showCopilotPopover:m=!1,onCopilotRecap:h,isLoadingCopilotRecap:f=!1}){let p=t.name;p===t.currentOid&&(p=(0,X.F)(t.currentOid));let g=(0,aJ.Z)(),x=function(e){let t=(0,s.t)(),[n,i]=(0,d.useState)({users:[],error:!1,loading:!0});return(0,d.useEffect)(()=>{let t=!1;return(async()=>{i({users:[],error:!1,loading:!0});let n=await a9(e);if(t)return;let r=[],a=!1;try{n?r=n.authors:a=!0}catch{a=!0}i({users:r,error:a,loading:!1})})(),function(){t=!0}},[t,"",e,"all"]),n}(r),[y,b]=(0,d.useState)(m);d.useEffect(()=>{b(m)},[m]);let v=(0,d.useCallback)(async()=>{b(!1),await (0,eN.DI)("/settings/dismiss-notice/copilot_commit_recap_new_user_popover",{method:"POST"})},[]),N=d.useMemo(()=>{let e=(0,a1.H)(o??""),t=(0,a1.H)(l??"");return(0,a2.f)(e)&&(0,a2.f)(t)?{from:e,to:t}:null},[o,l]),j=n?.split("/");return(0,a.jsxs)(O.B,{direction:"horizontal",gap:"condensed",justify:"space-between",className:"mb-3",children:[n&&(0,a.jsx)("div",{className:"d-flex flex-items-center",children:(0,a.jsxs)("div",{className:"d-flex flex-items-baseline flex-column flex-sm-row",children:[(0,a.jsx)(iO.A,{as:"h2",className:"sr-only",children:"Breadcrumbs"}),(0,a.jsx)("span",{className:"fgColor-default no-wrap",children:"History for"}),(0,a.jsxs)(aZ.A,{className:"ml-1",children:[(0,a.jsx)(aZ.A.Item,{href:(0,C.GpY)({owner:e.ownerLogin,repo:e.name}),children:e.name}),j.map((n,i,r)=>{let s=(0,C.GpY)({owner:e.ownerLogin,repo:e.name,ref:t.name,path:r.slice(0,i+1).join("/")}),o=i===r.length-1;return(0,a.jsx)(aZ.A.Item,{sx:{whiteSpace:"normal",...o?{fontWeight:"bold"}:{}},href:s,selected:o,children:n},s)})]}),(0,a.jsxs)("div",{className:"no-wrap",children:[(0,a.jsx)("span",{className:"mr-2 ml-0 ml-sm-2 fgColor-default",children:"on"}),(0,a.jsx)(ee.A,{href:(0,C.IO9)({repo:e,commitish:t.name,action:"tree"}),children:p})]})]})}),!n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iO.A,{as:"h2",className:"sr-only",children:"Branch selector"}),(0,a.jsx)(aQ.PI,{cacheKey:t.listCacheKey,canCreate:!1,hotKey:"w",currentCommitish:t.name,getHref:t=>(0,C.GpY)({owner:e.ownerLogin,repo:e.name,ref:t}),selectedRefType:t.refType,defaultBranch:e.defaultBranch,owner:e.ownerLogin,repo:e.name,idEnding:"commits"})]}),(0,a.jsxs)("div",{className:"d-flex flex-column flex-sm-row gap-2",children:[c&&(0,a.jsxs)("div",{style:{position:"relative"},children:[(0,a.jsx)(H.Q,{variant:"default",leadingVisual:u.CopilotIcon,disabled:f,onClick:h,children:f?"Analyzing...":"Commit Recap"}),y&&(0,a.jsx)(a0.A,{relative:!1,open:!0,caret:"top",className:"mt-2",style:{left:"50%",transform:"translateX(-50%)"},children:(0,a.jsxs)(a0.A.Content,{overflow:"visible",className:"p-3",children:[(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("strong",{children:"Introducing the Commit Recap"})}),(0,a.jsx)("div",{className:"mb-3 text-small",children:"Groups together commits to cut through noise with summarized changes and linked PRs."}),(0,a.jsx)("div",{className:"d-flex gap-2",children:(0,a.jsx)(H.Q,{size:"small",onClick:v,children:"OK, got it"})})]})})]}),(0,a.jsx)(iO.A,{as:"h2",className:"sr-only",children:"User selector"}),(0,a.jsx)(aY.T,{defaultText:"All users",width:"medium",usersState:x,showTypedInUser:!0,currentUser:i??void 0,onOpenChange:e=>e,onSelect:e=>{e.login!==i?.login&&g(a5({author:e.login},["author","before","after"]))},renderCustomFooter:()=>(0,a.jsx)("div",{className:"px-2 py-3 border-top border-color-border-default",children:(0,a.jsx)(H.Q,{variant:"link",as:"a",href:a5({},["author"]),block:!0,children:"View commits for all users"})})}),(0,a.jsxs)(d.Suspense,{fallback:(0,a.jsx)(H.Q,{leadingVisual:se,trailingVisual:u.TriangleDownIcon,children:"All time"}),children:[(0,a.jsx)(iO.A,{as:"h2",className:"sr-only",children:"Datepicker"}),(0,a.jsx)(a7,{variant:"range",value:N,maxDate:new Date,showTodayButton:!0,showClearButton:!0,compressedHeader:!0,onChange:e=>{if(!e)return void g(a5({},["since","until"]));let t=function(e){if(e)return{startDate:(0,a8.x)(e.from,{representation:"date"}),endDate:(0,a8.x)(e.to,{representation:"date"})}}(e);if(!t)return;let{startDate:n,endDate:i}=t;g(a5({since:n,until:i},["before","after"]))},placeholder:"All time",anchor:({children:e,...t})=>(0,a.jsx)(H.Q,{...t,"data-testid":"date-picker-commits",leadingVisual:se,trailingVisual:u.TriangleDownIcon,children:e})})]})]})]})}try{a7.displayName||(a7.displayName="DatePicker")}catch{}try{se.displayName||(se.displayName="StyledCalendarIcon")}catch{}try{st.displayName||(st.displayName="ListHeader")}catch{}function sn({paginationInfo:e}){let t=e.hasPreviousPage,n=e.hasNextPage,i=e=>e?{"aria-disabled":!0,sx:{backgroundColor:"transparent",border:"none",cursor:"default",color:"primer.fg.disabled",fontWeight:"normal"},onClick:e=>e.preventDefault()}:{};return t||n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iO.A,{as:"h2",className:"sr-only",children:"Pagination"}),(0,a.jsx)("div",{className:"d-flex flex-justify-center mt-2",children:(0,a.jsxs)(il.A,{children:[(0,a.jsx)(H.Q,{as:ea.N,to:si(e,!1),className:"fgColor-accent text-normal",...i(!t),tabIndex:0,variant:"invisible","data-testid":"pagination-prev-button",leadingVisual:t?()=>(0,a.jsx)(I.A,{icon:u.ChevronLeftIcon,className:"fgColor-accent"}):null,children:"Previous"}),(0,a.jsx)(H.Q,{as:ea.N,to:si(e,!0),className:"fgColor-accent text-normal",...i(!n),tabIndex:0,variant:"invisible","data-testid":"pagination-next-button",trailingVisual:n?()=>(0,a.jsx)(I.A,{icon:u.ChevronRightIcon,className:"fgColor-accent"}):null,children:"Next"})]})})]}):null}function si(e,t){return a5(t?{after:e.endCursor}:{before:e.startCursor},[t?"before":"after"])}try{sn.displayName||(sn.displayName="Pagination")}catch{}var sr=n(54175);function sa({children:e,title:t}){return(0,a.jsxs)(sr.M,{rowGap:"none",children:[(0,a.jsx)(sr.M.Header,{divider:"line",sx:{mb:3},children:(0,a.jsx)("div",{className:"d-flex flex-items-center flex-justify-between",children:(0,a.jsx)(iO.A,{as:"h1",className:"f2 text-normal pb-2",id:"commits-pagehead",children:t})})}),(0,a.jsx)(sr.M.Content,{as:"div",children:(0,a.jsx)("div",{children:e})})]})}try{sa.displayName||(sa.displayName="Layout")}catch{}var ss=n(7799),so=n(879),sl=n(22069),sc=n(38007),sd=n(97286);let su="Failed to generate commit recap";function sm(e,t,n,i,r){let a=i?` at path ${i}`:"";return`Below is a JSON array of metadata for a series of commits in the repository ${e}/${t}${a} on branch ${n}.

${JSON.stringify(r,null,2)}

Each entry in the array represents metadata for a group of commits. These groups represent logical units of work, such as those merged together from a pull request or by the same author in a short timeframe.

You will provide an analysis of each commit group, writing a brief summary and scoring its size in terms of the file.

#### oid

This is the oid value of the first commit in the commit group, used as an identifier to ensure proper ordering.

#### summary

- These are terse, succinct paragraphs of 1-2 sentences, summarizing the work represented by the commit group.
- Focus on the content of the included commit diffEntries as a source of truth.
- Prefer a past-tense imperative "changelog entry" style, in simple, even "telegraphic" terms. Start the first sentence with a verb.
- Avoid directly referencing the author or the pull request that contributed the change.
- Avoid using the file as an object in the sentence, it's self-evident that the changes are being made to the file.
- Consider both the specific structure of the changes (functions/templates/config values/etc) and the general impact on the nature and purpose of the file.
- Descriptive context like the explicit purpose/intent of a change (from the commit message, pull request title, or pull request body) of the change may be used.
- If that context includes links (such as to a GitHub issue) that are NOT the author or pull request, you may include them in markdown format.
- Obvious or implicit intent ("simplify the codebase", "improve maintainability", "resolve syntax error") should not be mentioned.
- Good examples of summaries:
  - "Extracted most of the module to another file as part of Project Tailspin, moving the encoding helpers and deleting some unused functions."
  - "Updated config values for the \`GreatApp\` integration to increase max instances and resolve [incident #49](https://github.com/foo/bar/issues/123).
  - "Removed unused function \`functionName\`."
  - "Fixed typo in a variable name."
- Bad examples of summaries:
  - "Deleted functions \`func1\`, \`func2\`, \`func3\` and \`func4\` from the file, improving the code for readability".
  - "This commit by @monalisa in [pull request #49](https://github.com/foo/bar/pulls/49) adds a new feature to the application, improving the user experience."

#### size
- This is a "t-shirt size" subjectively scoring both the scope and impact of the changes in the commit group.
- Sizes include XS, S, M, L, XL.
- This should be judged entirely from the commit diffEntries and the nature and purpose of the file.
- The cognitive complexity of the changes is more important than the number of lines changed. "Added" is simpler than "updated".
- Examples of XS changes:
  - cleanly deleting a large number of unused functions
  - renaming a variable throughout a file via find-and-replace
  - a simple typo fix
- Examples of S changes:
  - created the file, which is simple and contains a couple helper functions imported elsewhere
  - flipping a couple configuration values
  - adding a new function
  - removing a section of markup to get rid of some HTML content
- Examples of M changes:
  - adding couple new functions that supply a new data field in an existing function
  - updating how one complex function works without changing its interface
- Example of L changes:
  - broke one complex function into several simpler ones, but also changed the initial arguments provided from elsewhere
  - created the file, which contains several API handlers with callbacks, imported dependecies, and dynamic templating
- Example of XL changes:
  - removed one of the two sections of configuraiton encapsulated by this file
  - complete overhaul of a class, fundamentally changing its interface and internal logic

Return your analysis as a JSON array of objects each containing these three fields, corresponding to the order of the provided commit groups:

[
  {
    "oid": "commit_oid_1",
    "summary": "Brief summary of the changes",
    "size": "S"
  },
  {
    "oid": "commit_oid_2",
    "summary": "Brief summary of the changes",
    "size": "M"
  }
]
`}function sh(e){return Math.ceil(e.length/3)}function sf(e,t){let{refName:n,blobPath:i,...r}=t;(0,sc.BI)(`copilot.commit-recap.${e}`,{refName:n,blobPath:i||null,...r})}async function sp(e,t,n,i){let r=i.currentBlobPath||"",a=new URLSearchParams;a.append("name",n),i.since&&a.append("since",i.since),i.until&&a.append("until",i.until),i.author&&a.append("author",i.author.login);let s=r?`/${e}/${t}/commit_recap/${encodeURIComponent(r)}?${a}`:`/${e}/${t}/commit_recap.json?${a}`;try{let e=await (0,eN.lS)(s,{headers:{Accept:"application/json"}});if(!e.ok)throw sf("failed",{refName:n,blobPath:r,reason:"commit_groups_fetch_failed",statusCode:e.status}),Error(`Failed to fetch commit groups: ${e.status}`);let t=await e.json(),a=t.map(e=>e.type).reduce((e,t)=>(e[t]=(e[t]||0)+1,e),{});return sf("commit-groups-returned",{refName:n,blobPath:r,totalGroups:t.length,groupTypeCounts:a,hasAuthorFilter:!!i.author,hasDateFilters:!!(i.since||i.until)}),t}catch(e){throw sf("failed",{refName:n,blobPath:r,reason:"commit_groups_fetch_error",errorMessage:e instanceof Error?e.message:String(e)}),e}}async function sg(e,t,n,i){let r=new URLSearchParams;r.append("name",n);let a=i?`/${e}/${t}/commit_recap_check/${encodeURIComponent(i)}?${r}`:`/${e}/${t}/commit_recap_check.json?${r}`;try{let e=await (0,eN.lS)(a,{headers:{Accept:"application/json"}});if(!e.ok)throw Error(`Failed to check path: ${e.status}`);return await e.json()}catch(e){throw e}}async function sx(e,t,n,i){try{let r=i.currentBlobPath||"",a="pull_request"===n.type&&n.commits.length>0?[n.commits[0]?.oid].filter(Boolean):n.commits.map(e=>e.oid),s=new URLSearchParams;s.append("commit_oids",a.join(","));let o=r?`/${e}/${t}/commit_recap_diffs/${encodeURIComponent(r)}?${s}`:`/${e}/${t}/commit_recap_diffs.json?${s}`,l=await (0,eN.lS)(o,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(l.ok){let e=await l.json();return{...n,diffEntries:e.diff_entries||[]}}return{...n,diffEntries:[]}}catch{return{...n,diffEntries:[]}}}async function sy(e,t,n,i,r,a,s){let o=sm(i,r,a,n,e),l=function(e){let t=e.map(e=>e.type).reduce((e,t)=>(e[t]=(e[t]||0)+1,e),{}),n=new Set,i=new Set;for(let t of e){for(let e of t.commits)e.author?.login&&n.add(e.author.login);t.pr?.number&&i.add(t.pr.number)}return{groupTypeCounts:t,authorsInBatch:n,pullRequestsInBatch:i,hasDiffData:e.some(e=>e.diffEntries&&e.diffEntries.length>0)}}(e);sf("capi-request-sent",{refName:a,blobPath:n,batchSize:e.length,tokenCount:sh(o),groupTypeCounts:l.groupTypeCounts,uniqueAuthorsCount:l.authorsInBatch.size,uniquePullRequestsCount:l.pullRequestsInBatch.size,hasDiffData:l.hasDiffData});try{let i=await (0,sl.p)({basePath:(0,ss._$)().copilotApiOverrideUrl||"https://api.githubcopilot.com",body:{messages:[{role:"user",content:o}],model:"gpt-4o-mini",stream:!1,responseFormat:{type:"json_schema",jsonSchema:{name:"CommitGroupAnalysisList",description:"Array of commit group analyses with summaries and size assessments",strict:!0,schema:{type:"array",items:{type:"object",additionalProperties:!1,properties:{oid:{type:"string",description:"The oid value of the first commit in the commit group, used as an identifier to ensure proper ordering."},summary:{type:"string",description:"A brief summary of the work represented by the commit group."},size:{type:"string",enum:["XS","S","M","L","XL"],description:"A t-shirt size scoring both the scope and impact of the changes in the commit group."}},required:["oid","summary","size"]}}}},temperature:.3},path:"/chat/completions",method:"POST",streamingResponse:!1,authToken:t,integrationId:"copilot-directory"});if(i.ok){let t,r=await i.json(),o=r.choices?.[0]?.message?.content;if(!o)throw Error("No analysis content received from Copilot API");if("object"==typeof o)t=o;else try{let e=o;e.startsWith(`\`\`\`json
`)&&e.endsWith(`
\`\`\``)?e=e.slice(8,-4):e.startsWith(`\`\`\`
`)&&e.endsWith(`
\`\`\``)&&(e=e.slice(4,-4)),t=JSON.parse(e)}catch{throw Error("Invalid analysis response format")}let c=new Map(e.filter(e=>e.commits.length>0).map((e,t)=>[e.commits[0]?.oid,t])),d=t?.sort((e,t)=>{let n=c.get(e.oid)??Number.MAX_SAFE_INTEGER,i=c.get(t.oid)??Number.MAX_SAFE_INTEGER;return n-i}),u=d.map(e=>(console.log(`Commit group ${e.oid}: Size ${e.size}`),e.summary)).join(`

`);s(e=>[...e,...d]),sf("capi-response-received",{refName:a,blobPath:n,batchSize:e.length,responseLength:u.length,linkedAuthorsPercentage:l.authorsInBatch.size>0?function(e,t){let n=0;for(let i of Array.from(t))(e.includes(`@${i}`)||e.includes(i))&&n++;return n}(u,l.authorsInBatch)/l.authorsInBatch.size:0,linkedPullRequestsPercentage:l.pullRequestsInBatch.size>0?function(e,t){let n=0;for(let i of Array.from(t))(e.includes(`#${i}`)||e.includes(`[#${i}]`))&&n++;return n}(u,l.pullRequestsInBatch)/l.pullRequestsInBatch.size:0})}else throw sf("failed",{refName:a,blobPath:n,reason:"capi_response_not_ok",statusCode:i.status}),Error(su)}catch(e){throw sf("failed",{refName:a,blobPath:n,reason:"capi_request_failed",errorMessage:e instanceof Error?e.message:String(e)}),e}}var sb=n(20933);function sC(){let e=(0,s.t)(),t=(0,K.D)(),n=(0,c.B)(),i=n.filters,r=n.commitGroups,o=n.metadata?.softNavToCommit||!1,l=(0,aj.G7)("copilot_commit_recap"),{response:u,isLoadingCopilotRecap:m,commitGroups:h,showRecapPanel:f,showRecapButton:p,showRecapPopover:g,handleCopilotRecap:x,handleCloseRecap:y}=function({repoOwner:e,repoName:t,refName:n,defaultBranch:i,filters:r}){let[a,s]=(0,d.useState)([]),[o,l]=(0,d.useState)(""),[c,u]=(0,d.useState)(!1),[m,h]=(0,d.useState)(!1),f=(0,d.useRef)(!1),p=(0,d.useRef)(null),g=(0,aj.G7)("copilot_commit_recap"),x=n||i||"main",{data:y,isSuccess:b,isFetching:C,refetch:v}=(0,sd.I)({queryKey:["commit-rollup",e,t,x,r],queryFn:()=>sp(e,t,x,r),enabled:!1}),{data:N,isSuccess:j,refetch:w}=(0,sd.I)({queryKey:["path-check",e,t,x,r.currentBlobPath],queryFn:()=>sg(e,t,x,r.currentBlobPath||""),enabled:g&&!!r.currentBlobPath}),_=(0,d.useMemo)(()=>y||[],[y]),S=(0,d.useMemo)(()=>!!r.currentBlobPath&&(void 0===N||N?.is_file!==!1),[N,r.currentBlobPath]),E=(0,d.useMemo)(()=>S&&N?.show_popover===!0,[S,N]),L=(0,d.useCallback)(async n=>{if(0!==n.length&&!f.current){f.current=!0,h(!0),s([]),l("");try{let i=r.currentBlobPath||"",a=new so.J([]),o=await a.getAuthToken(),l=sh(sm(e,t,x,i,[])),c=[],d=l;for(let a=0;a<n.length;a++){let u=n[a];if(!u)continue;let m=await sx(e,t,u,r),h=sh(JSON.stringify(m,null,2));d+h>16e3&&c.length>0?(await sy(c,o,i,e,t,x,s),c=[m],d=l+h):(c.push(m),d+=h)}c.length>0&&await sy(c,o,i,e,t,x,s)}catch{l(su)}finally{h(!1),f.current=!1}}},[e,t,x,r]);(0,d.useEffect)(()=>{b&&c&&_.length>0&&!f.current&&L(_)},[b,c,_,L]);let k=(0,d.useCallback)(async()=>{if(sf("requested",{refName:x,blobPath:r.currentBlobPath||"",hasAuthorFilter:!!r.author,hasDateFilters:!!(r.since||r.until)}),s([]),l(""),!r.currentBlobPath){u(!0),b&&0!==_.length||v();return}if(N?.is_file===!0)u(!0),b&&0!==_.length||v();else try{let e=await w();e.data?.is_file===!0?(u(!0),b&&0!==_.length||v()):u(!1)}catch{u(!1)}},[v,w,x,r,b,_,N]),I=(0,d.useCallback)(()=>{u(!1),s([]),l(""),h(!1),f.current=!1},[]);return((0,d.useEffect)(()=>{let e=p.current;if(null===e){p.current=r;return}(e.pagination?.endCursor!==r.pagination?.endCursor||e.pagination?.startCursor!==r.pagination?.startCursor||e.since!==r.since||e.until!==r.until||e.author?.login!==r.author?.login||e.currentBlobPath!==r.currentBlobPath)&&c&&(u(!1),s([]),l(""),h(!1),f.current=!1),p.current=r},[r,c]),g)?{response:{analysisData:a,errorMessage:o},analysisData:a,errorMessage:o,isLoadingCopilotRecap:C||m,triggerAnalysis:L,commitGroups:_,showRecapPanel:c,showRecapButton:S,showRecapPopover:E,handleCopilotRecap:k,handleCloseRecap:I}:{response:{analysisData:[],errorMessage:""},analysisData:[],errorMessage:"",isLoadingCopilotRecap:!1,commitGroups:[],showRecapPanel:!1,showRecapButton:!1,showRecapPopover:!1,handleCopilotRecap:()=>{},handleCloseRecap:()=>{}}}({repoOwner:e.ownerLogin,repoName:e.name,refName:n.refInfo?.name,defaultBranch:e.defaultBranch,filters:i}),b=`There isn't any commit history to show here${null!==i.since||null!==i.until?" for the selected date range":""}`;return(0,d.useEffect)(()=>{if(!N.fV.hash&&window.scrollY>0){let e=document.querySelector("#commits-pagehead");e?.scrollIntoView()}},[n.filters.pagination,n.filters.since,n.filters.until]),(0,a.jsx)(aS,{filters:n.filters,children:(0,a.jsxs)(sa,{title:"Commits",children:[(0,a.jsx)(st,{repo:e,contributorsUrl:n.metadata?.deferredContributorUrl||"",since:i.since,until:i.until,author:i.author,refInfo:n.refInfo,path:i.currentBlobPath,showCopilotButton:l&&p,showCopilotPopover:g,onCopilotRecap:x,isLoadingCopilotRecap:m}),l&&(0,a.jsx)(aX,{isVisible:f,isLoading:m,analysis:u,repoOwner:e.ownerLogin,repoName:e.name,refName:n.refInfo?.name,onClose:y,commitGroups:h}),0===r.length&&(0,a.jsx)(sb.M,{timeoutMessage:n.timedOutMessage,unavailableMessage:b}),r.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(aO,{commitGroups:r,deferredDataUrl:n.metadata?.deferredDataUrl||"",softNavToCommit:o}),(0,a.jsx)(sn,{paginationInfo:i.pagination})]}),n.metadata?.showProfileHelp&&(0,a.jsx)(aw,{url:`${t.helpUrl}/articles/troubleshooting-commits-on-your-timeline`})]})})}try{sC.displayName||(sC.displayName="Commits")}catch{}(0,r.o)("commits",()=>({App:f,routes:[(0,i.a)({path:"/:owner/:repo/commits",Component:sC}),(0,i.a)({path:"/:owner/:repo/commits/:ref",Component:sC}),(0,i.a)({path:"/:owner/:repo/commits/:ref/:path/*",Component:sC}),(0,i.a)({path:"/:owner/:repo/commit/:oid",Component:aN}),(0,i.a)({path:"/:owner/:repo/commit/:oid/:path/*",Component:aN}),(0,i.a)({path:"/_view_fragments/Voltron::CommitFragmentsController/show/:owner/:repo/:name/repo_layout",Component:aN})]}))},63149:(e,t,n)=>{n.d(t,{X:()=>l});var i=n(88795),r=n(96235),a=n(25772),s=n(60039),o=n(96540);function l(){let e=(0,i.t)(),{commit:t}=(0,a.B)(),n=`/${(0,r.QU3)(e.ownerLogin)}/${(0,r.QU3)(e.name)}/commit_comment`,l=`${n}/create`,c=(0,o.useCallback)(async(e,n,i)=>{let r=new FormData;r.append("commit_id",t.oid),r.append("comment[body]",e),n&&i&&(r.append("path",n),r.append("position",i.toString()));let a=await (0,s.DI)(l,{method:"POST",body:r});return a.ok?{error:null,comment:(await a.json()).comment}:{error:Error("Failed to add comment"),comment:null}},[t.oid,l]),d=(0,o.useCallback)(async(e,t)=>{let i=new FormData;i.append("_method","put"),i.append("commit_comment[id]",t.id.toString()),i.append("commit_comment[body]",e),i.append("commit_comment[bodyVersion]",t.bodyVersion);let r=await (0,s.DI)(n,{method:"POST",body:i});if(!r.ok)return{error:Error("Failed to edit comment"),updatedFields:null};{let e=await r.json();return{error:null,updatedFields:{body:e.source,bodyVersion:e.bodyVersion,htmlBody:e.body}}}},[n]),u=(0,o.useCallback)(async e=>{let t=new FormData;return(t.append("_method","delete"),t.append("commit_comment[id]",e),(await (0,s.DI)(n,{method:"POST",body:t})).ok)?"success":"error"},[n]),m=(0,o.useCallback)(async(e,t)=>{let i=new FormData;return(i.append("_method","put"),i.append("classifier",t),(await (0,s.DI)(`${n}/${e}/minimize`,{method:"POST",body:i,headers:{Accept:"application/json"}})).ok)?"success":"error"},[n]),h=(0,o.useCallback)(async e=>{let t=new FormData;return(t.append("_method","put"),(await (0,s.DI)(`${n}/${e}/unminimize`,{method:"POST",body:t,headers:{Accept:"application/json"}})).ok)?"success":"error"},[n]),f=(0,o.useMemo)(()=>({repository:{databaseId:e.id,nwo:`${e.ownerLogin}/${e.name}`,slashCommandsEnabled:!1},type:"commit",id:{id:t.oid}}),[e.id,e.name,e.ownerLogin,t.oid]);return(0,o.useMemo)(()=>({addComment:c,commentBoxSubject:f,editComment:d,deleteComment:u,hideComment:m,unhideComment:h}),[c,u,d,m,h,f])}},22403:(e,t,n)=>{n.d(t,{D:()=>r});var i=n(64262);function r(){return(0,i.X)()}},32745:(e,t,n)=>{n.d(t,{I:()=>c,p:()=>u});var i=n(96235),r=n(96679),a=n(60039),s=n(96540),o=n(30559),l=n(77418);function c({repo:e,commit:t,viewerCanReply:n,repoOwnerGlobalRelayId:r,getInlineCommentInfoByPathAndPosition:l}){let{addComments:c}=(0,o.B)();return(0,s.useCallback)((s,o)=>new Promise(async(u,m)=>{let[h,f]=s.split("::");if(!h||!f)return void m(Error("Invalid threadId"));if(!o){let i=l(h,Number(f));u(i?d(i,t,e,n,s,r):void 0);return}let p=await (0,a.lS)(`${(0,i.MLt)({owner:e.ownerLogin,repo:e.name,commitOid:t.oid,path:h,position:f})}${o?"&isRefetch=true":""}`);if(p.ok){let i=await p.json();c(i.comments,h,f),u(i.comments?d(i.comments,t,e,n,s,r):void 0)}else m(Error("Failed to fetch thread"))}),[c,t,l,e,n,r])}function d(e,t,n,i,r,a){return{commentsData:{comments:e.map(e=>u(e,t,n,a))},id:r,viewerCanReply:i}}function u(e,t,n,a){return{publishedAt:void 0,state:"",viewerRelationship:"",id:e.relayId,databaseId:e.id,body:e.body,bodyHTML:e.htmlBody,createdAt:e.createdAt,url:`${r.cg?.location.origin}${(0,i.$Qz)({owner:n.ownerLogin,repo:n.name,commitish:t.oid})}#${e.urlFragment}`,currentDiffResourcePath:`#${e.urlFragment}`,authorAssociation:e.authorAssociation?.toUpperCase(),author:{id:e.author.id,login:e.author.login,avatarUrl:e.author.avatarUrl,url:""},isHidden:e.isHidden,lastUserContentEdit:e.lastUserContentEdit,minimizedReason:e.minimizedReason,subjectType:"commit",viewerCanMinimize:e.viewerCanMinimize,viewerCanSeeMinimizeButton:e.viewerCanMinimize,viewerCanSeeUnminimizeButton:e.viewerCanMinimize,viewerCanDelete:e.viewerCanDelete,viewerCanUpdate:e.viewerCanUpdate,viewerCanReact:e.viewerCanReact,viewerCanReport:e.viewerCanReport,viewerCanReportToMaintainer:e.viewerCanReportToMaintainer,viewerCanBlockFromOrg:e.viewerCanBlockFromOrg,viewerCanUnblockFromOrg:e.viewerCanUnblockFromOrg,viewerDidAuthor:e.viewerDidAuthor,reactionGroups:e.reactionGroups,reference:{number:void 0,text:(0,l.F)(t.oid),author:{login:t.authors.length>0?t.authors[0]?.login??"":""}},repository:{id:n.id.toString(),isPrivate:n.private,name:n.name,owner:{id:a,login:n.ownerLogin,url:""}}}}},23476:(e,t,n)=>{n.d(t,{I:()=>l,d_:()=>c,wu:()=>o});var i=n(3785),r=n(60039),a=n(96540),s=n(41906);function o(e,t){let[n,o]=(0,a.useState)(s.UI);return(0,a.useEffect)(()=>{if(!e)return;let t=!1;return(async()=>{o(s.UI);let n=await (0,r.Sr)((0,i.RD)(e));if(!t)try{if(n.ok){let e=await n.json();e.loading=!1,e&&((0,i.Av)(e),o(e))}else o(s.Xx)}catch{o(s.Xx)}})(),function(){t=!0}},[e,t]),n}function l(e){let[t,n]=(0,a.useState)(void 0);return(0,a.useEffect)(()=>{e&&(async()=>{let t=await (0,r.Sr)((0,i.RD)(e));try{if(t.ok){let e=await t.json();e&&((0,i.Av)(e),n(e.data))}}catch{}})()},[e]),t}function c(e,t,n,i){let[o,l]=(0,a.useState)(s.UI),c=(0,a.useRef)([...Array(n)]),d=(0,a.useRef)(t);return(0,a.useEffect)(()=>{if(!e)return;let n=!1;async function i(t){let a=await (0,r.Sr)(`${e}?start_entry=${t}`);if(!n)try{if(a.ok){let e=await a.json();if(e){let t=0;for(let n=d.current;n<e.nextIndex;n++)c.current[n]=e.deferredCommits[t],t++;e.deferredCommits=c.current,e.loadMore&&d.current!==e.nextIndex?(d.current=e.nextIndex,e.error=!1,l(e),setTimeout(()=>i(e.nextIndex),0)):(d.current===e.nextIndex?e.error=!0:e.error=!1,l(e))}}else l(e=>({...e,loading:!1,error:!0,extraDiffEntries:c.current}))}catch{l(e=>({...e,loading:!1,deferredCommits:c.current}))}}return i(t),function(){n=!0}},[e,i,t]),(0,a.useEffect)(()=>{c.current=[],d.current=t},[e,i,t]),o}},77418:(e,t,n)=>{n.d(t,{F:()=>i});function i(e){return e.slice(0,7)}},1058:(e,t,n)=>{n.d(t,{N:()=>i});function i(e,t){return"d28fac7f18aeacb00d8ad3460a0a5a901617c2d4"===e&&0xf122a7===t}},39627:(e,t,n)=>{n.d(t,{D:()=>a,Y:()=>s});var i=n(52811),r=n(96679);function a(e){if(!r.XC)return;let t=r.XC.querySelector("title"),n=r.XC.createElement("title");n.textContent=e,t?t.textContent!==e&&(t.replaceWith(n),(0,i.i)(e)):(r.XC.head.appendChild(n),(0,i.i)(e))}function s(e){return document.body.classList.contains("logged-out")?`${e} \xb7 GitHub`:e}},26559:(e,t,n)=>{n.d(t,{jC:()=>l,kt:()=>s,tV:()=>o});var i=n(53005),r=n(27851),a=n(88191);function s(e){let t={"X-Requested-With":"XMLHttpRequest",...(0,a.wE)(e)};return(0,r.G7)("client_version_header")&&(t={...t,[i.S]:(0,i.O)()}),t}function o(e,t){for(let[n,i]of Object.entries(s(t)))e.set(n,i)}function l(e){return{"X-GitHub-App-Type":e}}},88191:(e,t,n)=>{n.d(t,{$r:()=>s,M1:()=>o,li:()=>r,pS:()=>c,wE:()=>l});var i=n(96679);let r="X-Fetch-Nonce",a=new Set;function s(e){a.add(e)}function o(){return a.values().next().value||""}function l(e){let t={};return void 0!==e&&(t["X-Fetch-Nonce-To-Validate"]=e),void 0===e?t[r]=o():a.has(e)?t[r]=e:t[r]=Array.from(a).join(","),t}function c(){let e=i.XC?.head?.querySelector('meta[name="fetch-nonce"]')?.content||"";e&&s(e)}},79607:(e,t,n)=>{n.d(t,{Dx:()=>s,IP:()=>a,M4:()=>r,dt:()=>o});var i=n(91385);let r=1/0,a=-1/0,s=1,o=(e,t,n=s)=>{let o=e.trim().toLowerCase(),l=t.trim().toLowerCase();if(o===l)return r;if(0===l.length||0===o.length)return a;let c=(0,i.fN)(o,l);return c===1/0&&o!==l?a:l.startsWith(o)||l.endsWith(o)?c+n:c}},66871:(e,t,n)=>{n.d(t,{C3:()=>o,JV:()=>r,K3:()=>u,MM:()=>l,OE:()=>m,Zu:()=>d,bj:()=>a,jc:()=>c,kd:()=>s});var i=n(96679);function r(){return i.Kn?.state||{}}function a(e){h(r(),"",e)}function s(e){i.Kn?.pushState({appId:r().appId},"",e),f()}function o(e){h({...r(),...e},"",location.href)}function l(e){a(`?${e.toString()}${i.fV.hash}`)}function c(){a(i.fV.pathname+i.fV.hash)}function d(e){a(e.startsWith("#")?e:`#${e}`)}function u(){a(i.fV.pathname+i.fV.search)}function m(){i.Kn?.back()}function h(e,t,n){i.Kn?.replaceState(e,t,n),f()}function f(){i.cg?.dispatchEvent(new CustomEvent("statechange",{bubbles:!1,cancelable:!1}))}},13233:(e,t,n)=>{n.d(t,{l:()=>i});let i=()=>void 0},7531:(e,t,n)=>{n.d(t,{Y:()=>i});function i(){let e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}},41764:(e,t,n)=>{n.d(t,{A:()=>o});let{getItem:i,setItem:r,removeItem:a}=(0,n(85351).A)("localStorage"),s="REACT_PROFILING_ENABLED",o={enable:()=>r(s,"true"),disable:()=>a(s),isEnabled:()=>!!i(s)}},46320:(e,t,n)=>{n.d(t,{Kq:()=>SoftNavErrorEvent,RQ:()=>SoftNavEndEvent,gh:()=>SoftNavPayloadEvent,ni:()=>SoftNavSuccessEvent,sW:()=>SoftNavStartEvent});var i=n(50467),r=n(21715);let a=class SoftNavEvent extends Event{constructor(e,t){super(t),(0,i._)(this,"mechanism",void 0),this.mechanism=e}};let SoftNavStartEvent=class SoftNavStartEvent extends a{constructor(e){super(e,r.z.START)}};let SoftNavSuccessEvent=class SoftNavSuccessEvent extends a{constructor(e,t){super(e,r.z.SUCCESS),(0,i._)(this,"visitCount",void 0),this.visitCount=t}};let SoftNavErrorEvent=class SoftNavErrorEvent extends a{constructor(e,t){super(e,r.z.ERROR),(0,i._)(this,"error",void 0),this.error=t}};let SoftNavEndEvent=class SoftNavEndEvent extends a{constructor(e){super(e,r.z.END)}};let SoftNavPayloadEvent=class SoftNavPayloadEvent extends Event{constructor(e){super("soft-nav:payload"),(0,i._)(this,"payload",void 0),(0,i._)(this,"appPayload",void 0),this.payload=e.payload,this.appPayload=e.appPayload}}},97396:(e,t,n)=>{n.d(t,{Bu:()=>f,SC:()=>c,Ti:()=>m,iS:()=>d,k5:()=>l,o4:()=>u,rZ:()=>h});var i=n(21715),r=n(46320),a=n(7522),s=n(78284);let o=0;function l(){o=0,document.dispatchEvent(new Event(i.z.INITIAL)),(0,s.xT)()}function c(e){(0,s.LM)()||(document.dispatchEvent(new Event(i.z.PROGRESS_BAR.START)),document.dispatchEvent(new r.sW(e)),(0,s.Vy)(e),(0,s.ZW)(),(0,s.HK)(),(0,a.E5)())}function d(e={}){g(e)&&(o+=1,document.dispatchEvent(new r.ni((0,s.di)(),o)),m(e))}function u(e={}){if(!g(e))return;o=0;let t=(0,s.my)()||s.BW;document.dispatchEvent(new r.Kq((0,s.di)(),t)),p(),(0,a.Cd)(t),(0,s.xT)()}function m(e={}){if(!g(e))return;let t=(0,s.di)();p(),document.dispatchEvent(new r.RQ(t)),(0,s.Ff)(),(0,s.JA)(t)}function h(e={}){g(e)&&((0,a.Im)(),document.dispatchEvent(new Event(i.z.RENDER)))}function f(){document.dispatchEvent(new Event(i.z.FRAME_UPDATE))}function p(){document.dispatchEvent(new Event(i.z.PROGRESS_BAR.END))}function g({skipIfGoingToReactApp:e,allowedMechanisms:t=[]}={}){return(0,s.LM)()&&(0===t.length||t.includes((0,s.di)()))&&(!e||!(0,s.gc)())}},21715:(e,t,n)=>{n.d(t,{z:()=>i});let i=Object.freeze({INITIAL:"soft-nav:initial",START:"soft-nav:start",REPLACE_MECHANISM:"soft-nav:replace-mechanism",SUCCESS:"soft-nav:success",ERROR:"soft-nav:error",FRAME_UPDATE:"soft-nav:frame-update",END:"soft-nav:end",RENDER:"soft-nav:render",PROGRESS_BAR:{START:"soft-nav:progress-bar:start",END:"soft-nav:progress-bar:end"}})},7522:(e,t,n)=>{n.d(t,{Cd:()=>l,E5:()=>o,Im:()=>c,nW:()=>s});var i=n(7479),r=n(78284);let a="stats:soft-nav-duration",s={turbo:"TURBO",react:"REACT","turbo.frame":"FRAME",ui:"UI",hard:"HARD"};function o(){window.performance.clearResourceTimings(),window.performance.mark(a)}function l(e){(0,i.i)({turboFailureReason:e,turboStartUrl:(0,r.dR)(),turboEndUrl:window.location.href})}function c(){let e=function(){if(0===performance.getEntriesByName(a).length)return null;performance.measure(a,a);let e=performance.getEntriesByName(a).pop();return e?e.duration:null}();if(!e)return;let t=s[(0,r.di)()],n=Math.round(e);t===s.react&&document.dispatchEvent(new CustomEvent("staffbar-update",{detail:{duration:n}})),(0,i.i)({requestUrl:window.location.href,softNavigationTiming:{mechanism:t,destination:(0,r.fX)()||"rails",duration:n,initiator:(0,r.Pv)()||"rails"}})}},75367:(e,t,n)=>{n.d(t,{S:()=>l,s:()=>o});var i=n(21728),r=n(96540),a=n(38007),s=n(78924);function o(){let e,t,n=(0,i.c)(6),o=(0,r.useContext)(s.I);if(!o)throw Error("useAnalytics must be used within an AnalyticsContext");let{appName:l,category:c,metadata:d}=o;n[0]!==l||n[1]!==c||n[2]!==d?(e=(e,t,n)=>{let i={react:!0,app_name:l,category:c,...d};(0,a.BI)(e,{...i,...void 0===n?{}:n,target:t})},n[0]=l,n[1]=c,n[2]=d,n[3]=e):e=n[3];let u=e;return n[4]!==u?(t={sendAnalyticsEvent:u},n[4]=u,n[5]=t):t=n[5],t}function l(){let e,t,n=(0,i.c)(4),{sendAnalyticsEvent:r}=o();n[0]!==r?(e=e=>{r("analytics.click",void 0,void 0===e?{}:e)},n[0]=r,n[1]=e):e=n[1];let a=e;return n[2]!==a?(t={sendClickAnalyticsEvent:a},n[2]=a,n[3]=t):t=n[3],t}},37433:(e,t,n)=>{n.d(t,{H:()=>r});var i=n(25772);function r(e,t){let{csrf_tokens:n}=(0,i.B)();return n?.[e]?.[t]}},64899:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(17515),r=n(96540);function a(){let e=(0,r.useRef)(!1),t=(0,r.useCallback)(()=>e.current,[]);return(0,i.N)(()=>(e.current=!0,()=>{e.current=!1}),[]),t}},17515:(e,t,n)=>{n.d(t,{N:()=>a});var i=n(96679),r=n(96540);let a=void 0!==i.cg?.document?.createElement?r.useLayoutEffect:r.useEffect},47019:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(64899),r=n(96540);let a=function(e){let t=(0,i.A)(),[n,a]=(0,r.useState)(e);return[n,(0,r.useCallback)(e=>{t()&&a(e)},[t])]}},99837:(e,t,n)=>{n.d(t,{H:()=>r});var i=n(96540);let r=({inputRef:e,fallbackEventHandler:t})=>(0,i.useCallback)((n,i,r)=>{let a=e.current;if(!a)return;let s=document.activeElement;a.focus();let o=i??[a.selectionStart??a.value.length,a.selectionEnd??a.value.length],l=void 0===r?((e,t,n)=>{let i=t[1]-t[0];return e<t[0]?e:e<t[1]?t[0]+n:e+(n-i)})(a.selectionStart??a.value.length,o,n.length):Array.isArray(r)?r[0]:r,c=Array.isArray(r)?r[1]:l,d=!1;try{if(document.activeElement!==a)throw Error("Input must be focused to use execCommand");a.setSelectionRange(o[0],o[1]),d=""===n?document.execCommand("delete",!1):document.execCommand("insertText",!1,n),a.setSelectionRange(l,c)}catch{d=!1}if((s instanceof HTMLInputElement||s instanceof HTMLTextAreaElement)&&s.focus(),!d){let i=a.value.slice(0,o[0])+n+a.value.slice(o[1]),r=new InputEvent("input",{bubbles:!1});e.current.value=i,e.current.setSelectionRange(l,c),e.current.dispatchEvent(r),t(((e,t)=>({...e,nativeEvent:e,target:t,currentTarget:t,preventDefault:()=>e.preventDefault(),isDefaultPrevented:()=>e.defaultPrevented,isPropagationStopped:()=>!1,persist:()=>({})}))(r,e.current))}},[e,t])},60040:(e,t,n)=>{n.d(t,{vp:()=>a.v,hf:()=>l,CK:()=>c});var i=n(17515),r=n(96540),a=n(35822);let s=e=>e;function o(e,t){return({additionalScrollOffset:n=0,scrollToFn:a,horizontal:s,parentRef:o,shouldUseScrollRef:l=!0,...c})=>{(0,r.useDebugValue)(t);let d=(0,r.useRef)(window),u=(0,r.useCallback)(()=>{let e=o.current?.getBoundingClientRect(),t=e?.top??0,n=e?.left??0;return s?-1*n:-1*t},[s,o]),m=(0,r.useCallback)(e=>{let t=e+((o.current?.getBoundingClientRect().top??0)+window.scrollY)+n;d.current?.scroll({top:s?0:t,left:s?t:0})},[n,s,o]);return e({...c,horizontal:s,parentRef:o,scrollToFn:a||m,onScrollElement:l?d:void 0,scrollOffsetFn:u,useObserver:()=>(function(e){let[t,n]=(0,r.useState)({height:0,width:0}),a=e.current;return(0,i.N)(()=>{if(!a)return;let e=()=>{let e={height:a.innerHeight,width:a.innerWidth};n(t=>t.height!==e.height||t.width!==e.width?e:t)};return e(),a.addEventListener("resize",e),()=>{a.removeEventListener("resize",e)}},[a]),t})(d)})}}let l=o(a.z,"useVirtualWindow"),c=o(function(e){let t=r.useRef({}),n=r.useRef({}),i=(e,n)=>{t.current[e](n)},o=r.useRef(i);o.current=i;let l=r.useRef(new ResizeObserver(e=>{for(let t of e){let e=t.target,n="data-key",i=e.getAttribute(n);if(null===i)throw Error(`Value not found, for '${n}' attribute`);o.current(i,e)}}));r.useEffect(()=>{let e=l.current;return()=>{e.disconnect()}},[]);let{size:c,keyExtractor:d=s}=e,u=r.useMemo(()=>{let e=e=>t=>{n.current[e]&&l.current.unobserve(n.current[e]),t&&(o.current(e,t),l.current.observe(t)),n.current[e]=t},t={};for(let n=0;n<c;n++){let i=d(n);t[i]=e(i)}return t},[c,d]),m=(0,a.z)(e),h=m.virtualItems.map(e=>(t.current[e.key]=e.measureRef,{...e,measureRef:u[e.key]}));return{...m,virtualItems:h}},"useVirtualWindowDynamic")},83569:(e,t,n)=>{n.d(t,{T:()=>j});var i=n(74848),r=n(21728),a=n(39459),s=n(38621),o=n(10569),l=n(9591),c=n(46309),d=n(63867),u=n(6869),m=n(15385),h=n(96540),f=n(79637);let p=h.memo(function(e){let t,n,s,o,l,c=(0,r.c)(19),{user:d,isCurrent:u,onSelect:h,shouldSetAsDiv:f,count:p,position:g}=e,x=f?"div":"li";c[0]!==h||c[1]!==d?(t=()=>{h&&h(d)},c[0]=h,c[1]=d,c[2]=t):t=c[2];let y=g+1,b=d.primaryAvatarUrl;return c[3]!==d.path?(n=d.path.startsWith("/apps/"),c[3]=d.path,c[4]=n):n=c[4],c[5]!==n||c[6]!==d.primaryAvatarUrl?(s=(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(a.r,{src:b,square:n})}),c[5]=n,c[6]=d.primaryAvatarUrl,c[7]=s):s=c[7],c[8]!==d.name?(o=(0,i.jsx)(m.l.Description,{truncate:!0,children:d.name}),c[8]=d.name,c[9]=o):o=c[9],c[10]!==p||c[11]!==u||c[12]!==x||c[13]!==t||c[14]!==y||c[15]!==s||c[16]!==o||c[17]!==d.login?(l=(0,i.jsxs)(m.l.Item,{as:x,selected:u,onSelect:t,"aria-setsize":p,"aria-posinset":y,children:[s,d.login,o]}),c[10]=p,c[11]=u,c[12]=x,c[13]=t,c[14]=y,c[15]=s,c[16]=o,c[17]=d.login,c[18]=l):l=c[18],l});try{p.displayName||(p.displayName="UserItem")}catch{}let g={scrollableUserList:"UsersList-module__scrollableUserList--Ywe8t"};function x(e){let t,n=(0,r.c)(2);return n[0]!==e?(t=e.users.length>20?(0,i.jsx)(b,{...e}):(0,i.jsx)(y,{...e}),n[0]=e,n[1]=t):t=n[1],t}function y(e){let t,n,a=(0,r.c)(11),{users:s,currentUser:o,onSelect:l,style:c}=e;if(a[0]!==o?.login||a[1]!==l||a[2]!==s){let e;a[4]!==o?.login||a[5]!==l||a[6]!==s.length?(e=(e,t)=>(0,i.jsx)(p,{user:e,isCurrent:e.login===o?.login,onSelect:l,count:s.length,position:t},e.login),a[4]=o?.login,a[5]=l,a[6]=s.length,a[7]=e):e=a[7],t=s.map(e),a[0]=o?.login,a[1]=l,a[2]=s,a[3]=t}else t=a[3];return a[8]!==c||a[9]!==t?(n=(0,i.jsx)(m.l,{role:"menu",style:c,className:g.scrollableUserList,selectionVariant:"single",children:t}),a[8]=c,a[9]=t,a[10]=n):n=a[10],n}function b(e){let t,n,a=(0,r.c)(8),{users:s,currentUser:o,onSelect:l,style:c}=e;return a[0]!==o?.login||a[1]!==l||a[2]!==s.length?(t=(e,t)=>(0,i.jsx)(p,{user:e,isCurrent:e.login===o?.login,onSelect:l,shouldSetAsDiv:!0,count:s.length,position:t},e.login),a[0]=o?.login,a[1]=l,a[2]=s.length,a[3]=t):t=a[3],a[4]!==c||a[5]!==t||a[6]!==s?(n=(0,i.jsx)(f.F,{items:s,itemHeight:33,style:c,makeKey:C,shouldUseActionList:!0,renderItem:t,className:g.scrollableUserList}),a[4]=c,a[5]=t,a[6]=s,a[7]=n):n=a[7],n}function C(e){return e.login}try{x.displayName||(x.displayName="UsersList")}catch{}try{y.displayName||(y.displayName="FullUsersList")}catch{}try{b.displayName||(b.displayName="VirtualUsersList")}catch{}var v=n(52811);let N={truncatedUserText:"UserSelector-module__truncatedUserText--O999J",userSearchInput:"UserSelector-module__userSearchInput--INQnz",filterResultItem:"UserSelector-module__filterResultItem--c23j3"};function j(e){var t,n;let l,c,d,u,m,f,p,g,y,b,C,j,k,I,T,D,R=(0,r.c)(52),{defaultText:A,usersState:M,currentUser:O,onSelect:$,hotKey:P,onOpenChange:B,renderCustomFooter:U,size:F,showTypedInUser:H,width:z,label:V}=e,G=void 0!==H&&H,W=void 0===z?"large":z,K=void 0===V?"":V,[q,X]=(0,h.useState)("");R[0]!==q||R[1]!==G||R[2]!==M.users?(l=function(e,t){if(!e)return[];let n=t.trim().toLowerCase();return n?e.filter(e=>e.login.toLowerCase().includes(n)||e.name?.toLowerCase().includes(n)):e}(M.users,q),c=G&&(t=q,n=l,!!t&&(0===n.length||n.length>1||1===n.length&&!!n[0]&&n[0].login.toLowerCase()!==t.toLowerCase())),R[0]=q,R[1]=G,R[2]=M.users,R[3]=l,R[4]=c):(l=R[3],c=R[4]);let Q=c,J=0===l.length&&!Q;return d=!M.loading&&!M.error&&J,R[5]!==d?(u=()=>{d&&(0,v.i)("Nothing to show")},R[5]=d,R[6]=u):u=R[6],R[7]!==d||R[8]!==q?(m=[d,q],R[7]=d,R[8]=q,R[9]=m):m=R[9],(0,h.useEffect)(u,m),R[10]!==d||R[11]!==B?(f=e=>{B&&B(e),d&&(0,v.i)("Nothing to show")},R[10]=d,R[11]=B,R[12]=f):f=R[12],R[13]!==O?(p=(0,i.jsx)("div",{className:"mr-2",children:O?(0,i.jsx)(a.r,{size:16,src:O.primaryAvatarUrl,square:O.path.startsWith("/apps/")}):(0,i.jsx)(s.PeopleIcon,{size:"small",className:"fgColor-muted"})}),R[13]=O,R[14]=p):p=R[14],R[15]!==O||R[16]!==A||R[17]!==K?(g=(0,i.jsx)("div",{className:N.truncatedUserText,children:O?(0,i.jsxs)("span",{children:[K,O.login]}):(0,i.jsx)("span",{children:A})}),R[15]=O,R[16]=A,R[17]=K,R[18]=g):g=R[18],R[19]!==p||R[20]!==g?(y=(0,i.jsxs)("div",{className:"d-flex",children:[p,g]}),R[19]=p,R[20]=g,R[21]=y):y=R[21],R[22]!==P||R[23]!==F||R[24]!==y?(b=(0,i.jsx)(o.W.Button,{"data-hotkey":P,size:F,"data-testid":"user-selector-button",children:y}),R[22]=P,R[23]=F,R[24]=y,R[25]=b):b=R[25],R[26]!==q?(C=(0,i.jsx)(w,{defaultText:q,onFilterChange:X}),R[26]=q,R[27]=C):C=R[27],R[28]!==q||R[29]!==$||R[30]!==Q||R[31]!==J||R[32]!==M.error||R[33]!==M.loading?(j=M.loading?(0,i.jsx)(_,{}):M.error?(0,i.jsx)(S,{}):(0,i.jsxs)(i.Fragment,{children:[J&&(0,i.jsx)(E,{}),Q&&(0,i.jsx)(L,{filterText:q,onSelect:$})]}),R[28]=q,R[29]=$,R[30]=Q,R[31]=J,R[32]=M.error,R[33]=M.loading,R[34]=j):j=R[34],R[35]!==O||R[36]!==l||R[37]!==$||R[38]!==U?(k=l.length>0&&(0,i.jsx)(x,{users:l,currentUser:O,onSelect:$,style:U?{paddingBottom:"10px",paddingTop:"4px"}:{paddingTop:"4px"}}),R[35]=O,R[36]=l,R[37]=$,R[38]=U,R[39]=k):k=R[39],R[40]!==U?(I=U?.(),R[40]=U,R[41]=I):I=R[41],R[42]!==C||R[43]!==j||R[44]!==k||R[45]!==I||R[46]!==W?(T=(0,i.jsxs)(o.W.Overlay,{width:W,children:[C,j,k,I]}),R[42]=C,R[43]=j,R[44]=k,R[45]=I,R[46]=W,R[47]=T):T=R[47],R[48]!==b||R[49]!==T||R[50]!==f?(D=(0,i.jsx)("div",{children:(0,i.jsxs)(o.W,{onOpenChange:f,children:[b,T]})}),R[48]=b,R[49]=T,R[50]=f,R[51]=D):D=R[51],D}function w(e){let t,n,a=(0,r.c)(5),{onFilterChange:o,defaultText:c}=e;return a[0]!==o?(t=e=>o(e.target.value),a[0]=o,a[1]=t):t=a[1],a[2]!==c||a[3]!==t?(n=(0,i.jsx)("div",{className:"p-2 border-bottom border-color-border-default",children:(0,i.jsx)(l.A,{leadingVisual:s.SearchIcon,value:c,placeholder:"Find a user...",onChange:t,className:N.userSearchInput})}),a[2]=c,a[3]=t,a[4]=n):n=a[4],n}function _(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(c.B,{justify:"center",className:"p-2",children:(0,i.jsx)(d.A,{size:"medium",srText:"Loading users..."})}),t[0]=e):e=t[0],e}function S(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(u.A,{variant:"danger",children:"Could not load users"}),t[0]=e):e=t[0],e}function E(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(c.B,{justify:"center",className:"p-3",children:"Nothing to show"}),t[0]=e):e=t[0],e}function L(e){let t,n,a,s=(0,r.c)(8),{filterText:o,onSelect:l}=e;return s[0]!==o||s[1]!==l?(t=()=>{l&&l({login:o,name:o,path:"",primaryAvatarUrl:""})},s[0]=o,s[1]=l,s[2]=t):t=s[2],s[3]!==o?(n=(0,i.jsxs)(i.Fragment,{children:["Filter on author\xa0",(0,i.jsx)("span",{className:"text-bold",children:o})]}),s[3]=o,s[4]=n):n=s[4],s[5]!==t||s[6]!==n?(a=(0,i.jsx)(m.l.Item,{role:"none",onSelect:t,className:N.filterResultItem,children:n}),s[5]=t,s[6]=n,s[7]=a):a=s[7],a}try{j.displayName||(j.displayName="UserSelector")}catch{}try{w.displayName||(w.displayName="UserFilter")}catch{}try{_.displayName||(_.displayName="Loading")}catch{}try{S.displayName||(S.displayName="LoadingFailed")}catch{}try{E.displayName||(E.displayName="UsersZeroState")}catch{}try{L.displayName||(L.displayName="UsersTypedInUser")}catch{}},26033:(e,t,n)=>{n.d(t,{y:()=>s});var i=n(74848),r=n(21728),a=n(78924);function s(e){let t,n,s,o=(0,r.c)(7),{children:l,appName:c,category:d,metadata:u}=e;return o[0]!==c||o[1]!==d||o[2]!==u?(n={appName:c,category:d,metadata:u},o[0]=c,o[1]=d,o[2]=u,o[3]=n):n=o[3],t=n,o[4]!==l||o[5]!==t?(s=(0,i.jsx)(a.I.Provider,{value:t,children:l}),o[4]=l,o[5]=t,o[6]=s):s=o[6],s}try{s.displayName||(s.displayName="AnalyticsProvider")}catch{}},94671:(e,t,n)=>{n.d(t,{d:()=>a});var i=n(74848),r=n(44237);function a({status:e,oid:t,repo:n,badgeProps:a={},descriptionString:s=""}){let[o,l]=(0,r.ym)(t,n);return e?(0,i.jsx)(r.B6,{disablePopover:!1,size:"small",statusRollup:e,buttonSx:{height:"18px",color:"fg.muted",p:"2px"},combinedStatus:o,descriptionText:s,onWillOpenPopup:l,...a}):null}try{a.displayName||(a.displayName="AsyncChecksStatusBadge")}catch{}},4148:(e,t,n)=>{n.d(t,{N:()=>en,$:()=>ei});var i=n(74848),r=n(96540),a=n(83692),s=n(88795),o=n(93955),l=n(96679),c=n(38621),d=n(6869),u=n(55847),m=n(12528),h=n(34164),f=n(89574),p=n(1058);let g={"commit-discussion-comments":"Comment-module__commit-discussion-comments--WaMOe","discussion-comments-rose":"Comment-module__discussion-comments-rose--v1SXb"};var x=n(75062),y=n(94232);let b=()=>(0,i.jsx)("div",{className:"d-flex gap-2",children:(0,i.jsx)("div",{className:"flex-1 border overflow-x-auto rounded-2 borderColor-muted color-shadow-small",children:(0,i.jsxs)("div",{className:"d-flex flex-column gap-2 m-3",children:[(0,i.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,i.jsx)(y.O,{variant:"elliptical",height:"xl",width:"xl"}),(0,i.jsx)(y.O,{variant:"rounded",height:"sm",width:"150px"})]}),[void 0,void 0].map((e,t)=>(0,i.jsx)(y.O,{variant:"rounded",height:"sm",width:"random"},t)),(0,i.jsx)(x.e,{})]})})});try{b.displayName||(b.displayName="CommentLoading")}catch{}var C=n(2427),v=n(94169),N=n(72372),j=n(66499),w=n(29935),_=n(333),S=n(12617),E=n(63149),L=n(32745),k=n(77418),I=n(33368),T=n(77283),D=n(17515);let R=(0,r.forwardRef)(({initialMarkdown:e,onCancel:t,onSave:n,referenceId:a,buttonText:s,commentContent:o},l)=>{let[c,d]=(0,r.useState)(!1),u=(0,r.useRef)(null),m=(0,r.useRef)(void 0),{commentBoxSubject:h}=(0,E.X)(),f=(0,r.useCallback)(()=>{},[]),{markdownBody:p,resetMarkdownBody:g,markdownValidationResult:x,handleMarkdownBodyChanged:y}=(0,T.x)({commentBoxRef:u,markdownComposerRef:l,onChange:f,onCancel:()=>{},referenceId:a});(0,r.useEffect)(()=>{e&&!p&&y(e)},[e]),(0,r.useEffect)(()=>{if(o&&m.current!==o){y(o),m.current=o;let e=window.setTimeout(()=>{u.current&&(u.current?.scrollIntoView(),u.current?.focus())},0);return()=>{window.clearTimeout(e)}}},[o]),(0,D.N)(()=>{if(u&&u.current){let e=window.setTimeout(()=>{u.current?.focus()},0);return()=>{window.clearTimeout(e)}}},[u]);let b=async()=>{d(!0),await n(p,g),d(!1)};return(0,i.jsx)(I.h,{ref:u,validationResult:x,disabled:c,onChange:e=>{y(e)},onCancel:()=>{y(""),t?.()},onSave:b,saveButtonText:s,saveButtonTrailingIcon:!1,value:p,teamHovercardsEnabled:!0,fileUploadsEnabled:!0,subject:h})});function A({comment:e,commitOid:t,onCancel:n,onUpdate:a}){let{editComment:s}=(0,E.X)(),o=(0,r.useRef)(null),l=async t=>{let n=await s(t,e);n.updatedFields&&a({...e,...n.updatedFields})};return(0,i.jsx)(R,{commitOid:t,initialMarkdown:e.body,ref:o,onSave:l,onCancel:n,referenceId:`${t}-${e.id}`,buttonText:"Update comment"})}R.displayName="CommitCommentEditor";try{A.displayName||(A.displayName="UpdateCommitComment")}catch{}function M({comments:e,commit:t,locked:n,deleteComment:r,updateComment:a,setNewCommentContent:s,repoOwnerGlobalRelayId:o}){return 0===e.length?null:(0,i.jsx)("div",{className:"d-flex flex-column gap-3",children:e.map(e=>(0,i.jsx)(O,{comment:e,commit:t,locked:n,deleteComment:r,updateComment:a,setNewCommentContent:s,repoOwnerGlobalRelayId:o},e.id))})}function O({comment:e,commit:t,locked:n,deleteComment:a,updateComment:o,setNewCommentContent:l,repoOwnerGlobalRelayId:c}){let d=(0,s.t)(),[u,m]=(0,r.useState)(!1),[h,f]=(0,r.useState)(e.isHidden),p=(0,r.useRef)(null),{deleteComment:g,hideComment:y,unhideComment:b}=(0,E.X)(),C=async()=>{let t=await g(e.id.toString());"canceled"!==t&&"error"!==t&&"success"===t&&a(e.id)},v=async t=>{let n=await y(e.id.toString(),t);"error"!==n&&"success"===n&&(o({...e,isHidden:!0,minimizedReason:t}),f(!0))},N=async()=>{let t=await b(e.id.toString());"error"!==t&&"success"===t&&(o({...e,isHidden:!1,minimizedReason:null}),f(!1))},j=t.authors.length>0?t.authors[0]?.login:"",w={...(0,L.p)(e,t,d,c),referenceText:(0,k.F)(t.oid)};return(0,i.jsxs)("div",{className:"border rounded-2",ref:p,id:e.urlFragment,tabIndex:-1,children:[(0,i.jsx)($,{comment:w,commentAuthorLogin:e.author.login,commentSubjectAuthorLogin:j,commentSubjectType:"commit",avatarUrl:e.author.avatarUrl,isMinimized:h,editComment:()=>{m(!0)},onReplySelect:l,onMinimize:f,navigate:()=>{},hideComment:v,unhideComment:N,deleteComment:C,commentRef:p,showEditHistory:e.viewerCanReadUserContentEdits&&!!e.lastUserContentEdit,commitComment:e}),h?null:u?(0,i.jsx)("div",{className:"m-2",children:(0,i.jsx)(A,{comment:e,commitOid:t.oid,onUpdate:e=>{o(e),m(!1)},onCancel:()=>m(!1)})}):(0,i.jsxs)("div",{className:"d-flex flex-column m-3 gap-3",style:{gap:"12px"},children:[(0,i.jsx)("div",{className:"markdown-body","data-turbolinks":"false",children:(0,i.jsx)(_.G,{disabled:!1,verifiedHTML:e.htmlBody,markdownValue:e.body,onChange:()=>{},onLinkClick:()=>{},teamHovercardsEnabled:!0})}),(0,i.jsx)(r.Suspense,{fallback:(0,i.jsx)(x.e,{}),children:(0,i.jsx)(S.ReactionViewerRelayQueryComponent,{id:e.relayId,subjectLocked:n})})]})]})}function $({hideActions:e,...t}){let n,a,s=t.commitComment;return t.showEditHistory&&(n=(0,i.jsx)(r.Suspense,{fallback:null,children:(0,i.jsx)(P,{id:s.relayId})}),a=(0,i.jsx)(B,{id:t.comment.id})),(0,i.jsx)(C.v,{lastEditedByMessage:a,editHistoryComponent:n,forceInlineAvatar:!0,...t,actions:e?void 0:(0,i.jsx)(v.p,{onSuccessfulBlock:()=>{setTimeout(()=>l.cg?.location.reload(),800)},...t})})}function P({id:e}){let t=(0,w.f)({id:e});return t?(0,i.jsx)(N.W,{editHistory:t}):null}function B({id:e}){let t=(0,w.f)({id:e});return t?(0,i.jsx)(j._,{editInformation:t}):null}try{M.displayName||(M.displayName="ExistingCommitComments")}catch{}try{O.displayName||(O.displayName="ExistingCommitComment")}catch{}try{$.displayName||($.displayName="CommitCommentHeader")}catch{}try{P.displayName||(P.displayName="CommitCommentHeaderEditHistory")}catch{}try{B.displayName||(B.displayName="CommitCommentHeaderLastEditedBy")}catch{}var U=n(96235),F=n(64262),H=n(60039),z=n(9852);function V({commitOid:e,locked:t,onClose:n}){let a=(0,s.t)(),{helpUrl:o}=(0,F.X)(),[l,c]=(0,r.useState)(!1),u=t?"Unlock":"Lock",m=async()=>{(await (0,H.DI)(`${(0,U.$Qz)({owner:a.ownerLogin,repo:a.name,commitish:e})}/lock`,{method:"PUT",headers:{Accept:"application/json"}})).ok?n(!0):c(!0)},h=async()=>{(await (0,H.lS)(`${(0,U.$Qz)({owner:a.ownerLogin,repo:a.name,commitish:e})}/unlock`,{method:"PUT",headers:{Accept:"application/json"}})).ok?n(!1):c(!0)};return(0,i.jsxs)(z.l,{onClose:()=>n(),width:"large",title:`${u} conversation on this commit`,footerButtons:[{content:`${u} conversation`,buttonType:"danger",sx:{width:"100%"},onClick:t?h:m}],children:[l&&(0,i.jsxs)(d.A,{className:"mb-2",variant:"danger",children:["There was an error ",u.toLocaleLowerCase(),"ing this conversation. Please try again."]}),(0,i.jsxs)("p",{children:[u,"ing the conversation means:"]}),(0,i.jsx)("ul",{className:"ml-4",children:t?(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Everyone"})," will be able to comment on this commit once more."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("li",{children:["Other users ",(0,i.jsx)("strong",{children:"can\u2019t add new comments"})," to this commit."]}),a.isOrgOwned?(0,i.jsxs)("li",{children:["You and other members of teams with"," ",(0,i.jsx)("a",{href:`${o}/get-started/learning-about-github/access-permissions-on-github`,children:"write access"})," ","to this repository ",(0,i.jsx)("strong",{children:"can still leave comments"})," that others can see."]}):(0,i.jsxs)("li",{children:["You and other collaborators"," ",(0,i.jsx)("a",{href:`${o}/get-started/learning-about-github/access-permissions-on-github`,children:"with access"})," to this repository ",(0,i.jsx)("strong",{children:"can still leave comments"})," that others can see."]})]})}),(0,i.jsxs)("p",{className:"mb-0 mt-2",children:["You can always ",t?"lock":"unlock"," this commit again in the future."]})]})}try{V.displayName||(V.displayName="LockConversationDialog")}catch{}var G=n(7799),W=n(71302),K=n(55179),q=n(63236),X=n(9808),Q=n(39459);function J({commitOid:e,onAddComment:t,onExpandCommentEditor:n,newCommentContent:a,canComment:s,locked:o,repoArchived:d,avatarURL:u}){let m=(0,G.M3)(),{addComment:h}=(0,E.X)(),f=(0,r.useRef)(null),p=async(e,n)=>{let i=await h(e);i.comment&&(t(i.comment),n())},g=(0,K.i)(d,o,m?void 0:(0,i.jsx)(Z,{redirectUrl:l.fV?.href}),"commit");return(0,i.jsx)("div",{className:"d-flex flex-column gap-2 pt-3",children:s?(0,i.jsx)(Y,{commitOid:e,commentEditor:f,onExpandEditor:n,onSave:p,newCommentContent:a,avatarURL:u||X.t.ghostUser.avatarUrl}):(0,i.jsx)(W.P,{icon:c.LockIcon,reason:g})})}function Y(e){let[t,n]=(0,r.useState)(()=>void 0!==e.newCommentContent),[s,o]=(0,r.useState)(e.newCommentContent);t||void 0===e.newCommentContent||s===e.newCommentContent||(n(!0),o(e.newCommentContent));let l="Comment";return t?(0,i.jsx)("div",{id:a.Bq.issueCommentComposer,children:(0,i.jsx)(R,{commitOid:e.commitOid,ref:e.commentEditor,onSave:e.onSave,referenceId:`new-discussion-comment-${e.commitOid}`,commentContent:e.newCommentContent,initialMarkdown:e.newCommentContent,buttonText:l,onCancel:()=>{n(!1)}})}):(0,i.jsxs)("div",{id:a.Bq.issueCommentComposer,className:"d-flex flex-items-center border rounded-2 p-2 gap-2 color-bg-subtle",children:[(0,i.jsx)(Q.r,{src:e.avatarURL,size:20}),(0,i.jsx)(q.z,{onClick:()=>{n(!0),e.onExpandEditor?.()},children:l})]})}function Z({redirectUrl:e}){return(0,i.jsxs)("span",{children:["Please ",(0,i.jsx)("a",{href:e?`/login?return_to=${e}`:"/login",children:"sign in"})," to comment."]})}try{J.displayName||(J.displayName="NewCommitComment")}catch{}try{Y.displayName||(Y.displayName="CompactEditor")}catch{}try{Z.displayName||(Z.displayName="LoggedOutMessage")}catch{}var ee=n(37433);let et=(0,r.forwardRef)(({commitOid:e,subscribed:t},n)=>{let a,[o,l]=(0,r.useState)(t),[d,m]=(0,r.useState)(!1),h=(0,s.t)(),f=(0,ee.H)("/notifications/thread","post");a=d?`You're now ${o?"subscribed":"unsubscribed"} to this thread.`:o?"You're receiving notifications because you're subscribed to this thread.":"You're not receiving notifications from this thread.";let p=async()=>{let t=new FormData;t.append("repository_id",h.id.toString()),t.append("thread_id",e),t.append("thread_class","Commit"),t.append("id",o?"unsubscribe":"subscribe"),t.append("authenticity_token",f??""),(await (0,H.DI)("/notifications/thread",{method:"POST",body:t})).ok&&(l(!o),m(!0))};return(0,i.jsxs)("div",{className:"d-flex flex-items-center border rounded-2 p-2 gap-2",ref:n,children:[(0,i.jsx)(u.Q,{onClick:p,size:"small",leadingVisual:o?c.BellSlashIcon:c.BellIcon,children:o?"Unsubscribe":"Subscribe"}),(0,i.jsx)("p",{role:"status",className:"f6 fgColor-muted mb-0",children:a})]})});et.displayName="NotificationsFooter";let en="comments";function ei(e){return(0,i.jsx)("div",{className:(0,h.$)("d-flex flex-column gap-2 pt-3",a.mU.commentsContainer,g["commit-discussion-comments"]),id:en,children:(0,r.createElement)(er,{...e,key:e.commit.oid})})}function er({commit:e,commentInfo:t,repoOwnerGlobalRelayId:n}){let a=(0,s.t)(),c=(0,o.i)(),{retry:m,loadMore:h,canLoadMore:x,addComment:y,deleteComment:C,updateComment:v,count:N,comments:j,subscribed:w,providerState:_}=(0,f.y)(),[S,E]=(0,r.useState)(void 0),[L,k]=(0,r.useState)(t.locked),I=(0,r.useMemo)(()=>(0,p.N)(e.oid,a.id),[e.oid,a.id]),T=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(l.cg?.location.hash){let e=l.cg.location.hash.slice(1);if(j.find(t=>t.urlFragment===e)){let t=document.getElementById(e);t&&(t.scrollIntoView(),t.focus())}}},[j]);let D=(0,r.useCallback)(()=>{setTimeout(()=>T.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),0)},[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ea,{commitOid:e.oid,commentCount:N,canLock:t.canLock,locked:L,setLocked:k}),"loading"===_&&(0,i.jsx)(b,{}),"error"===_&&(0,i.jsxs)(d.A,{className:"d-flex flex-justify-between flex-items-center",variant:"danger",children:[(0,i.jsx)("span",{children:"Failed to load comments."}),(0,i.jsx)(u.Q,{onClick:()=>m(),children:"Retry"})]}),"loaded"===_&&x&&(0,i.jsx)(u.Q,{className:"width-full",onClick:()=>h(),children:"Load more comments"}),(0,i.jsx)(M,{comments:j,commit:e,locked:L,repoOwnerGlobalRelayId:n,deleteComment:C,updateComment:v,setNewCommentContent:E}),I?(0,i.jsx)("div",{className:"text-center",children:[...Array(38)].map((e,t)=>(0,i.jsx)("img",{alt:"rose",src:"/images/icons/emoji/rose.png",className:g["discussion-comments-rose"]},`rose-${t}`))}):null,"loaded"===_||0!==j.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(J,{commitOid:e.oid,onAddComment:y,onExpandCommentEditor:D,newCommentContent:S,canComment:t.canComment,locked:L,repoArchived:t.repoArchived,avatarURL:c?.avatarURL}),c?(0,i.jsx)(et,{ref:T,commitOid:e.oid,subscribed:w??!1}):null]}):null]})}function ea({commitOid:e,commentCount:t,locked:n,setLocked:a,canLock:s}){let[o,l]=(0,r.useState)(!1);return(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between",children:[(0,i.jsxs)("h2",{className:"sr-only",children:[t," commit comments"]}),(0,i.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,i.jsx)("div",{className:"h4 pr-2",children:"Comments"}),void 0!==t&&(0,i.jsx)(m.A,{children:t})]}),s&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.Q,{leadingVisual:n?c.KeyIcon:c.LockIcon,variant:"invisible",onClick:()=>l(!0),children:[n?"Unlock":"Lock"," conversation"]}),o&&(0,i.jsx)(V,{commitOid:e,locked:n,onClose:e=>{l(!1),void 0!==e&&a(e)}})]})]})}try{ei.displayName||(ei.displayName="DiscussionComments")}catch{}try{er.displayName||(er.displayName="DiscussionCommentsInternal")}catch{}try{ea.displayName||(ea.displayName="DiscussionCommentsHeader")}catch{}},10127:(e,t,n)=>{n.d(t,{C:()=>d,j:()=>c});var i=n(74848),r=n(37804),a=n(94232),s=n(80663),o=n(89169),l=n(41906);function c({commit:e,repo:t,children:n,settings:c,textVariant:d}){let u=(0,l.NO)(e.oid),[m]=(0,s.I)(()=>!1,!0,[]);return(0,i.jsxs)(r.jF,{authors:e.authors,committer:e.committer,committerAttribution:e.committerAttribution,onBehalfOf:u?.onBehalfOf,repo:t,includeVerbs:!0,authorSettings:{fontWeight:"normal",fontColor:"fg.muted",avatarSize:16,...c},textVariant:d,children:[!m&&(0,i.jsx)(o.A,{className:"pl-1",datetime:e.committedDate}),m&&(0,i.jsx)(a.O,{variant:"rounded",className:"d-none d-sm-flex ml-1",width:"60px"}),n]})}function d({commit:e,repo:t,textVariant:n}){let[l]=(0,s.I)(()=>!1,!0,[]);return(0,i.jsxs)(r.Cf,{pusher:e.pusher,repo:t,textVariant:n,children:[!l&&(0,i.jsx)(o.A,{className:"pl-1",datetime:e.pushedDate}),l&&(0,i.jsx)(a.O,{variant:"rounded",className:"d-none d-sm-flex ml-1",width:"60px"})]})}try{c.displayName||(c.displayName="CommitAttribution")}catch{}try{d.displayName||(d.displayName="PushAttribution")}catch{}},56941:(e,t,n)=>{n.d(t,{s:()=>m});var i=n(74848),r=n(38621),a=n(93597),s=n(84217),o=n(53110);let l={none:{},bottom:{pb:0},top:{pt:0}},c=()=>(0,i.jsx)(o.A,{icon:r.GitCommitIcon});function d({children:e,leadingVisual:t,clipTimeline:n="none",sx:r}){let s=l[n];return(0,i.jsxs)(a.A.Item,{sx:{py:1,...s,...r},children:[(0,i.jsx)(a.A.Badge,{sx:{backgroundColor:"canvas.default"},children:t??(0,i.jsx)(c,{})}),(0,i.jsx)(a.A.Body,{className:"mt-0",children:e})]})}function u({title:e,as:t,...n}){return(0,i.jsx)(s.A,{as:t,className:"text-normal f5 py-1",...n,children:e})}let m=Object.assign(d,{Heading:u});try{c.displayName||(c.displayName="DefaultLeadingVisual")}catch{}try{d.displayName||(d.displayName="TimelineRowComponent")}catch{}try{u.displayName||(u.displayName="TimelineRowHeading")}catch{}try{m.displayName||(m.displayName="TimelineRow")}catch{}},42682:(e,t,n)=>{n.d(t,{w:()=>l});var i=n(74848),r=n(8579),a=n(75367),s=n(85179),o=n(77418);function l({sha:e,direction:t="s"}){let{sendAnalyticsEvent:n}=(0,a.s)(),{loggingPrefix:l,loggingPayload:c}=(0,s.xe)(),d=(0,s.eX)();return(0,i.jsx)("div",{onClick:()=>{d&&n(`${l}click`,"COPY_SHA_CLICKED",c)},children:(0,i.jsx)(r.T,{textToCopy:e,ariaLabel:`Copy full SHA for ${(0,o.F)(e)}`,tooltipProps:{direction:t},size:"small"})})}try{l.displayName||(l.displayName="CopySHA")}catch{}},96635:(e,t,n)=>{n.d(t,{Z:()=>a});var i=n(74848),r=n(34164);function a({children:e,className:t=""}){return(0,i.jsx)("div",{className:(0,r.$)("color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",t),children:e})}try{a.displayName||(a.displayName="Panel")}catch{}},85179:(e,t,n)=>{n.d(t,{eX:()=>o,xe:()=>l,zq:()=>s});var i=n(74848),r=n(96540);let a=(0,r.createContext)({loggingPayload:void 0,loggingPrefix:void 0});function s({children:e,loggingInfo:t}){return(0,i.jsx)(a.Provider,{value:t,children:e})}function o(){let e=(0,r.useContext)(a);return void 0!==e.loggingPayload&&void 0!==e.loggingPrefix}function l(){return(0,r.useContext)(a)}try{a.displayName||(a.displayName="CommitsLoggingContext")}catch{}try{s.displayName||(s.displayName="CommitsLoggingInfoProvider")}catch{}},41906:(e,t,n)=>{n.d(t,{M2:()=>l,NO:()=>c,UI:()=>a,Xx:()=>s,ej:()=>u,xs:()=>d});var i=n(74848),r=n(96540);let a={deferredCommits:[],renameHistory:null,loading:!0},s={deferredCommits:[],renameHistory:null,loading:!1},o=(0,r.createContext)(a);function l({children:e,deferredData:t}){return(0,i.jsx)(o.Provider,{value:t,children:e})}function c(e){let t=(0,r.useContext)(o),n=t.error,i=t.deferredCommits?.find(t=>t?.oid===e);return n&&void 0===i&&(i={oid:e,statusCheckStatus:void 0}),i}function d(){return(0,r.useContext)(o).loading}function u(){return(0,r.useContext)(o).renameHistory}try{o.displayName||(o.displayName="DeferredCommitDataContext")}catch{}try{l.displayName||(l.displayName="DeferredCommitDataProvider")}catch{}},89574:(e,t,n)=>{n.d(t,{c:()=>d,y:()=>u});var i,r=n(74848),a=n(13233),s=n(96235),o=n(60039),l=n(96540);let c=(0,l.createContext)({comments:[],addComment:a.l,deleteComment:a.l,updateComment:a.l,loadMore:a.l,retry:a.l,canLoadMore:!1,count:0,subscribed:!1,providerState:"initial"});function d({children:e,comments:t=[],commentCount:n=0,canLoadMore:i=!1,subscribed:a=!1,providerState:d="initial",repo:u,commitOid:m}){let[h,f]=(0,l.useState)(t),[p,g]=(0,l.useState)(n),[x,y]=(0,l.useState)(i),[b,C]=(0,l.useState)(d),[v,N]=(0,l.useState)(a);(0,l.useEffect)(()=>{g(n),f(t),y(i),N(a),C(d)},[d]);let j=(0,l.useCallback)(async e=>{C("loading");let t=await (0,o.Sr)((0,s.Mo3)({owner:u.ownerLogin,repo:u.name,commitOid:m,beforeCommentId:e}));if(t.ok){let n=await t.json();e?f(e=>[...n.comments,...e]):f(n.comments),C("loaded"),g(n.count),N(n.subscribed),y(n.canLoadMore)}else C("error")},[u.ownerLogin,u.name,m]),w=(0,l.useCallback)(()=>{let e=h[0];e&&x&&j(e.id.toString())},[x,h,j]),_=(0,l.useCallback)(e=>{f([...h,e]),g((p??0)+1)},[h,p]),S=(0,l.useCallback)(e=>{f(h.filter(t=>t.id!==e)),g((p??0)-1)},[h,p]),E=(0,l.useCallback)(e=>{f(h.map(t=>t.id===e.id?e:t))},[h]),L=(0,l.useMemo)(()=>({addComment:_,canLoadMore:x,comments:h,count:p,deleteComment:S,loadMore:w,retry:j,subscribed:v,providerState:b,updateComment:E}),[_,x,h,p,S,j,w,b,v,E]);return(0,r.jsx)(c.Provider,{value:L,children:e})}function u(){let e=(0,l.useContext)(c);if(!e)throw Error("useDiscussionComments must be used within a DiscussionCommentsProvider");return e}try{c.displayName||(c.displayName="DiscussionCommentsContext")}catch{}try{d.displayName||(d.displayName="DiscussionCommentsProvider")}catch{}try{(i=DiscussionComments).displayName||(i.displayName="DiscussionComments")}catch{}},30559:(e,t,n)=>{n.d(t,{B:()=>d,r:()=>c});var i=n(74848),r=n(13233),a=n(96540);let s=(0,a.createContext)({comments:[],addComments:r.l,findInlineComment:()=>void 0,findInlineCommentWithRelay:()=>void 0,getCommentCountByPath:()=>0,getThreadDataByPathAndPosition:()=>void 0,updateInlineCommentMapWithNewComment:()=>void 0,getInlineCommentInfoByPathAndPosition:()=>void 0});function o(e){return e.reduce((e,t)=>(e.set(`${t.path}::${t.position}`,t),e),new Map)}function l(e){let t=new Map;for(let n in e)if(e.hasOwnProperty(n)){let i=new Map;for(let t in e[n])e[n].hasOwnProperty(t)&&i.set(Number(t),e[n][Number(t)]);t.set(n,i)}return t}function c({children:e,initialFiles:t,initialExpandedThreadId:n,initialInlineComments:r}){let[c,d]=(0,a.useState)(()=>r?Object.values(r).flatMap(e=>Array.from(Object.values(e).flat())):[]),[u,m]=(0,a.useState)(t??[]),[h,f]=(0,a.useState)(()=>t?o(t):new Map),[p,g]=(0,a.useState)(()=>r?l(r):new Map),x=(0,a.useCallback)((e,t,n,i)=>{if(i){let i=p.get(e)?.get(t)??[];i=i.concat(n);let r=p.get(e)?.set(t,i);g(p.set(e,r??new Map)??p)}else{let i=p.get(e)?.set(t,n);g(p.set(e,i??new Map)??p)}},[p]);(0,a.useEffect)(()=>{m(t??[]),f(t?o(t):new Map),g(r?l(r):new Map),d(r?Object.values(r).flatMap(e=>Array.from(Object.values(e).flat())):[])},[t,r]);let y=(0,a.useCallback)((e,t,n)=>{let i=e.map(e=>e.id),r=c.filter(e=>!i.includes(e.id)),a=u.filter(e=>e.path!==t||e.position!==parseInt(n)),s={path:t,position:parseInt(n),count:e.length,threads:[{id:`${t}::${n}`,diffSide:"RIGHT",commentsData:{totalCount:e.length,comments:e.map(e=>({id:e.id,author:{avatarUrl:e?.author?.avatarUrl??"",login:e?.author?.login??"",url:""}}))}}]};d([...r,...e]),m([...a,s]),f(o([...a,s])),x(t,parseInt(n),e,!1)},[u,c,x]),b=(0,a.useCallback)(e=>{if(e)return c.find(t=>t.id===e)},[c]),C=(0,a.useCallback)(e=>c.find(t=>t.relayId===e),[c]),v=(0,a.useCallback)(e=>{let t=0;for(let n of u)n.path===e&&(t+=n.count);return t},[u]),N=(0,a.useCallback)((e,t)=>h.get(`${e}::${t}`),[h]),j=(0,a.useCallback)((e,t)=>p.get(e)?.get(t),[p]),w=(0,a.useMemo)(()=>({comments:c,addComments:y,findInlineComment:b,findInlineCommentWithRelay:C,getCommentCountByPath:v,getThreadDataByPathAndPosition:N,getInlineCommentInfoByPathAndPosition:j,updateInlineCommentMapWithNewComment:x,initialExpandedThreadId:n}),[y,c,b,C,v,N,j,x,n]);return(0,i.jsx)(s.Provider,{value:w,children:e})}function d(){let e=(0,a.useContext)(s);if(!e)throw Error("useInlineComments must be used within a InlineCommentsProvider");return e}try{s.displayName||(s.displayName="InlineCommentsContext")}catch{}try{c.displayName||(c.displayName="InlineCommentsProvider")}catch{}},4539:(e,t,n)=>{n.d(t,{f:()=>ee});var i=n(74848),r=n(57909),a=n(96679),s=n(42080),o=n(26807),l=n(93597),c=n(96540),d=n(84905),u=n(96635);let m={panel:"CommitGroup-module__panel--tvFMx"};var h=n(52811),f=n(44237),p=n(78168),g=n(93715),x=n(81346),y=n(52369),b=n(81584),C=n(45968),v=n(75367),N=n(80663),j=n(85179),w=n(41906),_=n(10127),S=n(96235),E=n(28391),L=n(38621),k=n(55847),I=n(87330),T=n(94977),D=n(18828),R=n(77418),A=n(4148);let M=c.memo(O);function O({repo:e,oid:t}){let n=`browse-repo-${(0,R.F)(t)}`,{sendAnalyticsEvent:r}=(0,v.s)(),{loggingPrefix:a,loggingPayload:s}=(0,j.xe)(),o=(0,j.eX)();return(0,i.jsx)(T.A,{"aria-label":"Browse repository at this point",id:n,direction:"sw",children:(0,i.jsx)("a",{"aria-labelledby":n,href:(0,S.IO9)({repo:e,action:"tree",commitish:t}),className:"Button Button--iconOnly Button--invisible Button--small","data-testid":"commit-row-browse-repo",onClick:()=>{o&&r(`${a}click`,"COMMITS_BROWSE_REPOSITORY_AT_THIS_POINT_CLICKED",s)},children:(0,i.jsx)(L.CodeIcon,{})})})}let $=c.memo(P);function P({repo:e,oid:t,path:n}){if(!n)return null;let r=`view-code-${(0,R.F)(t)}`;return(0,i.jsx)(T.A,{"aria-label":"View code at this point",id:r,direction:"sw",children:(0,i.jsx)("a",{"aria-labelledby":r,href:(0,S.nD_)({owner:e.ownerLogin,repo:e.name,commitish:t,filePath:n}),className:"Button Button--iconOnly Button--invisible Button--small","data-testid":"commit-row-view-code",children:(0,i.jsx)(L.FileCodeIcon,{})})})}function B({commitUrl:e,oid:t,softNavToCommit:n}){let r={variant:"invisible",size:"small",sx:{fontFamily:"var(--fontStack-monospace)",color:"fg.muted"}};return(0,i.jsx)(T.A,{"aria-label":"View commit details",direction:"s",children:n?(0,i.jsx)(k.Q,{as:E.N,to:e,...r,children:(0,R.F)(t)}):(0,i.jsx)("a",{className:"Button--invisible Button--small Button text-mono",href:e,...r,children:(0,i.jsx)("span",{className:"Button-content",children:(0,i.jsx)("span",{className:"Button-label color-fg-muted",children:(0,R.F)(t)})})})})}function U({showDescription:e,setShowDescription:t,oid:n}){let r=(0,R.F)(n),a=`show-description-${r}`,s=`${!e?"Show":"Hide"} description for ${r}`;return(0,i.jsx)(D.m,{id:a,text:s,"aria-label":s,children:(0,i.jsx)(I.K,{icon:L.EllipsisIcon,className:"Button Button--iconOnly Button--invisible Button--small ml-1","data-testid":"commit-row-show-description-button","aria-labelledby":a,"aria-pressed":e,"aria-expanded":e,onClick:n=>{n.preventDefault(),t(!e)}})})}function F({count:e,repo:t,oid:n}){if(!e)return null;let r=`comment-count-${(0,R.F)(n)}`;return(0,i.jsx)(T.A,{"aria-label":`View ${e} commit comment${e>1?"s":""}`,id:r,direction:"sw",children:(0,i.jsx)("a",{"aria-labelledby":r,href:`${(0,S.$Qz)({owner:t.ownerLogin,repo:t.name,commitish:n})}#${A.N}`,className:"Button Button--invisible Button--small","data-testid":"commit-row-comments",children:(0,i.jsxs)("span",{className:"Button-content color-fg-muted",children:[(0,i.jsx)(L.CommentIcon,{}),(0,i.jsx)("span",{className:"Button-label",children:e})]})})})}try{M.displayName||(M.displayName="BrowseRepositoryAtThisPoint")}catch{}try{O.displayName||(O.displayName="WrappedBrowseRepositoryAtThisPoint")}catch{}try{$.displayName||($.displayName="ViewCodeAtThisPoint")}catch{}try{P.displayName||(P.displayName="WrappedViewCodeAtThisPoint")}catch{}try{B.displayName||(B.displayName="ViewCommitDetails")}catch{}try{U.displayName||(U.displayName="ToggleCommitDescription")}catch{}try{F.displayName||(F.displayName="CommitCommentCount")}catch{}var H=n(87606),z=n(94232),V=n(22403),G=n(94671);function W({deferredData:e}){let{helpUrl:t}=(0,V.D)(),n=(0,w.xs)();return(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)(z.O,{variant:"rounded",className:"d-none d-sm-flex",width:"62px"}),!n&&void 0===e&&(0,i.jsx)(z.O,{variant:"rounded",className:"d-none d-sm-flex",width:"62px"}),!n&&e&&(0,i.jsx)(H.h,{commitOid:e.oid,hasSignature:!0,verificationStatus:e.verifiedStatus,signature:e.signatureInformation?{helpUrl:t,...e.signatureInformation}:void 0})]})}function K({deferredData:e,oid:t,repository:n}){let r=(0,w.xs)(),a="";try{a=e?.statusCheckStatus?.short_text?.split("checks")[0]?.trim()||""}catch{}return(0,i.jsxs)(i.Fragment,{children:[r&&(0,i.jsx)(z.O,{variant:"rounded",className:"d-none d-sm-flex ml-2",width:"20px"}),!r&&void 0===e&&(0,i.jsx)(z.O,{variant:"rounded",className:"d-none d-sm-flex ml-2",width:"20px"}),!r&&e?.statusCheckStatus&&(0,i.jsx)("div",{className:"d-none d-sm-flex ml-1",children:"\xb7"}),(0,i.jsx)("div",{className:"d-none d-sm-flex",children:(0,i.jsx)(G.d,{oid:t,status:e?.statusCheckStatus?.state,descriptionString:a,repo:n})})]})}try{W.displayName||(W.displayName="SignedCommitBadge")}catch{}try{K.displayName||(K.displayName="CommitChecksStatusBadge")}catch{}var q=n(42682);let X={ListItemTitle_0:"CommitRow-module__ListItemTitle_0--g9uVv",ListItem_0:"CommitRow-module__ListItem_0--PkFAi",ListItemMetadata_0:"CommitRow-module__ListItemMetadata_0--MUr_4"},Q=(0,c.lazy)(()=>n.e("ui_packages_commits_components_Commits_CommitActionBar_tsx").then(n.bind(n,4120)).then(e=>({default:e.CommitActionBar})));function J({commit:e,repo:t,path:n,softNavToCommit:r}){let[a,s]=(0,c.useState)(!1),o=(0,c.useRef)(null),[l,d]=(0,f.ym)(e.oid,t),[u,m]=(0,c.useState)(!1),S=(0,w.NO)(e.oid),[E]=(0,N.I)(()=>!1,!0,[]),{sendAnalyticsEvent:L}=(0,v.s)(),{loggingPrefix:k,loggingPayload:I}=(0,j.xe)(),T=(0,j.eX)(),D=()=>{T&&L(`${k}click`,"COMMITS_TITLE_CLICKED",I)};return(0,c.useEffect)(()=>{a&&o.current&&o.current.textContent&&(0,h.i)(o.current.textContent)},[o,a]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(p.c,{"data-testid":"commit-row-item","data-commit-link":e.url,title:e.shortMessageMarkdownLink&&!E?(0,i.jsx)(b.kx,{html:e.shortMessageMarkdownLink,onClick:D,containerClassName:X.ListItemTitle_0,headingClassName:X.ListItemTitle_0,children:e.bodyMessageHtml&&(0,i.jsx)(U,{showDescription:a,setShowDescription:s,oid:e.oid})}):(0,i.jsx)(b.ao,{value:e.shortMessage,href:e.url,onClick:D,containerClassName:X.ListItemTitle_0,headingClassName:X.ListItemTitle_0,children:e.bodyMessageHtml&&(0,i.jsx)(U,{showDescription:a,setShowDescription:s,oid:e.oid})}),metadata:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(y.V,{children:(0,i.jsx)(F,{oid:e.oid,repo:t,count:S?.commentCount??0})}),(0,i.jsx)(y.V,{className:X.ListItemMetadata_0,children:(0,i.jsx)(W,{deferredData:S})}),(0,i.jsxs)(y.V,{className:"d-none d-sm-flex px-0 gap-2",variant:"primary",children:[(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsx)(B,{oid:e.oid,commitUrl:e.url,softNavToCommit:r}),(0,i.jsx)(q.w,{sha:e.oid})]}),(0,i.jsx)($,{repo:t,oid:e.oid,path:n}),(0,i.jsx)(M,{repo:t,oid:e.oid})]})]}),secondaryActions:(0,i.jsx)(c.Suspense,{children:(0,i.jsx)(Q,{commit:e,repo:t,path:n,setDialogOpen:m,fetchCheckDetails:d,deferredData:S})}),className:X.ListItem_0,children:[(0,i.jsx)("div",{className:"px-1"}),(0,i.jsxs)(x.Q,{children:[a&&e.bodyMessageHtml&&(0,i.jsx)(g.U,{children:(0,i.jsx)(C.JR,{ref:o,html:e.bodyMessageHtml,className:"ws-pre-wrap extended-commit-description-container pb-2 text-mono wb-break-word"})}),(0,i.jsx)(g.U,{children:(0,i.jsx)(_.j,{commit:e,repo:t,children:(0,i.jsx)(K,{repository:t,deferredData:S,oid:e.oid})})})]})]}),S?.statusCheckStatus&&u&&(0,i.jsx)(f.xC,{combinedStatus:l,isOpen:u,onDismiss:()=>{m(!1)}})]})}try{Q.displayName||(Q.displayName="CommitActionBar")}catch{}try{J.displayName||(J.displayName="CommitRow")}catch{}var Y=n(56941);function Z({commits:e,title:t,shouldClipTimeline:n,repo:r,currentBlobPath:a="",softNavToCommit:s}){let o=(0,c.useId)();return(0,i.jsxs)(Y.s,{clipTimeline:n?"top":"none",children:[(0,i.jsx)(Y.s.Heading,{as:"h3",id:o,title:`Commits on ${t}`,"data-testid":"commit-group-title"}),(0,i.jsx)(u.Z,{className:m.panel,children:(0,i.jsx)(d.u,{title:t,titleHeaderTag:"h3",ariaLabelledBy:o,children:e.map(e=>(0,i.jsx)(J,{commit:e,repo:r,path:a,softNavToCommit:s},e.oid))},t)})]})}try{Z.displayName||(Z.displayName="CommitGroup")}catch{}function ee({leadingContent:e,commitGroups:t,trailingContent:n,deferredCommitData:d=w.Xx,repository:u,currentBlobPath:m,loggingPayload:h,loggingPrefix:f,shouldClipTimeline:p=!0,softNavToCommit:g=!1}){let x=(0,c.useRef)(0),y=(0,c.useRef)(null),b=(0,c.useRef)(null),C=(0,c.useRef)(!1),v=(0,c.useRef)([]),N=(0,o.Z)(),_=e=>{"commit-diff-view:tab-forward"===e.commandId&&(y.current=b.current,b.current=a.XC?.activeElement??null,C.current=!1),"commit-diff-view:tab-backward"===e.commandId&&a.XC?.activeElement?.hasAttribute("data-commit-link")&&!C.current&&y.current&&(y.current.focus(),b.current=y.current),"commit-diff-view:tab-backward"===e.commandId&&(C.current=!0)},S=e=>{if(!(0,r.zw)()&&("commit-diff-view:go-down-commit"===e.commandId||"commit-diff-view:go-up-commit"===e.commandId))return;let t=1;for(let e=0;e<v.current.length;e++)v.current[e]?.contains(a.XC?.activeElement)&&(t=e+1);let n=!1;if(("commit-diff-view:go-up-commit"===e.commandId||"commit-diff-view:go-up-commit-arrow"===e.commandId)&&(n=!0),x.current!==t)x.current=t;else{let e=v.current[n?t-2:t];e?.focus(),e?.focus(),x.current=n?t-1:t+1}};return(0,c.useEffect)(()=>{let e=setTimeout(()=>{v.current=Array.from(document.querySelectorAll('[id*="-list-view-node-"]'))},0);return()=>clearTimeout(e)},[t]),(0,i.jsx)(w.M2,{deferredData:d,children:(0,i.jsx)(j.zq,{loggingInfo:{loggingPayload:h,loggingPrefix:f},children:(0,i.jsxs)(l.A,{clipSidebar:!0,onKeyDown:e=>{if("Enter"===e.key){let t=a.XC?.activeElement?.hasAttribute("data-commit-link")?a.XC?.activeElement?.getAttribute("data-commit-link"):void 0;t&&(e.ctrlKey||e.metaKey?a.cg?.open(t,"_blank"):N(t))}},children:[e,(0,i.jsx)(s.tL,{commands:{"commit-diff-view:go-down-commit-arrow":S,"commit-diff-view:go-down-commit":S,"commit-diff-view:go-up-commit-arrow":S,"commit-diff-view:go-up-commit":S,"commit-diff-view:tab-forward":_,"commit-diff-view:tab-backward":_},triggerOnDefaultPrevented:!0,children:t.map((e,t)=>(0,i.jsx)(Z,{title:e.title,commits:e.commits,shouldClipTimeline:p&&0===t,currentBlobPath:m,repo:u,softNavToCommit:g},e.title))}),n]})})})}try{ee.displayName||(ee.displayName="Commits")}catch{}},20933:(e,t,n)=>{n.d(t,{M:()=>u});var i=n(74848),r=n(640),a=n(13233),s=n(38621),o=n(9591),l=n(32647),c=n(96635);let d={timeout:{description:"Try reloading the page, or if the problem persists, view the history locally using this command:",heading:"Commit history cannot be loaded",icon:(0,i.jsx)(s.AlertIcon,{size:"medium",className:"mb-2 fgColor-muted"}),showTextInput:!0},unavailable:{description:"There isn't any commit history to show here.",heading:"No commits history",icon:(0,i.jsx)(s.GitCommitIcon,{size:"medium"}),showTextInput:!1}};function u({timeoutMessage:e,unavailableMessage:t}){let n=d[""!==e?"timeout":"unavailable"],u=t??n.description;return(0,i.jsx)(c.Z,{children:(0,i.jsx)("div",{"data-hpc":!0,children:(0,i.jsxs)(l.E,{border:!1,spacious:!0,children:[(0,i.jsx)(l.E.Visual,{children:n.icon}),(0,i.jsx)(l.E.Heading,{children:n.heading}),(0,i.jsx)(l.E.Description,{children:u}),n.showTextInput&&(0,i.jsx)(o.A,{"aria-label":"View commit history locally command",className:"d-flex flex-justify-center mt-2",monospace:!0,onChange:a.l,readOnly:!0,size:"large",trailingAction:(0,i.jsx)(o.A.Action,{onClick:()=>(0,r.D)(e),icon:s.CopyIcon,"aria-label":"Copy to clipboard",className:"fgColor-muted"}),value:e})]})})})}try{u.displayName||(u.displayName="CommitsBlankState")}catch{}},88795:(e,t,n)=>{n.d(t,{d:()=>o,t:()=>l});var i=n(74848),r=n(21728),a=n(96540);let s=a.createContext({});function o(e){let t,n=(0,r.c)(3),{repository:a,children:o}=e;return n[0]!==o||n[1]!==a?(t=(0,i.jsxs)(s.Provider,{value:a,children:[" ",o," "]}),n[0]=o,n[1]=a,n[2]=t):t=n[2],t}function l(){return a.useContext(s)}try{s.displayName||(s.displayName="CurrentRepositoryContext")}catch{}try{o.displayName||(o.displayName="CurrentRepositoryProvider")}catch{}},90051:(e,t,n)=>{n.d(t,{a:()=>I});var i=n(74848),r=n(70170),a=n(96679),s=n(42080),o=n(99837),l=n(74021),c=n(64515),d=n(16255),u=n(34164),m=n(24249),h=n(96540),f=n(15385),p=n(45221),g=n(59214),x=n(81007);let y={Overlay_0:"AutocompleteSuggestions-module__Overlay_0--QuLJW",suggestion:"AutocompleteSuggestions-module__suggestion--qvk1X"},b=new Set([" ",`
`]),C=new Set([".",`
`]),v=e=>"string"==typeof e?e:e.value,N=e=>"string"==typeof e?e:null===e.value?e.key:e.key??e.value,j=(...e)=>t=>{for(let n of[...e].reverse())t.isDefaultPrevented()||n?.(t)},w=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.l.Item,{disabled:!0,children:(0,i.jsx)(x.r,{})}),(0,i.jsx)(f.l.Item,{disabled:!0,children:(0,i.jsx)(x.r,{})}),(0,i.jsx)(f.l.Item,{disabled:!0,children:(0,i.jsx)(x.r,{})})]}),_=({suggestion:e,onSelect:t,isActive:n,id:r,parentRole:a})=>{let s={id:r,children:v(e),role:"menu"===a?"menuitem":"option",active:n,className:y.suggestion,"aria-selected":"listbox"===a&&!!n||void 0,onMouseDown:e=>{e.preventDefault(),t()}};return"string"==typeof e?(0,i.jsx)(f.l.Item,{...s}):e.render(s)},S=({suggestions:e,portalName:t,triggerCharCoords:n,onClose:r,onCommit:a,inputRef:s,visible:o,defaultPlacement:l,activeSuggestion:c,getSuggestionId:d,id:u,menuTitle:m,role:x})=>{let b=(0,h.useRef)(null),[C,v]=(0,h.useState)(0);(0,p.A)(function(){let e=b.current?.offsetHeight??0,t=n.top+n.height,i=t+e>window.innerHeight,r=n.top-e,a=r<0,s={below:i&&!a?r:t,above:a&&!i?t:r}[l];v(Number.isNaN(s)?0:s)},[n.top,n.height,e,o,l]);let j=(0,i.jsx)(i.Fragment,{children:"loading"===e?(0,i.jsx)(w,{}):e?.map(e=>(0,i.jsx)(_,{suggestion:e,id:d(e),onSelect:()=>a(e),isActive:c===e,parentRole:x},N(e)))}),S=(0,h.useId)();return o?(0,i.jsx)(g.Ay,{onEscape:r,onClickOutside:r,returnFocusRef:s,preventFocusOnOpen:!0,portalContainerName:t,top:C,left:n.left,ref:b,className:y.Overlay_0,children:(0,i.jsx)(f.l,{role:x,id:u,"aria-label":m?void 0:"Autocomplete suggestions","aria-labelledby":m?S:void 0,children:m?(0,i.jsxs)(f.l.Group,{children:[(0,i.jsx)(f.l.GroupHeading,{id:S,children:m}),j]}):j})}):(0,i.jsx)(i.Fragment,{})};try{w.displayName||(w.displayName="LoadingIndicator")}catch{}try{_.displayName||(_.displayName="SuggestionListItem")}catch{}try{S.displayName||(S.displayName="AutocompleteSuggestions")}catch{}let E={container:"InlineAutocomplete-module__container--UwGMb",fullWidth:"InlineAutocomplete-module__fullWidth--X6eXo"},L=e=>{try{return e.selectionStart}catch(e){if(e instanceof TypeError)return null;throw e}},k=()=>{},I=({triggers:e,suggestions:t,onShowSuggestions:n,onHideSuggestions:f,onSelectSuggestion:p,style:g,children:x,tabInsertsSuggestions:y=!1,suggestionsPlacement:w="below",portalName:_,fullWidth:I=!1,title:T,asMenu:D,...R})=>{let[,A]=(0,h.useState)(0),M=(0,l.Lf)(R),O=(0,h.useRef)(null);(0,c.T)(x.ref??k,O);let $=function(e,t){if(h.Children.only(e),t.current&&!(t.current instanceof HTMLInputElement)&&!(t.current instanceof HTMLTextAreaElement))throw TypeError("AutocompleteTextarea child must be a component that forwards a ref and props to an <input> or <textarea> element.");return e}(x,O),P=(0,o.H)({inputRef:O,fallbackEventHandler:$.props.onChange??k}),B=(0,h.useRef)(null),U=null!==t&&t.length>0,[F,H]=(0,h.useState)(),z=Array.isArray(t)?t.find(e=>N(e)===F)??t[0]:void 0;F&&!U&&H(void 0),(0,h.useEffect)(()=>{if(U){let e=(0,r.n)(()=>A(e=>e+1),100);return document.addEventListener("scroll",e,{capture:!0}),()=>{document.removeEventListener("scroll",e,{capture:!0})}}},[U]);let V=O.current&&B.current&&U?new m.Qr(O.current,(L(O.current)??0)-B.current.query.length).getBoundingClientRect():{top:0,left:0,height:0},G=e=>{if(!z||!Array.isArray(t))return;let n=e=>{H(e?N(e):void 0)};switch(e){case"up":n(t[t.indexOf(z)-1]??t.at(-1));break;case"down":n(t[t.indexOf(z)+1]??t[0]);break;case"start":n(t[0]);break;case"end":n(t.at(-1))}},W=(e=z)=>{if(!e)return;let t=(e=>"object"==typeof e&&null===e.value)(e),n=v(e)??"";if(!O.current||!B.current)return;let{query:i,trigger:r}=B.current,a=L(O.current)??0,s=i.length+r.triggerChar.length,o=a-s,l=t||(r.keepTriggerCharOnCommit??!0)?r.triggerChar:"",c=!t&&(r.insertSpaceOnCommit??!0),d=`${l}${n}${c?" ":""}`;f(),P(d,[o,o+s]),p?.({suggestion:e,trigger:r,query:i,target:O.current})},K=(0,h.useId)(),q=e=>`${K}-${N(e)}`,X=!D,Q=(0,h.cloneElement)($,{...M,onBlur:j($.props.onBlur,()=>{f()}),onKeyDownCapture:j($.props.onKeyDownCapture,e=>{if(U)switch(e.key){case"ArrowRight":case"ArrowLeft":f();break;case"Tab":y||f()}}),onChange:j($.props.onChange,t=>{let i=L(t.currentTarget);if(null===i)return void f();let r=((e,t,n)=>{let i=e.sort((e,t)=>t.triggerChar.length-e.triggerChar.length);for(let e=n-1,r="",a=i;e>=0&&a.length>0;e--){let n=t[e]??"";for(let i of(r=n+r,b.has(n)&&(a=a.filter(e=>e.multiWord)),C.has(n)&&(a=a.filter(e=>!e.multiWord)),a.filter(e=>r.startsWith(e.triggerChar)))){let n=t[e-1]??"",s=r[1]??"";if((!n||/[\s([]/.test(n))&&(!s||!/\s/.test(s)))return{trigger:i,query:r.slice(i.triggerChar.length)};a=a.filter(e=>e!==i)}}return null})(e,t.currentTarget.value,i);B.current=r&&{...r,target:t.currentTarget},B.current?n(B.current):f()}),ref:O,role:U&&X?"combobox":$.props.role,"aria-expanded":U&&X?"true":$.props["aria-expanded"],"aria-activedescendant":z?q(z):$.props["aria-activedescendant"],"aria-controls":U&&X?K:$.props["aria-controls"],"aria-owns":U&&D?K:$.props["aria-owns"],"aria-autocomplete":U&&X?"list":$.props["aria-autocomplete"],"aria-haspopup":U&&X?"listbox":$.props["aria-haspopup"]}),J=U?"loading"===t?"Loading autocomplete suggestions\u2026":X?`${t.length} autocomplete ${1===t.length?"suggestion":"suggestions"} available; "${v(t[0])}" is highlighted. Press ${y?"Enter or Tab":"Enter"} to select.`:"":"";return(0,i.jsxs)(s.tL,{commands:U?{"github:cancel":()=>f(),"github:select":()=>W(),"github:focus-next":y?()=>W():void 0,"github:down":()=>G("down"),"github:up":()=>G("up"),"github:go-to-start":()=>G("start"),"github:go-to-end":()=>G("end")}:{},className:(0,u.$)(E.container,I&&E.fullWidth),style:g,children:[Q,a.KJ&&(0,i.jsx)(S,{id:K,suggestions:t,inputRef:O,onCommit:W,onClose:f,triggerCharCoords:V,visible:U,defaultPlacement:w,portalName:_,activeSuggestion:z,getSuggestionId:q,menuTitle:T,role:D?"menu":"listbox"}),a.KJ&&(0,i.jsx)(d.Z,{children:(0,i.jsx)("span",{"aria-live":"assertive","aria-atomic":!0,style:{clipPath:"circle(0)",position:"absolute"},children:J})})]})};try{I.displayName||(I.displayName="InlineAutocomplete")}catch{}},34700:(e,t,n)=>{n.d(t,{X:()=>o});var i=n(74848),r=n(47139),a=n(56693),s=n(90735);let o=({children:e="Preview",feedbackUrl:t,className:n})=>(0,i.jsx)(s.V,{className:n,label:(0,i.jsx)(r.A,{variant:"success",children:e}),link:t?(0,i.jsx)(a.A,{feedbackUrl:t}):void 0});try{o.displayName||(o.displayName="BetaLabel")}catch{}},52369:(e,t,n)=>{n.d(t,{V:()=>o});var i=n(74848),r=n(98386),a=n(34164);let s={metadata:"Metadata-module__metadata--yvrod",secondary:"Metadata-module__secondary--zMgLx",primary:"Metadata-module__primary--cJgJU",alignRight:"Metadata-module__alignRight--rp0_Z"};function o({children:e,alignment:t,variant:n,...o}){return(0,i.jsx)("div",{...(0,r.G)("list-view-item-metadata-item"),...o,className:(0,a.$)(s.metadata,"primary"===n?s.primary:s.secondary,"right"===t&&s.alignRight,o.className),children:e})}try{o.displayName||(o.displayName="ListItemMetadata")}catch{}},81584:(e,t,n)=>{n.d(t,{kx:()=>j,ao:()=>N});var i,r,a=n(74848),s=n(30422),o=n(45968),l=n(98386),c=n(34164),d=n(96540),u=n(78413),m=n(78563),h=n(96222),f=n(65607),p=n(89992);let g={container:"Selection-module__container--VTcpJ",containerWithDragHandle:"Selection-module__containerWithDragHandle--xEvss",dragTrigger:"Selection-module__dragTrigger--jIZMt",compact:"Selection-module__compact--LUlY8",checkbox:"Selection-module__checkbox--nZsSH",checkboxCompact:"Selection-module__checkboxCompact--pRIwD"};var x=n(87766),y=n(14918);let b=()=>{let{variant:e}=(0,m.e)(),{isSelectable:t,hasDragHandle:n}=(0,p.v)(),{isSelected:i,onSelect:r}=(0,x.r)(),{title:s}=(0,y.J)();return t?(0,a.jsxs)("div",{className:n?g.containerWithDragHandle:g.container,...(0,l.G)("list-view-item-selection"),children:[n&&(0,a.jsx)(h.BS.DragTrigger,{className:(0,c.$)(g.dragTrigger,"compact"===e&&g.compact)}),(0,a.jsx)(f.A,{className:"default"===e?g.checkbox:g.checkboxCompact,checked:i,onChange:()=>r(!i),"aria-label":`Select: ${s}`,"data-listview-component":"selection-input",...(0,l.G)("list-view-item-selection-input")})]}):null};try{b.displayName||(b.displayName="ListItemSelection")}catch{}let C={anchor:"Title-module__anchor--SyQM6",heading:"Title-module__heading--upUxW",compact:"Title-module__compact--qLTco",container:"Title-module__container--l9xi7",trailingBadgesSpacer:"Title-module__trailingBadgesSpacer--TioiY",trailingBadgesContainer:"Title-module__trailingBadgesContainer--XGsbF",inline:"Title-module__inline--x4zR5"};function v({children:e,containerStyle:t,containerClassName:n,headerContainerRef:i,headingStyle:r,headingClassName:s,headingRef:o,leadingBadge:d,trailingBadges:h,header:f}){let{variant:p}=(0,m.e)(),{headingRef:g}=(0,y.J)(),x=(0,u.m)("listitem");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{...(0,l.G)("list-view-item-title-container"),style:t,className:(0,c.$)(C.container,"compact"===p&&C.compact,n),ref:i,children:[(0,a.jsxs)(x,{className:(0,c.$)(C.heading,"compact"===p&&C.compact,s),style:r,ref:e=>{if(g&&(g.current=e),o&&"current"in o)try{o.current=e}catch{}},...(0,l.G)("list-view-item-title"),children:[d,f]}),h&&(0,a.jsx)("span",{className:C.trailingBadgesSpacer}),(0,a.jsx)("span",{className:C.trailingBadgesContainer,children:h}),e]}),(0,a.jsx)(b,{})]})}function N({children:e,value:t,containerStyle:n,containerClassName:i,headerContainerRef:r,headingStyle:s,headingClassName:o,headingRef:l,leadingBadge:c,trailingBadges:u,anchorRef:m,...h}){let f=(0,d.useRef)(null),p=m||f;return _({anchorRef:p,...h}),(0,a.jsx)(v,{header:h.href||h.onClick?(0,a.jsx)(w,{anchorRef:p,...h,children:(0,a.jsx)("span",{children:t})}):(0,a.jsx)("span",{children:t}),containerStyle:n,containerClassName:i,headerContainerRef:r,headingStyle:s,headingClassName:o,headingRef:l,leadingBadge:c,trailingBadges:u,children:e})}function j({children:e,html:t,containerStyle:n,containerClassName:i,headerContainerRef:r,headingStyle:o,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,...m}){return _(m),(0,a.jsx)(v,{header:(0,a.jsx)(s.BC,{html:t,...m}),containerStyle:n,containerClassName:i,headerContainerRef:r,headingStyle:o,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,children:e})}function w({anchorStyle:e,anchorClassName:t,anchorRef:n,linkProps:i,children:r,...s}){let{as:o="a",...u}=i??{},m=(0,d.useRef)(null);return(0,a.jsx)(o,{...(0,l.G)("listitem-title-link"),style:e,ref:n||m,className:(0,c.$)(C.anchor,C.inline,t),...s,...u,children:r})}let _=({href:e,onClick:t,anchorRef:n})=>{let{setTitleAction:i,headingRef:r}=(0,y.J)();return(0,d.useEffect)(()=>{(e||t)&&i(()=>t=>{if(e&&(t.metaKey||t.ctrlKey))window.open(e,"_blank");else if(n?.current)n.current.click();else if(r?.current){let e=r.current.querySelector("a, button");e&&e.click()}})},[n,r,e,t,i]),null};try{v.displayName||(v.displayName="InternalTitle")}catch{}try{(i=TitleTag).displayName||(i.displayName="TitleTag")}catch{}try{N.displayName||(N.displayName="ListItemTitle")}catch{}try{j.displayName||(j.displayName="ListItemSafeHTMLTitle")}catch{}try{(r=function({children:e,html:t,containerStyle:n,containerClassName:i,headerContainerRef:r,headingStyle:s,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,...m}){return _(m),(0,a.jsx)(v,{header:(0,a.jsx)(o.JR,{html:t,...m}),containerStyle:n,containerClassName:i,headerContainerRef:r,headingStyle:s,headingClassName:l,headingRef:c,leadingBadge:d,trailingBadges:u,children:e})}).displayName||(r.displayName="ListItemUnsafeHTMLTitle")}catch{}try{w.displayName||(w.displayName="HeadingLink")}catch{}},60674:(e,t,n)=>{n.d(t,{BP:()=>u,D3:()=>d,O8:()=>l});var i=n(74848),r=n(21728),a=n(96540),s=n(96679),o=n(17515);let l={ServerRender:"ServerRender",ClientHydrate:"ClientHydrate",ClientRender:"ClientRender"},c=(0,a.createContext)(l.ClientRender);function d(e){let t,n,d,u,m=(0,r.c)(8),{wasServerRendered:h,children:f}=e;m[0]!==h?(t=()=>s.X3?l.ServerRender:h?l.ClientHydrate:l.ClientRender,m[0]=h,m[1]=t):t=m[1];let[p,g]=(0,a.useState)(t);return m[2]!==p?(n=()=>{p!==l.ClientRender&&g(l.ClientRender)},d=[p],m[2]=p,m[3]=n,m[4]=d):(n=m[3],d=m[4]),(0,o.N)(n,d),m[5]!==f||m[6]!==p?(u=(0,i.jsx)(c.Provider,{value:p,children:f}),m[5]=f,m[6]=p,m[7]=u):u=m[7],u}function u(){return(0,a.useContext)(c)}try{c.displayName||(c.displayName="RenderPhaseContext")}catch{}try{d.displayName||(d.displayName="RenderPhaseProvider")}catch{}},30422:(e,t,n)=>{n.d(t,{BC:()=>c,JU:()=>u,Pk:()=>l});var i=n(74848),r=n(75177),a=n(52464),s=n(99418),o=n(96540);let l=m(r.A),c=m(a.A),d=(0,o.forwardRef)((e,t)=>(0,i.jsx)("div",{ref:t,...e}));d.displayName="Div";let u=m(d);function m(e){let t=(0,o.forwardRef)((t,n)=>{let{sanitizedHTML:r,props:a}=function(e){let{html:t,domPurifyConfig:n,...i}=e,r={...n,RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1};return{sanitizedHTML:s.default.sanitize(t,r),props:i}}(t);return(0,i.jsx)(e,{ref:n,...a,dangerouslySetInnerHTML:{__html:r}})});return t.displayName=`UnsafeHTML${e.displayName||e.name}`,t}try{u.displayName||(u.displayName="UnsafeHTMLDiv")}catch{}},94232:(e,t,n)=>{n.d(t,{O:()=>u});var i=n(75177),r=n(59299),a=n(44999),s=n(38267);let o=(0,s.i7)(["0%{transform:translateX(-100%);}50%{transform:translateX(100%);}100%{transform:translateX(100%);}"]),l=(0,s.AH)(["animation:"," 1.5s infinite linear;"],o),c=(0,s.i7)(["0%{opacity:.3;}10%{opacity:1;}100%{opacity:.3;}"]),d=(0,s.AH)(["animation:"," 2s infinite linear;"],c),u=(0,s.Ay)(i.A).withConfig({displayName:"LoadingSkeleton",componentId:"sc-bcbf24f9-0"})(["position:relative;overflow:hidden;mask-image:radial-gradient(white,black);",";&::after{",";background:linear-gradient(90deg,transparent,",",transparent);content:'';position:absolute;transform:translateX(-100%);bottom:0;left:0;right:0;top:0;}background-color:",";border-radius:",";display:block;height:1.2em;"," width:",";height:",";",""],({animationStyle:e})=>"pulse"===e&&d,({animationStyle:e})=>"pulse"!==e&&l,(0,r.Jt)("colors.neutral.subtle"),(0,r.Jt)("colors.neutral.subtle"),({theme:e,variant:t})=>{switch(t){case"rounded":return(0,r.Jt)("radii.1")(e);case"pill":return"100px";case"elliptical":return"50%";default:return"0"}},({variant:e})=>"elliptical"===e&&{borderRadius:"50%"},({width:e})=>{switch(e){case"random":return`${Math.floor(40*Math.random()+40)}%`;case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},({height:e})=>{switch(e){case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},a.A);try{u.displayName||(u.displayName="LoadingSkeleton")}catch{}},99543:(e,t,n)=>{n.d(t,{Qn:()=>l,T8:()=>d,Y6:()=>m,k6:()=>u});var i=n(74848),r=n(65556),a=n(96540),s=n(13233),o=n(47019);let l=5e3,c=(0,a.createContext)({addToast:s.l,addPersistedToast:s.l,clearPersistedToast:s.l}),d=(0,a.createContext)({toasts:[],persistedToast:null});function u({children:e}){let[t,n]=(0,o.A)([]),[s,u]=(0,a.useState)(null),{safeSetTimeout:m}=(0,r.A)(),h=(0,a.useCallback)(function(e){n([...t,e]),m(()=>n(t.slice(1)),l)},[t,m,n]),f=(0,a.useCallback)(function(e){u(e)},[u]),p=(0,a.useCallback)(function(){u(null)},[u]),g=(0,a.useMemo)(()=>({addToast:h,addPersistedToast:f,clearPersistedToast:p}),[f,h,p]),x=(0,a.useMemo)(()=>({toasts:t,persistedToast:s}),[t,s]);return(0,i.jsx)(c.Provider,{value:g,children:(0,i.jsx)(d.Provider,{value:x,children:e})})}function m(){return(0,a.useContext)(c)}try{c.displayName||(c.displayName="ToastContext")}catch{}try{d.displayName||(d.displayName="InternalToastsContext")}catch{}try{u.displayName||(u.displayName="ToastContextProvider")}catch{}},42218:(e,t,n)=>{n.d(t,{V:()=>m});var i=n(74848),r=n(96540),a=n(99543),s=n(38621),o=n(65556),l=n(16255);let c={info:"",success:"Toast--success",error:"Toast--error"},d={info:(0,i.jsx)(s.InfoIcon,{}),success:(0,i.jsx)(s.CheckIcon,{}),error:(0,i.jsx)(s.StopIcon,{})},u=({message:e,timeToLive:t,icon:n,type:a="info",role:s="log"})=>{let[u,m]=r.useState(!0),{safeSetTimeout:h}=(0,o.A)();return(0,r.useEffect)(()=>{t&&h(()=>m(!1),t-300)},[h,t]),(0,i.jsx)(l.Z,{children:(0,i.jsx)("div",{className:"p-1 position-fixed bottom-0 left-0 mb-3 ml-3",children:(0,i.jsxs)("div",{className:`Toast ${c[a]} ${u?"Toast--animateIn":"Toast--animateOut"}`,id:"ui-app-toast","data-testid":`ui-app-toast-${a}`,role:s,children:[(0,i.jsx)("span",{className:"Toast-icon",children:n||d[a]}),(0,i.jsx)("span",{className:"Toast-content",children:e})]})})})};try{u.displayName||(u.displayName="Toast")}catch{}function m(){let{toasts:e,persistedToast:t}=(0,r.useContext)(a.T8);return(0,i.jsxs)(i.Fragment,{children:[e.map((e,t)=>(0,i.jsx)(u,{message:e.message,icon:e.icon,timeToLive:a.Qn,type:e.type,role:e.role},t)),t&&(0,i.jsx)(u,{message:t.message,icon:t.icon,type:t.type,role:t.role})]})}try{m.displayName||(m.displayName="Toasts")}catch{}},61388:(e,t,n)=>{n.d(t,{_:()=>o});var i=n(36158),r=n(26261),a=n(66500),s=n(24880),o=class extends a.Q{#e;#t=void 0;#n;#i;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,s.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,s.EN)(t.mutationKey)!==(0,s.EN)(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#a()}mutate(e,t){return this.#i=t,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#r(){let e=this.#n?.state??(0,i.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#a(e){r.jG.batch(()=>{if(this.#i&&this.hasListeners()){let t=this.#t.variables,n=this.#t.context;e?.type==="success"?(this.#i.onSuccess?.(e.data,t,n),this.#i.onSettled?.(e.data,null,t,n)):e?.type==="error"&&(this.#i.onError?.(e.error,t,n),this.#i.onSettled?.(void 0,e.error,t,n))}this.listeners.forEach(e=>{e(this.#t)})})}}},94747:(e,t,n)=>{n.d(t,{n:()=>l});var i=n(96540),r=n(61388),a=n(26261),s=n(97665),o=n(54362);function l(e,t){let n=(0,s.jE)(t),[l]=i.useState(()=>new r._(n,e));i.useEffect(()=>{l.setOptions(e)},[l,e]);let c=i.useSyncExternalStore(i.useCallback(e=>l.subscribe(a.jG.batchCalls(e)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),d=i.useCallback((e,t)=>{l.mutate(e,t).catch(o.l)},[l]);if(c.error&&(0,o.G)(l.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:d,mutateAsync:c.mutate}}},6907:(e,t,n)=>{n.d(t,{x:()=>a});var i=n(2642),r=n(50622);function a(e,t){let n=(0,i.a)(e);if(isNaN(n.getTime()))throw RangeError("Invalid time value");let a=t?.format??"extended",s=t?.representation??"complete",o="",l="",c="extended"===a?"-":"";if("time"!==s){let e=(0,r.F)(n.getDate(),2),t=(0,r.F)(n.getMonth()+1,2),i=(0,r.F)(n.getFullYear(),4);o=`${i}${c}${t}${c}${e}`}if("date"!==s){let e=n.getTimezoneOffset();if(0!==e){let t=Math.abs(e),n=(0,r.F)(Math.trunc(t/60),2),i=(0,r.F)(t%60,2);l=`${e<0?"+":"-"}${n}:${i}`}else l="Z";let t=(0,r.F)(n.getHours(),2),i=(0,r.F)(n.getMinutes(),2),s=(0,r.F)(n.getSeconds(),2),c=""===o?"":"T",d=[t,i,s].join("extended"===a?":":"");o=`${o}${c}${d}${l}`}return o}},83592:(e,t,n)=>{n.d(t,{s:()=>r});var i=n(2642);function r(e,t){let n=(0,i.a)(e),r=(0,i.a)(t);return n.getFullYear()===r.getFullYear()}},9802:(e,t,n)=>{n.d(t,{e:()=>r});var i=n(83592);function r(e){return(0,i.s)(e,Date.now())}},79639:(e,t,n)=>{n.d(t,{P:()=>a});var i=n(85551),r=n(40828);function a(e){return(0,i.r)(e,(0,r.e)(Date.now(),1))}},24249:(e,t,n)=>{n.d(t,{Qr:()=>InputRange});let InputStyleCloneUpdateEvent=class InputStyleCloneUpdateEvent extends Event{constructor(){super("update")}};let i=new WeakMap;let InputStyleClone=class InputStyleClone extends EventTarget{#s=new MutationObserver(()=>this.#o());#l=new ResizeObserver(()=>this.#c());#d;#u=document.createElement("div");#m=document.createElement("div");static for(e){let t=i.get(e);return t||(t=new InputStyleClone(e),i.set(e,t)),t}constructor(e){super(),this.#d=new WeakRef(e),this.#u.style.position="absolute",this.#u.style.pointerEvents="none",this.#u.setAttribute("aria-hidden","true"),this.#u.appendChild(this.#m),this.#m.style.pointerEvents="none",this.#m.style.userSelect="none",this.#m.style.overflow="hidden",this.#m.style.display="block",this.#m.style.visibility="hidden",e instanceof HTMLTextAreaElement?(this.#m.style.whiteSpace="pre-wrap",this.#m.style.wordWrap="break-word"):(this.#m.style.whiteSpace="nowrap",this.#m.style.display="table-cell",this.#m.style.verticalAlign="middle"),e.after(this.#u),this.#o(),this.#h(),this.#s.observe(e,{attributeFilter:["style","dir"]}),this.#l.observe(e),document.addEventListener("scroll",this.#f,{capture:!0}),window.addEventListener("resize",this.#f,{capture:!0}),e.addEventListener("input",this.#p,{capture:!0})}get element(){return this.#m}forceUpdate(){this.#o(),this.#h()}disconnect(){this.#u?.remove(),this.#s.disconnect(),this.#l.disconnect(),document.removeEventListener("scroll",this.#f,{capture:!0}),window.removeEventListener("resize",this.#f,{capture:!0});let e=this.#g;e&&(e.removeEventListener("input",this.#p,{capture:!0}),i.delete(e))}get #g(){return this.#d?.deref()}#x(e){let t=this.#g;return t?e(t):this.disconnect()}#y=0;#b=0;#C(){this.#x(e=>{let t=window.getComputedStyle(e);this.#m.style.height=t.height,this.#m.style.width=t.width,e.clientHeight!==this.#m.clientHeight&&(this.#m.style.height=`calc(${t.height} + ${e.clientHeight-this.#m.clientHeight}px)`),e.clientWidth!==this.#m.clientWidth&&(this.#m.style.width=`calc(${t.width} + ${e.clientWidth-this.#m.clientWidth}px)`);let n=e.getBoundingClientRect(),i=this.#m.getBoundingClientRect();this.#y=this.#y+n.left-i.left,this.#b=this.#b+n.top-i.top,this.#m.style.transform=`translate(${this.#y}px, ${this.#b}px)`,this.#m.scrollTop=e.scrollTop,this.#m.scrollLeft=e.scrollLeft,this.dispatchEvent(new InputStyleCloneUpdateEvent)})}#v=!1;#c(){this.#v||(this.#v=!0,requestAnimationFrame(()=>{this.#C(),this.#v=!1}))}#o(){this.#x(e=>{let t=window.getComputedStyle(e);for(let e of r)this.#m.style[e]=t[e];this.#c()})}#h(){this.#x(e=>{this.#m.textContent=e.value,this.#C()})}#p=()=>this.#h();#f=e=>{this.#x(t=>{(e.target===document||e.target===window||e.target instanceof Node&&e.target.contains(t))&&this.#c()})}};let r=["direction","writingMode","unicodeBidi","textOrientation","boxSizing","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];let InputRange=class InputRange{#N;#j;#w;constructor(e,t=0,n=t){this.#N=e,this.#j=t,this.#w=n}static fromSelection(e){let{selectionStart:t,selectionEnd:n}=e;return new InputRange(e,t??void 0,n??void 0)}get collapsed(){return this.startOffset===this.endOffset}get commonAncestorContainer(){return this.#N}get endContainer(){return this.#N}get startContainer(){return this.#N}get startOffset(){return this.#j}get endOffset(){return this.#w}setStartOffset(e){this.#j=this.#_(e)}setEndOffset(e){this.#w=this.#_(e)}collapse(e=!1){e?this.setEndOffset(this.startOffset):this.setStartOffset(this.endOffset)}cloneContents(){return this.#S().cloneContents()}cloneRange(){return new InputRange(this.#N,this.startOffset,this.endOffset)}getBoundingClientRect(){return this.#S().getBoundingClientRect()}getClientRects(){return this.#S().getClientRects()}toString(){return this.#S().toString()}getStyleClone(){return this.#E}get #E(){return InputStyleClone.for(this.#N)}get #m(){return this.#E}#_(e){return Math.max(0,Math.min(e,this.#N.value.length))}#S(){let e=document.createRange(),t=this.#m.element.childNodes[0];return t&&(e.setStart(t,this.startOffset),e.setEnd(t,this.endOffset)),e}}}},e=>{e.O(0,["primer-react","react-lib","react-core","octicons-react","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_stacktrace-parser_dist_s-1d3d52","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-1fff13","vendors-node_modules_tanstack_query-core_build_modern_queryClient_js","vendors-node_modules_primer_live-region-element_dist_esm_index_js-node_modules_swc_helpers_es-b6e71e","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_dompurify_dist_purify_es_mjs","vendors-node_modules_tanstack_react-query_build_modern_useQuery_js","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_focus-visible_dist_focus-visible_js-node_modules_github_hotkey_dist_inde-336f14","vendors-node_modules_date-fns_getDaysInMonth_mjs-node_modules_date-fns_isAfter_mjs-node_modul-49f526","vendors-node_modules_github_hydro-analytics-client_dist_analytics-client_js-node_modules_gith-e334a0","vendors-node_modules_dnd-kit_modifiers_dist_modifiers_esm_js-node_modules_dnd-kit_sortable_di-8b7697","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-bb80ec","vendors-node_modules_react-relay_index_js","vendors-node_modules_tanstack_react-virtual_dist_esm_index_js","vendors-node_modules_micromark-extension-gfm_index_js-node_modules_micromark_lib_parse_js-nod-18f315","vendors-node_modules_remark-gfm_lib_index_js-node_modules_remark-parse_lib_index_js-node_modu-44d0fc","vendors-node_modules_hastscript_lib_index_js-node_modules_lowlight_lib_all_js-node_modules_re-7714c4","vendors-node_modules_codemirror_language_dist_index_js","vendors-node_modules_codemirror_commands_dist_index_js","vendors-node_modules_fzy_js_index_js-node_modules_react-relay_hooks_js-node_modules_github_g--885dc8","vendors-node_modules_github_catalyst_lib_index_js-node_modules_swc_helpers_esm__class_static_-b16468","ui_packages_paths_index_ts","ui_packages_ui-commands_ui-commands_ts","ui_packages_date-picker_components_DatePicker_tsx","ui_packages_drag-and-drop_drag-and-drop_ts-ui_packages_hydro-analytics_hydro-analytics_ts","ui_packages_list-view_src_hooks_use-next-header-tag_ts-ui_packages_list-view_src_ListItem_Lis-0a5d95","ui_packages_ref-selector_RefSelector_tsx","ui_packages_copilot-chat_utils_copilot-chat-helpers_ts","ui_packages_item-picker_components_RepositoryPicker_tsx","ui_packages_copilot-markdown_MarkdownRenderer_tsx","ui_packages_relay-environment_relay-environment_ts-ui_packages_lifecycle-labels_internal-comp-50711d","ui_packages_issue-create_dialog_CreateIssueDialogEntry_tsx-ui_packages_copy-to-clipboard_Copy-1ea606","ui_packages_commenting_constants_values_ts-ui_packages_commenting_components_ActivityHeader_t-fece80","ui_packages_app-uuid_app-uuid_ts-ui_packages_failbot_failbot_ts-ui_packages_reaction-viewer_R-a1391b","ui_packages_copilot-chat_components_CopilotIconAnimation_tsx","ui_packages_signed-commit-badge_index_ts","ui_packages_commenting_hooks_use-markdown-body_ts-ui_packages_commenting_utils_blocked-commen-7fb2bd","ui_packages_commit-attribution_index_ts-ui_packages_commit-checks-status_index_ts-ui_packages-064f4a","ui_packages_diff-file-header_diff-file-header_ts-ui_packages_diffs_diff-parts_ts","ui_packages_copilot-auth-token_copilot-auth-token_ts-ui_packages_diff-view-settings_types_ts--db0734","ui_packages_use-hide-footer_use-hide-footer_ts-ui_packages_commits_shared_use-tree-pane_tsx-u-59d336"],()=>e(e.s=40753)),e.O()}]);
//# sourceMappingURL=commits-51220d993885.js.map